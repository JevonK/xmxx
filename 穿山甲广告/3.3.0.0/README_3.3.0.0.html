<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>穿山甲Android SDK</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <style type="text/css">
body {
font-family: Helvetica, arial, sans-serif;
font-size: 14px;
line-height: 1.6;
padding-top: 10px;
padding-bottom: 10px;
background-color: white;
padding: 30px; }
body > *:first-child {
margin-top: 0 !important; }
body > *:last-child {
margin-bottom: 0 !important; }
a {
color: #4183C4; }
a.absent {
color: #cc0000; }
a.anchor {
display: block;
padding-left: 30px;
margin-left: -30px;
cursor: pointer;
position: absolute;
top: 0;
left: 0;
bottom: 0; }
h1, h2, h3, h4, h5, h6 {
margin: 20px 0 10px;
padding: 0;
font-weight: bold;
-webkit-font-smoothing: antialiased;
cursor: text;
position: relative; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
text-decoration: none; }
h1 tt, h1 code {
font-size: inherit; }
h2 tt, h2 code {
font-size: inherit; }
h3 tt, h3 code {
font-size: inherit; }
h4 tt, h4 code {
font-size: inherit; }
h5 tt, h5 code {
font-size: inherit; }
h6 tt, h6 code {
font-size: inherit; }
h1 {
font-size: 28px;
text-align: center;
border-bottom: 1px solid #cccccc;
color: #548DD4; }
h2 {
font-size: 24px; }
h3 {
font-size: 20px;
color: #548DD4; }
h4 {
font-size: 18px; }
h5 {
font-size: 16px;
color: #F79646; }
h6 {
color: #777777;
font-size: 14px; }
p, blockquote, ul, ol, dl, li, table, pre {
font-family: 'lucida grande';
margin: 15px 0; }
hr {
border-bottom: 1px solid;
padding: 0;
background: none repeat scroll 0 0 transparent;
border-color: #DDDDDD;
border-style: none none solid;
border-width: 1px;
clear: both;
height: 0;
margin: 15px 0;
overflow: hidden;
}
body > h2:first-child {
margin-top: 0;
padding-top: 0; }
body > h1:first-child {
margin-top: 0;
padding-top: 0; }
body > h1:first-child + h2 {
margin-top: 0;
padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
margin-top: 0;
padding-top: 0; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
margin-top: 0;
padding-top: 0; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
margin-top: 0; }
li p.first {
display: inline-block; }
li {
margin: 0; }
ul, ol {
padding-left: 30px; }
ul :first-child, ol :first-child {
margin-top: 0; }
dl {
padding: 0; }
dl dt {
font-size: 14px;
font-weight: bold;
font-style: italic;
padding: 0;
margin: 15px 0 5px; }
dl dt:first-child {
padding: 0; }
dl dt > :first-child {
margin-top: 0; }
dl dt > :last-child {
margin-bottom: 0; }
dl dd {
margin: 0 0 15px;
padding: 0 15px; }
dl dd > :first-child {
margin-top: 0; }
dl dd > :last-child {
margin-bottom: 0; }
blockquote {
border-left: 4px solid #dddddd;
padding: 0 15px;
color: #777777; }
blockquote > :first-child {
margin-top: 0; }
blockquote > :last-child {
margin-bottom: 0; }
table {
padding: 0;border-collapse: collapse; }
table tr {
border-top: 1px solid #cccccc;
background-color: white;
margin: 0;
padding: 0; }
table tr:nth-child(2n) {
background-color: #f8f8f8; }
table tr th {
font-weight: bold;
border: 1px solid #cccccc;
margin: 0;
padding: 6px 13px; }
table tr td {
border: 1px solid #cccccc;
margin: 0;
padding: 6px 13px; }
table tr th :first-child, table tr td :first-child {
margin-top: 0; }
table tr th :last-child, table tr td :last-child {
margin-bottom: 0; }
img {
max-width: 100%; }
span.frame {
display: block;
overflow: hidden; }
span.frame > span {
border: 1px solid #dddddd;
display: block;
float: left;
overflow: hidden;
margin: 13px 0 0;
padding: 7px;
width: auto; }
span.frame span img {
display: block;
float: left; }
span.frame span span {
clear: both;
color: #333333;
display: block;
padding: 5px 0 0; }
span.align-center {
display: block;
overflow: hidden;
clear: both; }
span.align-center > span {
display: block;
overflow: hidden;
margin: 13px auto 0;
text-align: center; }
span.align-center span img {
margin: 0 auto;
text-align: center; }
span.align-right {
display: block;
overflow: hidden;
clear: both; }
span.align-right > span {
display: block;
overflow: hidden;
margin: 13px 0 0;
text-align: right; }
span.align-right span img {
margin: 0;
text-align: right; }
span.float-left {
display: block;
margin-right: 13px;
overflow: hidden;
float: left; }
span.float-left span {
margin: 13px 0 0; }
span.float-right {
display: block;
margin-left: 13px;
overflow: hidden;
float: right; }
span.float-right > span {
display: block;
overflow: hidden;
margin: 13px auto 0;
text-align: right; }
code, tt {
margin: 0 2px;
padding: 0 5px;
white-space: nowrap;
border: 1px solid #eaeaea;
background-color: #f8f8f8;
border-radius: 3px; }
pre code {
margin: 0;
padding: 0;
white-space: pre;
border: none;
background: transparent; }
.highlight pre {
background-color: #f8f8f8;
border: 1px solid #cccccc;
font-size: 13px;
line-height: 19px;
overflow: auto;
padding: 6px 10px;
border-radius: 3px; }
pre {
background-color: #f8f8f8;
border: 1px solid #cccccc;
font-size: 13px;
line-height: 19px;
overflow: auto;
padding: 6px 10px;
border-radius: 3px; }
pre code, pre tt {
background-color: transparent;
border: none; }
sup {
font-size: 0.83em;
vertical-align: super;
line-height: 0;
}
* {
-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
body {
width: 854px;
margin:0 auto;
}
}
@media print {
table, pre {
page-break-inside: avoid;
}
pre {
word-wrap: break-word;
}
}
</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#穿山甲android-sdk接入说明文档">穿山甲Android SDK——接入说明文档</a>
<ul>
<li><a href="#sdk接入">1.SDK接入</a>
<ul>
<li><a href="#sdk包的导入">1.1SDK包的导入</a>
<ul>
<li><a href="#申请应用的codeid">1.1.1申请应用的CodeId</a></li>
<li><a href="#导入aar及sdk依赖的jar包">1.1.2 导入aar及SDK依赖的jar包</a></li>
</ul></li>
<li><a href="#androidmanifest配置">1.2 AndroidManifest配置</a>
<ul>
<li><a href="#添加权限">1.2.1 添加权限</a></li>
<li><a href="#适配anroid7.0及以上">1.2.2 适配Anroid7.0及以上</a></li>
<li><a href="#provider配置">1.2.3 provider配置</a></li>
<li><a href="#运行环境配置">1.2.4 运行环境配置</a></li>
</ul></li>
<li><a href="#代码混淆">1.3 代码混淆</a></li>
<li><a href="#初始化sdk">1.4 初始化SDK</a>
<ul>
<li><a href="#初始化接口说明">1.4.1 初始化接口说明</a></li>
<li><a href="#初始化配置参数说明">1.4.2 初始化配置参数说明：</a></li>
<li><a href="#隐私信息控制开关">1.4.3 隐私信息控制开关</a></li>
</ul></li>
</ul></li>
<li><a href="#加载广告">2.加载广告</a>
<ul>
<li><a href="#构建ttadmanager对象">2.1 构建TTAdManager对象 :</a></li>
<li><a href="#构建ttadnative对象">2.2 构建TTAdNative对象</a></li>
<li><a href="#构建adslot对象">2.3 构建AdSlot对象</a></li>
<li><a href="#接入原生信息流广告ttfeedad">2.4 接入原生信息流广告（TTFeedAd）</a>
<ul>
<li><a href="#ttfeedad接口说明">2.4.1 TTFeedAd接口说明</a></li>
<li><a href="#加载原生信息流广告">2.4.2 加载原生信息流广告</a></li>
<li><a href="#原生信息流视频广告回调">2.4.3 原生信息流视频广告回调</a></li>
<li><a href="#注册可点击的view">2.4.4 注册可点击的View</a></li>
</ul></li>
<li><a href="#接入开屏广告ttsplashad">2.5 接入开屏广告（TTSplashAd）</a>
<ul>
<li><a href="#ttsplashad广告接口说明">2.5.1 TTSplashAd广告接口说明：</a></li>
<li><a href="#加载开屏广告">2.5.2 加载开屏广告</a></li>
</ul></li>
<li><a href="#接入原生广告ttnativead">2.6 接入原生广告（TTNativeAd）</a>
<ul>
<li><a href="#ttnativead接口说明">2.6.1 TTNativeAd接口说明：</a></li>
<li><a href="#加载原生广告">2.6.2 加载原生广告</a></li>
<li><a href="#展示原生广告">2.6.3 展示原生广告</a></li>
</ul></li>
<li><a href="#接入激励视频广告ttrewardvideoad">2.7 接入激励视频广告（TTRewardVideoAd）</a>
<ul>
<li><a href="#ttrewardvideoad接口说明">2.7.1 TTRewardVideoAd接口说明：</a></li>
<li><a href="#加载激励视频广告">2.7.2 加载激励视频广告</a></li>
<li><a href="#展示视频广告">2.7.3 展示视频广告</a></li>
<li><a href="#服务器到服务器回调">2.7.4 服务器到服务器回调</a>
<ul>
<li><a href="#回调方式说明">回调方式说明</a></li>
<li><a href="#签名生成方式">签名生成方式</a></li>
<li><a href="#返回约定">返回约定</a></li>
</ul></li>
</ul></li>
<li><a href="#接入全屏视频广告ttfullscreenvideoad">2.8 接入全屏视频广告（TTFullScreenVideoAd）</a>
<ul>
<li><a href="#ttfullscreenvideoad接口说明">2.8.1 TTFullScreenVideoAd接口说明：</a></li>
<li><a href="#加载全屏视频广告">2.8.2 加载全屏视频广告</a></li>
<li><a href="#展示视频广告-1">2.8.3 展示视频广告</a></li>
</ul></li>
<li><a href="#接入draw竖版视频信息流广告ttdrawfeedad">2.9 接入Draw竖版视频信息流广告（TTDrawFeedAd）</a>
<ul>
<li><a href="#ttdrawfeedad接口说明">2.9.1 TTDrawFeedAd接口说明：</a></li>
<li><a href="#加载draw竖版视频信息流广告">2.9.2 加载Draw竖版视频信息流广告</a></li>
<li><a href="#展示视频广告-2">2.9.3 展示视频广告</a></li>
</ul></li>
<li><a href="#接入个性化模板信息流广告ttnativeexpressad">2.10 接入个性化模板信息流广告（TTNativeExpressAd）</a>
<ul>
<li><a href="#ttnativeexpressad接口说明">2.10.1 TTNativeExpressAd接口说明：</a></li>
<li><a href="#加载个性化模板信息流广告绑定接口回调dislike逻辑">2.10.2 加载个性化模板信息流广告，绑定接口回调、dislike逻辑</a></li>
<li><a href="#展示个性化模板信息流广告">2.10.3 展示个性化模板信息流广告</a></li>
</ul></li>
<li><a href="#接入个性化模板banner广告接口同-ttnativeexpressad">2.11 接入个性化模板Banner广告（接口同 TTNativeExpressAd）</a>
<ul>
<li><a href="#加载个性化模板banner广告绑定接口回调dislike逻辑">2.11.1 加载个性化模板Banner广告，绑定接口回调、dislike逻辑</a></li>
<li><a href="#展示个性化模板banner广告">2.11.2 展示个性化模板Banner广告</a></li>
</ul></li>
<li><a href="#接入个性化模板插屏广告接口同-ttnativeexpressad">2.12 接入个性化模板插屏广告（接口同 TTNativeExpressAd）</a>
<ul>
<li><a href="#加载个性化模板插屏广告绑定接口回调">2.12.1 加载个性化模板插屏广告，绑定接口回调</a></li>
<li><a href="#展示个性化模板插屏广告">2.12.2 展示个性化模板插屏广告</a></li>
</ul></li>
<li><a href="#接入个性化模板draw视频广告接口同-ttnativeexpressad">2.13 接入个性化模板Draw视频广告（接口同 TTNativeExpressAd）</a>
<ul>
<li><a href="#加载个性化模板draw视频广告绑定接口回调">2.13.1 加载个性化模板Draw视频广告，绑定接口回调</a></li>
<li><a href="#展示个性化模板draw视频广告">2.13.2 展示个性化模板Draw视频广告</a></li>
</ul></li>
<li><a href="#下载监听器注册">2.14 下载监听器注册：</a>
<ul>
<li><a href="#下载监听回调说明">2.14.1 下载监听回调说明</a></li>
<li><a href="#注册下载监听器">2.14.2 注册下载监听器</a></li>
</ul></li>
<li><a href="#feed广告下载状态控制器">2.15 Feed广告下载状态控制器</a>
<ul>
<li><a href="#feed广告下载状态控制器接口说明">2.15.1 Feed广告下载状态控制器接口说明</a></li>
<li><a href="#接入feed广告app下载状态控制器">2.15.2 接入Feed广告App下载状态控制器</a></li>
</ul></li>
<li><a href="#接入dislike逻辑ttaddislike">2.16 接入Dislike逻辑（TTAdDislike）</a>
<ul>
<li><a href="#ttaddislike接口说明">2.16.1 TTAdDislike接口说明</a></li>
<li><a href="#信息流广告接入dislike">2.16.2 信息流广告接入Dislike</a></li>
<li><a href="#banner广告接入dislike">2.16.3 Banner广告接入Dislike</a></li>
<li><a href="#自定义dislike对话框使用说明">2.16.4 自定义dislike对话框使用说明</a></li>
</ul></li>
</ul></li>
<li><a href="#参考">3.参考</a>
<ul>
<li><a href="#sdk错误码">3.1 SDK错误码</a></li>
<li><a href="#sdk多进程支持">3.2 SDK多进程支持</a></li>
<li><a href="#sdk打包为独立插件">3.3 SDK打包为独立插件</a></li>
<li><a href="#主题配置">3.4 主题配置</a>
<ul>
<li><a href="#下载删除弹窗主题配置">3.4.1 下载删除弹窗主题配置</a></li>
<li><a href="#落地页titlebar主题配置">3.4.2 落地页titleBar主题配置</a></li>
</ul></li>
<li><a href="#常见问题">3.5 常见问题</a></li>
<li><a href="#历史更新记录">3.6 历史更新记录</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="穿山甲android-sdk接入说明文档">穿山甲Android SDK——接入说明文档</h1>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">最新版本更新日志</th>
<th style="text-align: center;">修订日期</th>
<th style="text-align: center;">修订说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">v3.3.0.0</td>
<td style="text-align: center;">2020-09-24</td>
<td style="text-align: center;">优化模版广告，转化优化</td>
</tr>
</tbody>
</table>
<p>[TOC]</p>
<h2 id="sdk接入">1.SDK接入</h2>
<p>此版本sdk不适用于中国以外的安卓商店/渠道。开发者如果有海外流量对接需求，烦请发送邮件至pangle_support@bytedance.com，以便获取到正确的海外专属安卓SDK版本进行对接。</p>
<h3 id="sdk包的导入">1.1SDK包的导入</h3>
<h4 id="申请应用的codeid">1.1.1申请应用的CodeId</h4>
<p>请在穿山甲平台上创建好应用ID和广告位ID。</p>
<h4 id="导入aar及sdk依赖的jar包">1.1.2 导入aar及SDK依赖的jar包</h4>
<p>将本SDK压缩包内的open_ad_sdk.aar复制到Application Module/libs文件夹(没有的话须手动创建), 并将以下代码添加到您app的build.gradle中：</p>
<pre><code>repositories {
    flatDir {
        dirs &#39;libs&#39;
    }
}
depedencies {
    compile(name: &#39;open_ad_sdk&#39;, ext: ‘aar&#39;)
}
</code></pre>
<h3 id="androidmanifest配置">1.2 AndroidManifest配置</h3>
<h4 id="添加权限">1.2.1 添加权限</h4>
<pre><code>&lt;!--必要权限--&gt;
&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;

&lt;!--可选权限--&gt;
&lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_COARSE_LOCATION&quot; /&gt;
&lt;uses-permission android:name=&quot;android.permission.REQUEST_INSTALL_PACKAGES&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.GET_TASKS&quot;/&gt;

&lt;!--可选，穿山甲提供“获取地理位置权限”和“不给予地理位置权限，开发者传入地理位置参数”两种方式上报用户位置，两种方式均可不选，添加位置权限或参数将帮助投放定位广告--&gt;
&lt;!--请注意：无论通过何种方式提供给穿山甲用户地理位置，均需向用户声明地理位置权限将应用于穿山甲广告投放，穿山甲不强制获取地理位置信息--&gt;
&lt;uses-permission android:name=&quot;android.permission.ACCESS_FINE_LOCATION&quot; /&gt;

&lt;!-- 如果有视频相关的广告且使用textureView播放，请务必添加，否则黑屏 --&gt;
&lt;uses-permission android:name=&quot;android.permission.WAKE_LOCK&quot; /&gt;
</code></pre>
<p><strong>注意</strong>: 穿山甲SDK不强制获取以上权限，即使没有获取可选权限SDK也能正常运行；获取以上权限将帮助穿山甲优化投放广告精准度和用户的交互体验，提高eCPM。</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">//建议在广告请求前，合适的时机调用SDK提供的方法</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co">//TTAdManager接口中的方法，context可以是Activity或Application</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="dt">void</span> <span class="fu">requestPermissionIfNecessary</span>(<span class="bu">Context</span> context);</span></code></pre></div>
<h4 id="适配anroid7.0及以上">1.2.2 适配Anroid7.0及以上</h4>
<p>如果您的应用需要在Anroid7.0及以上环境运行，请在AndroidManifest中添加如下代码：</p>
<pre><code>&lt;provider
    android:name=&quot;com.bytedance.sdk.openadsdk.TTFileProvider&quot;
    android:authorities=&quot;${applicationId}.TTFileProvider&quot;
    android:exported=&quot;false&quot;
    android:grantUriPermissions=&quot;true&quot;&gt;
   &lt;meta-data
        android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot;
        android:resource=&quot;@xml/file_paths&quot; /&gt;
&lt;/provider&gt;</code></pre>
<p>在res/xml目录下，新建一个xml文件file_paths，在该文件中添加如下代码：</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;paths xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;
   &lt;!--为了适配所有路径可以设置 path = &quot;.&quot; --&gt;
   &lt;external-path name=&quot;tt_external_root&quot; path=&quot;.&quot; /&gt;
   &lt;external-path name=&quot;tt_external_download&quot; path=&quot;Download&quot; /&gt;
   &lt;external-files-path name=&quot;tt_external_files_download&quot; path=&quot;Download&quot; /&gt;
   &lt;files-path name=&quot;tt_internal_file_download&quot; path=&quot;Download&quot; /&gt;
   &lt;cache-path name=&quot;tt_internal_cache_download&quot; path=&quot;Download&quot; /&gt;
&lt;/paths&gt;</code></pre>
<pre><code>为了适配下载和安装相关功能，在工程中引用的包 com.android.support:support-v4:24.2.0
使用24.2.0以及以上版本。</code></pre>
<h4 id="provider配置">1.2.3 provider配置</h4>
<p><strong>注意</strong>：单进程或多进程都必须配置</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb7-1"><a href="#cb7-1"></a><span class="kw">&lt;provider</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="ot">    android:name=</span><span class="st">&quot;com.bytedance.sdk.openadsdk.multipro.TTMultiProvider&quot;</span></span>
<span id="cb7-3"><a href="#cb7-3"></a><span class="ot">    android:authorities=</span><span class="st">&quot;${applicationId}.TTMultiProvider&quot;</span></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="ot">    android:exported=</span><span class="st">&quot;false&quot;</span> <span class="kw">/&gt;</span></span></code></pre></div>
<h4 id="运行环境配置">1.2.4 运行环境配置</h4>
<p>本SDK可运行于Android4.0 (API Level 14) 及以上版本。</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode xml"><code class="sourceCode xml"><span id="cb8-1"><a href="#cb8-1"></a><span class="kw">&lt;uses-sdk</span><span class="ot"> android:minSdkVersion=</span><span class="st">&quot;14&quot;</span><span class="ot"> android:targetSdkVersion=</span><span class="st">&quot;24&quot;</span> <span class="kw">/&gt;</span></span></code></pre></div>
<p>如果开发者声明targetSdkVersion到API 23以上，请确保调用本SDK的任何接口前，已经申请到了SDK要求的所有权限，否则SDK部分特性可能受限。</p>
<h3 id="代码混淆">1.3 代码混淆</h3>
<p>如果您需要使用proguard混淆代码，需确保不要混淆SDK的代码。 请在proguard.cfg文件(或其他混淆文件)尾部添加如下配置:</p>
<pre><code>-keep class com.bytedance.sdk.openadsdk.** { *; }
-keep public interface com.bytedance.sdk.openadsdk.downloadnew.** {*;}
-keep class com.pgl.sys.ces.* {*;}
</code></pre>
<p><strong>注意</strong>: SDK代码被混淆后会导致广告无法展现或者其它异常。</p>
<p><strong>注意</strong>: SDK中使用的so文件支持五种架构：x86,x86_64,armeabi,armeabi-v7a,arm64-v8a 如果您应用中支持的架构超出这 五种，请在build.gradle中使用abiFilters选择支持的架构。如下所示： ndk { // 设置支持的 SO 库构架，注意这里要根据你的实际情况来设置 abiFilters ‘armeabi-v7a’, ‘arm64-v8a’, ‘x86’, ‘x86_64’, ‘armeabi’ }</p>
<h3 id="初始化sdk">1.4 初始化SDK</h3>
<p>开发者需要在Application#onCreate()方法中调用以下代码来初始化穿山甲sdk。 目前sdk已支持多进程，如果明确某个进程不会使用到广告SDK，可以只针对特定进程初始化广告sdk</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb10-1"><a href="#cb10-1"></a><span class="kw">public</span> <span class="kw">class</span> DemoApplication <span class="kw">extends</span> Application {</span>
<span id="cb10-2"><a href="#cb10-2"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="bu">String</span> PROCESS_NAME_XXXX = <span class="st">&quot;process_name_xxxx&quot;</span>;</span>
<span id="cb10-3"><a href="#cb10-3"></a></span>
<span id="cb10-4"><a href="#cb10-4"></a>    <span class="at">@Override</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCreate</span>() {</span>
<span id="cb10-6"><a href="#cb10-6"></a>        <span class="kw">super</span>.<span class="fu">onCreate</span>();</span>
<span id="cb10-7"><a href="#cb10-7"></a></span>
<span id="cb10-8"><a href="#cb10-8"></a>        <span class="co">//强烈建议在应用对应的Application#onCreate()方法中调用，避免出现content为null的异常</span></span>
<span id="cb10-9"><a href="#cb10-9"></a>        TTAdSdk.<span class="fu">init</span>(context,</span>
<span id="cb10-10"><a href="#cb10-10"></a>                            <span class="kw">new</span> TTAdConfig.<span class="fu">Builder</span>()</span>
<span id="cb10-11"><a href="#cb10-11"></a>                                    .<span class="fu">appId</span>(<span class="st">&quot;5001121&quot;</span>)</span>
<span id="cb10-12"><a href="#cb10-12"></a>                                    .<span class="fu">useTextureView</span>(<span class="kw">false</span>) <span class="co">//使用TextureView控件播放视频,默认为SurfaceView,当有SurfaceView冲突的场景，可以使用TextureView</span></span>
<span id="cb10-13"><a href="#cb10-13"></a>                                    .<span class="fu">allowShowNotify</span>(<span class="kw">true</span>) <span class="co">//是否允许sdk展示通知栏提示</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>                                    .<span class="fu">allowShowPageWhenScreenLock</span>(<span class="kw">true</span>) <span class="co">//是否在锁屏场景支持展示广告落地页</span></span>
<span id="cb10-15"><a href="#cb10-15"></a>                                    .<span class="fu">debug</span>(<span class="kw">true</span>) <span class="co">//测试阶段打开，可以通过日志排查问题，上线时去除该调用</span></span>
<span id="cb10-16"><a href="#cb10-16"></a>                                    .<span class="fu">directDownloadNetworkType</span>(TTAdConstant.<span class="fu">NETWORK_STATE_WIFI</span>, TTAdConstant.<span class="fu">NETWORK_STATE_3G</span>) <span class="co">//允许直接下载的网络状态集合</span></span>
<span id="cb10-17"><a href="#cb10-17"></a>                                    .<span class="fu">supportMultiProcess</span>(<span class="kw">false</span>) <span class="co">//是否支持多进程，true支持</span></span>
<span id="cb10-18"><a href="#cb10-18"></a>                                    <span class="co">//.httpStack(new MyOkStack3())//自定义网络库，demo中给出了okhttp3版本的样例，其余请自行开发或者咨询工作人员。</span></span>
<span id="cb10-19"><a href="#cb10-19"></a>                                    .<span class="fu">build</span>());</span>
<span id="cb10-20"><a href="#cb10-20"></a></span>
<span id="cb10-21"><a href="#cb10-21"></a>        <span class="co">//如果明确某个进程不会使用到广告SDK，可以只针对特定进程初始化广告SDK的content</span></span>
<span id="cb10-22"><a href="#cb10-22"></a>        <span class="co">//if (PROCESS_NAME_XXXX.equals(processName)) {</span></span>
<span id="cb10-23"><a href="#cb10-23"></a>        <span class="co">//   TTAdSdk.init(context, config);</span></span>
<span id="cb10-24"><a href="#cb10-24"></a>        <span class="co">//}</span></span>
<span id="cb10-25"><a href="#cb10-25"></a>    }</span>
<span id="cb10-26"><a href="#cb10-26"></a>}</span></code></pre></div>
<h4 id="初始化接口说明">1.4.1 初始化接口说明</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1"></a>    <span class="co">/**</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>     <span class="co">*</span> 穿山甲sdk初始化入口</span>
<span id="cb11-3"><a href="#cb11-3"></a>     <span class="co">*</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>     <span class="co">* </span><span class="an">@param context </span>必须是application context</span>
<span id="cb11-5"><a href="#cb11-5"></a>     <span class="co">*</span> <span class="an">@param config </span> 初始化配置信息，必要参数</span>
<span id="cb11-6"><a href="#cb11-6"></a>     <span class="co">*</span> <span class="an">@return </span>TTAdManager实例</span>
<span id="cb11-7"><a href="#cb11-7"></a>     <span class="co">*/</span></span>
<span id="cb11-8"><a href="#cb11-8"></a>    <span class="kw">public</span> <span class="dt">static</span> TTAdManager <span class="fu">init</span>(<span class="bu">Context</span> context, TTAdConfig config);</span></code></pre></div>
<h4 id="初始化配置参数说明">1.4.2 初始化配置参数说明：</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb12-1"><a href="#cb12-1"></a>    <span class="kw">public</span> <span class="dt">static</span> <span class="kw">class</span> TTAdConfig.<span class="fu">Builder</span> {</span>
<span id="cb12-2"><a href="#cb12-2"></a>        <span class="kw">private</span> <span class="bu">String</span> mAppId;<span class="co">// 必选参数，设置应用的AppId</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>        <span class="kw">private</span> <span class="dt">boolean</span> mIsPaid = <span class="kw">false</span>;<span class="co">// 可选参数，设置是否为计费用户：true计费用户、false非计费用户。默认为false非计费用户。须征得用户同意才可传入该参数</span></span>
<span id="cb12-4"><a href="#cb12-4"></a>        <span class="kw">private</span> <span class="bu">String</span> mKeywords;<span class="co">// 可选参数，设置用户画像的关键词列表 **不能超过为1000个字符**。须征得用户同意才可传入该参数</span></span>
<span id="cb12-5"><a href="#cb12-5"></a>        <span class="kw">private</span> <span class="bu">String</span> mData;<span class="co">// 可选参数，设置额外的用户信息 **不能超过为1000个字符**</span></span>
<span id="cb12-6"><a href="#cb12-6"></a>        <span class="kw">private</span> <span class="dt">boolean</span> mAllowShowNotify = <span class="kw">true</span>;<span class="co">// 可选参数，设置是否允许SDK弹出通知：true允许、false禁止。默认为true允许</span></span>
<span id="cb12-7"><a href="#cb12-7"></a>        <span class="kw">private</span> <span class="dt">boolean</span> mIsDebug = <span class="kw">false</span>;<span class="co">// 可选参数，是否打开debug调试信息输出：true打开、false关闭。默认false关闭</span></span>
<span id="cb12-8"><a href="#cb12-8"></a>        <span class="kw">private</span> <span class="dt">boolean</span> mAllowShowPageWhenScreenLock = <span class="kw">false</span>;<span class="co">// 可选参数，设置是否允许落地页出现在锁屏上面：true允许、false禁止。默认为false禁止</span></span>
<span id="cb12-9"><a href="#cb12-9"></a>        <span class="kw">private</span> <span class="dt">int</span>[] mDirectDownloadNetworkType;</span>
<span id="cb12-10"><a href="#cb12-10"></a>        <span class="kw">private</span> <span class="dt">boolean</span> mIsUseTextureView = <span class="kw">false</span>;<span class="co">// 可选参数，设置是否使用texture播放视频：true使用、false不使用。默认为false不使用（使用的是surface）</span></span>
<span id="cb12-11"><a href="#cb12-11"></a>        <span class="kw">private</span> <span class="dt">boolean</span> mIsSupportMultiProcess = <span class="kw">false</span>;<span class="co">// 可选参数，设置是否支持多进程：true支持、false不支持。默认为false不支持</span></span>
<span id="cb12-12"><a href="#cb12-12"></a>        <span class="kw">private</span> IHttpStack mHttpStack;<span class="co">//可选参数，设置外部网络请求，默认为urlconnection</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>        <span class="kw">private</span> <span class="dt">boolean</span> mIsAsyncInit = <span class="kw">false</span>;<span class="co">//是否异步初始化sdk，开启可减少初始化耗时</span></span>
<span id="cb12-14"><a href="#cb12-14"></a>        <span class="kw">private</span> TTCustomController mCustomController;<span class="co">//可选参数，可以设置隐私信息控制开关</span></span>
<span id="cb12-15"><a href="#cb12-15"></a>    }</span></code></pre></div>
<h4 id="隐私信息控制开关">1.4.3 隐私信息控制开关</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb13-1"><a href="#cb13-1"></a><span class="kw">public</span> <span class="kw">abstract</span> <span class="kw">class</span> TTCustomController {</span>
<span id="cb13-2"><a href="#cb13-2"></a></span>
<span id="cb13-3"><a href="#cb13-3"></a>    <span class="co">/**</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>     <span class="co">*</span> 是否允许SDK主动使用地理位置信息</span>
<span id="cb13-5"><a href="#cb13-5"></a>     <span class="co">*</span></span>
<span id="cb13-6"><a href="#cb13-6"></a>     <span class="co">* </span><span class="an">@return </span>true可以获取，false禁止获取。默认为true</span>
<span id="cb13-7"><a href="#cb13-7"></a>     <span class="co">*/</span></span>
<span id="cb13-8"><a href="#cb13-8"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isCanUseLocation</span>() {</span>
<span id="cb13-9"><a href="#cb13-9"></a>        <span class="kw">return</span> <span class="kw">true</span>;</span>
<span id="cb13-10"><a href="#cb13-10"></a>    }</span>
<span id="cb13-11"><a href="#cb13-11"></a></span>
<span id="cb13-12"><a href="#cb13-12"></a>    <span class="co">/**</span></span>
<span id="cb13-13"><a href="#cb13-13"></a>     <span class="co">*</span> 当isCanUseLocation<span class="co">=</span>false时，可传入地理位置信息，穿山甲sdk使用您传入的地理位置信息</span>
<span id="cb13-14"><a href="#cb13-14"></a>     <span class="co">*</span></span>
<span id="cb13-15"><a href="#cb13-15"></a>     <span class="co">* </span><span class="an">@return </span>地理位置参数</span>
<span id="cb13-16"><a href="#cb13-16"></a>     <span class="co">*/</span></span>
<span id="cb13-17"><a href="#cb13-17"></a>    <span class="kw">public</span> TTLocation <span class="fu">getTTLocation</span>() {</span>
<span id="cb13-18"><a href="#cb13-18"></a>        <span class="kw">return</span> <span class="kw">null</span>;</span>
<span id="cb13-19"><a href="#cb13-19"></a>    }</span>
<span id="cb13-20"><a href="#cb13-20"></a>    </span>
<span id="cb13-21"><a href="#cb13-21"></a>    <span class="co">/**</span></span>
<span id="cb13-22"><a href="#cb13-22"></a>     <span class="co">*</span> 是否允许SDK主动使用手机硬件参数，如：imei</span>
<span id="cb13-23"><a href="#cb13-23"></a>     <span class="co">*</span></span>
<span id="cb13-24"><a href="#cb13-24"></a>     <span class="co">* </span><span class="an">@return </span>true可以使用，false禁止使用。默认为true</span>
<span id="cb13-25"><a href="#cb13-25"></a>     <span class="co">*/</span></span>
<span id="cb13-26"><a href="#cb13-26"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isCanUsePhoneState</span>() {</span>
<span id="cb13-27"><a href="#cb13-27"></a>        <span class="kw">return</span> <span class="kw">true</span>;</span>
<span id="cb13-28"><a href="#cb13-28"></a>    }</span>
<span id="cb13-29"><a href="#cb13-29"></a></span>
<span id="cb13-30"><a href="#cb13-30"></a>    <span class="co">/**</span></span>
<span id="cb13-31"><a href="#cb13-31"></a>     <span class="co">*</span> 当isCanUsePhoneState<span class="co">=</span>false时，可传入imei信息，穿山甲sdk使用您传入的imei信息</span>
<span id="cb13-32"><a href="#cb13-32"></a>     <span class="co">*</span></span>
<span id="cb13-33"><a href="#cb13-33"></a>     <span class="co">* </span><span class="an">@return </span>imei信息</span>
<span id="cb13-34"><a href="#cb13-34"></a>     <span class="co">*/</span></span>
<span id="cb13-35"><a href="#cb13-35"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDevImei</span>() {</span>
<span id="cb13-36"><a href="#cb13-36"></a>        <span class="kw">return</span> <span class="kw">null</span>;</span>
<span id="cb13-37"><a href="#cb13-37"></a>    }</span>
<span id="cb13-38"><a href="#cb13-38"></a></span>
<span id="cb13-39"><a href="#cb13-39"></a>    <span class="co">/**</span></span>
<span id="cb13-40"><a href="#cb13-40"></a>     <span class="co">*</span> 是否允许SDK主动使用ACCESS_WIFI_STATE权限</span>
<span id="cb13-41"><a href="#cb13-41"></a>     <span class="co">*</span></span>
<span id="cb13-42"><a href="#cb13-42"></a>     <span class="co">* </span><span class="an">@return </span>true可以使用，false禁止使用。默认为true</span>
<span id="cb13-43"><a href="#cb13-43"></a>     <span class="co">*/</span></span>
<span id="cb13-44"><a href="#cb13-44"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isCanUseWifiState</span>() {</span>
<span id="cb13-45"><a href="#cb13-45"></a>        <span class="kw">return</span> <span class="kw">true</span>;</span>
<span id="cb13-46"><a href="#cb13-46"></a>    }</span>
<span id="cb13-47"><a href="#cb13-47"></a></span>
<span id="cb13-48"><a href="#cb13-48"></a>    <span class="co">/**</span></span>
<span id="cb13-49"><a href="#cb13-49"></a>     <span class="co">*</span> 是否允许SDK主动使用WRITE_EXTERNAL_STORAGE权限</span>
<span id="cb13-50"><a href="#cb13-50"></a>     <span class="co">*</span></span>
<span id="cb13-51"><a href="#cb13-51"></a>     <span class="co">* </span><span class="an">@return </span>true可以使用，false禁止使用。默认为true</span>
<span id="cb13-52"><a href="#cb13-52"></a>     <span class="co">*/</span></span>
<span id="cb13-53"><a href="#cb13-53"></a>    <span class="kw">public</span> <span class="dt">boolean</span> <span class="fu">isCanUseWriteExternal</span>() {</span>
<span id="cb13-54"><a href="#cb13-54"></a>        <span class="kw">return</span> <span class="kw">true</span>;</span>
<span id="cb13-55"><a href="#cb13-55"></a>    }</span>
<span id="cb13-56"><a href="#cb13-56"></a></span>
<span id="cb13-57"><a href="#cb13-57"></a>    <span class="co">/**</span></span>
<span id="cb13-58"><a href="#cb13-58"></a>     <span class="co">*</span> 开发者可以传入oaid</span>
<span id="cb13-59"><a href="#cb13-59"></a>     <span class="co">*</span></span>
<span id="cb13-60"><a href="#cb13-60"></a>     <span class="co">* </span><span class="an">@return </span>oaid</span>
<span id="cb13-61"><a href="#cb13-61"></a>     <span class="co">*/</span></span>
<span id="cb13-62"><a href="#cb13-62"></a>     <span class="kw">public</span> <span class="bu">String</span> <span class="fu">getDevOaid</span>() {</span>
<span id="cb13-63"><a href="#cb13-63"></a>        <span class="kw">return</span> <span class="kw">null</span>;</span>
<span id="cb13-64"><a href="#cb13-64"></a>     }</span>
<span id="cb13-65"><a href="#cb13-65"></a></span>
<span id="cb13-66"><a href="#cb13-66"></a>}</span></code></pre></div>
<h2 id="加载广告">2.加载广告</h2>
<h3 id="构建ttadmanager对象">2.1 构建TTAdManager对象 :</h3>
<p>TTAdManager对象为整个SDK的入口接口，可用于广告获取、权限请求、版本号获取等。</p>
<p>构建方法：</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb14-1"><a href="#cb14-1"></a><span class="co">//一定要在初始化后才能调用，否则为空</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>TTAdManager ttAdManager = TTAdSdk.<span class="fu">getAdManager</span>();</span></code></pre></div>
<p>TTAdManger接口说明：</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1"></a><span class="kw">public</span> <span class="kw">interface</span> TTAdManager {</span>
<span id="cb15-2"><a href="#cb15-2"></a></span>
<span id="cb15-3"><a href="#cb15-3"></a>    TTAdNative <span class="fu">createAdNative</span>(<span class="bu">Context</span> context); <span class="co">// 创建TTAdNative对象 必须采用activity</span></span>
<span id="cb15-4"><a href="#cb15-4"></a></span>
<span id="cb15-5"><a href="#cb15-5"></a>    <span class="co">//部分机型需要主动申请权限，如 READ_PHONE_STATE权限</span></span>
<span id="cb15-6"><a href="#cb15-6"></a>    <span class="dt">void</span> <span class="fu">requestPermissionIfNecessary</span>(<span class="bu">Context</span> context);</span>
<span id="cb15-7"><a href="#cb15-7"></a></span>
<span id="cb15-8"><a href="#cb15-8"></a></span>
<span id="cb15-9"><a href="#cb15-9"></a>    <span class="co">//退出时尝试显示&quot;提示安装app&quot;对话框，返回值：true显示对话框、false不显示对话框</span></span>
<span id="cb15-10"><a href="#cb15-10"></a>    <span class="dt">boolean</span> <span class="fu">tryShowInstallDialogWhenExit</span>(<span class="bu">Context</span> context, <span class="dt">final</span> ExitInstallListener listener);</span>
<span id="cb15-11"><a href="#cb15-11"></a></span>
<span id="cb15-12"><a href="#cb15-12"></a>    <span class="co">/**</span></span>
<span id="cb15-13"><a href="#cb15-13"></a>     <span class="co">*</span> 获取穿山甲sdk版本号</span>
<span id="cb15-14"><a href="#cb15-14"></a>     <span class="co">*</span></span>
<span id="cb15-15"><a href="#cb15-15"></a>     <span class="co">* </span><span class="an">@return </span>版本号</span>
<span id="cb15-16"><a href="#cb15-16"></a>     <span class="co">*/</span></span>
<span id="cb15-17"><a href="#cb15-17"></a>    <span class="bu">String</span> <span class="fu">getSDKVersion</span>();</span>
<span id="cb15-18"><a href="#cb15-18"></a>}</span></code></pre></div>
<h3 id="构建ttadnative对象">2.2 构建TTAdNative对象</h3>
<p>TTAdNative为加载广告的接口，用于加载信息流广告、Banner广告、开屏广告、插屏广告等，并提供了加载回调监听器，建议是Activity的成员变量。</p>
<p>构建方法：</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb16-1"><a href="#cb16-1"></a>TTAdNative mTTAdNative = TTAdSdk.<span class="fu">getAdManager</span>().<span class="fu">createAdNative</span>(baseContext);<span class="co">//baseContext建议为activity</span></span></code></pre></div>
<p>TTAdNative接口说明：</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1"></a><span class="kw">public</span> <span class="kw">interface</span> TTAdNative {</span>
<span id="cb17-2"><a href="#cb17-2"></a></span>
<span id="cb17-3"><a href="#cb17-3"></a>    <span class="co">/**</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>     <span class="co">* </span><span class="an">@param adSlot </span>请求配置信息</span>
<span id="cb17-5"><a href="#cb17-5"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-6"><a href="#cb17-6"></a>     <span class="co">*</span> 异步加载Feed广告，结果会通过FeedAdListener回调</span>
<span id="cb17-7"><a href="#cb17-7"></a>     <span class="co">*/</span></span>
<span id="cb17-8"><a href="#cb17-8"></a>    <span class="dt">void</span> <span class="fu">loadFeedAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> FeedAdListener listener);</span>
<span id="cb17-9"><a href="#cb17-9"></a></span>
<span id="cb17-10"><a href="#cb17-10"></a>     <span class="co">/**</span></span>
<span id="cb17-11"><a href="#cb17-11"></a>     <span class="co">* </span><span class="an">@param adSlot </span>请求配置信息</span>
<span id="cb17-12"><a href="#cb17-12"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-13"><a href="#cb17-13"></a>     <span class="co">*</span> 异步加载原生DrawFeed广告，结果会通过DrawFeedAdListener回调</span>
<span id="cb17-14"><a href="#cb17-14"></a>     <span class="co">*/</span></span>
<span id="cb17-15"><a href="#cb17-15"></a>    <span class="dt">void</span> <span class="fu">loadDrawFeedAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> DrawFeedAdListener listener);</span>
<span id="cb17-16"><a href="#cb17-16"></a></span>
<span id="cb17-17"><a href="#cb17-17"></a>    <span class="co">/**</span></span>
<span id="cb17-18"><a href="#cb17-18"></a>     <span class="co">* </span><span class="an">@param adSlot </span>请求配置信息</span>
<span id="cb17-19"><a href="#cb17-19"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-20"><a href="#cb17-20"></a>     <span class="co">*</span> 异步加载Native广告，结果会通过NativeAdListener回调</span>
<span id="cb17-21"><a href="#cb17-21"></a>     <span class="co">*/</span></span>
<span id="cb17-22"><a href="#cb17-22"></a>    <span class="dt">void</span> <span class="fu">loadNativeAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> NativeAdListener listener);</span>
<span id="cb17-23"><a href="#cb17-23"></a></span>
<span id="cb17-24"><a href="#cb17-24"></a>    <span class="co">/**</span></span>
<span id="cb17-25"><a href="#cb17-25"></a>     <span class="co">* </span><span class="an">@param adSlot </span>请求配置信息</span>
<span id="cb17-26"><a href="#cb17-26"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-27"><a href="#cb17-27"></a>     <span class="co">*</span> 异步加载Banner广告，结果会通过BannerAdListener回调</span>
<span id="cb17-28"><a href="#cb17-28"></a>     <span class="co">*/</span></span>
<span id="cb17-29"><a href="#cb17-29"></a>    <span class="dt">void</span> <span class="fu">loadBannerAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> BannerAdListener listener);</span>
<span id="cb17-30"><a href="#cb17-30"></a></span>
<span id="cb17-31"><a href="#cb17-31"></a>    <span class="co">/**</span></span>
<span id="cb17-32"><a href="#cb17-32"></a>     <span class="co">* </span><span class="an">@param adSlot </span>  请求配置信息</span>
<span id="cb17-33"><a href="#cb17-33"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-34"><a href="#cb17-34"></a>     <span class="co">*</span> 异步加载InteractionAd广告，结果会通过InteractionAdListener回调</span>
<span id="cb17-35"><a href="#cb17-35"></a>     <span class="co">*/</span></span>
<span id="cb17-36"><a href="#cb17-36"></a>    <span class="dt">void</span> <span class="fu">loadInteractionAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> InteractionAdListener listener);</span>
<span id="cb17-37"><a href="#cb17-37"></a></span>
<span id="cb17-38"><a href="#cb17-38"></a>    <span class="co">/**</span></span>
<span id="cb17-39"><a href="#cb17-39"></a>     <span class="co">* </span><span class="an">@param adSlot </span>  请求配置信息</span>
<span id="cb17-40"><a href="#cb17-40"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-41"><a href="#cb17-41"></a>     <span class="co">*</span> <span class="an">@param timeOut </span> 加载超时时间</span>
<span id="cb17-42"><a href="#cb17-42"></a>     <span class="co">*</span> 异步加载Splash广告，结果会通过SplashAdListener回调</span>
<span id="cb17-43"><a href="#cb17-43"></a>     <span class="co">*/</span></span>
<span id="cb17-44"><a href="#cb17-44"></a>    <span class="dt">void</span> <span class="fu">loadSplashAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> SplashAdListener listener, <span class="dt">int</span> timeOut);</span>
<span id="cb17-45"><a href="#cb17-45"></a></span>
<span id="cb17-46"><a href="#cb17-46"></a>    <span class="co">/**</span></span>
<span id="cb17-47"><a href="#cb17-47"></a>     <span class="co">* </span><span class="an">@param adSlot </span>  请求配置信息</span>
<span id="cb17-48"><a href="#cb17-48"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-49"><a href="#cb17-49"></a>     <span class="co">*</span> 异步加载Splash广告，结果会通过SplashAdListener回调</span>
<span id="cb17-50"><a href="#cb17-50"></a>     <span class="co">*/</span></span>
<span id="cb17-51"><a href="#cb17-51"></a>    <span class="dt">void</span> <span class="fu">loadSplashAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> SplashAdListener listener);</span>
<span id="cb17-52"><a href="#cb17-52"></a></span>
<span id="cb17-53"><a href="#cb17-53"></a>    <span class="co">/**</span></span>
<span id="cb17-54"><a href="#cb17-54"></a>     <span class="co">*</span> 异步加载激励视频广告，结果会通过RewardVideoAdListener回调</span>
<span id="cb17-55"><a href="#cb17-55"></a>     <span class="co">* </span><span class="an">@param adSlot</span></span>
<span id="cb17-56"><a href="#cb17-56"></a>     <span class="co">*</span> <span class="an">@param listener</span></span>
<span id="cb17-57"><a href="#cb17-57"></a>     <span class="co">*/</span></span>
<span id="cb17-58"><a href="#cb17-58"></a>    <span class="dt">void</span> <span class="fu">loadRewardVideoAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> RewardVideoAdListener listener);</span>
<span id="cb17-59"><a href="#cb17-59"></a></span>
<span id="cb17-60"><a href="#cb17-60"></a>    <span class="co">/**</span></span>
<span id="cb17-61"><a href="#cb17-61"></a>     <span class="co">*</span> 异步加载全屏视频广告，结果会通过FullScreenVideoAdListener回调</span>
<span id="cb17-62"><a href="#cb17-62"></a>     <span class="co">* </span><span class="an">@param adSlot</span></span>
<span id="cb17-63"><a href="#cb17-63"></a>     <span class="co">*</span> <span class="an">@param listener</span></span>
<span id="cb17-64"><a href="#cb17-64"></a>     <span class="co">*/</span></span>
<span id="cb17-65"><a href="#cb17-65"></a>    <span class="dt">void</span> <span class="fu">loadFullScreenVideoAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> FullScreenVideoAdListener listener);</span>
<span id="cb17-66"><a href="#cb17-66"></a></span>
<span id="cb17-67"><a href="#cb17-67"></a>    <span class="co">/**</span></span>
<span id="cb17-68"><a href="#cb17-68"></a>     <span class="co">* </span><span class="an">@param adSlot </span>请求配置信息</span>
<span id="cb17-69"><a href="#cb17-69"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-70"><a href="#cb17-70"></a>     <span class="co">*</span> 异步加载个性化模板信息流广告，结果会通过NativeExpressAdListener回调</span>
<span id="cb17-71"><a href="#cb17-71"></a>     <span class="co">*/</span></span>
<span id="cb17-72"><a href="#cb17-72"></a>    <span class="dt">void</span> <span class="fu">loadNativeExpressAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> NativeExpressAdListener listener);</span>
<span id="cb17-73"><a href="#cb17-73"></a>    </span>
<span id="cb17-74"><a href="#cb17-74"></a>    <span class="co">/**</span></span>
<span id="cb17-75"><a href="#cb17-75"></a>     <span class="co">* </span><span class="an">@param adSlot </span>请求配置信息</span>
<span id="cb17-76"><a href="#cb17-76"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-77"><a href="#cb17-77"></a>     <span class="co">*</span> 异步加载个性化模板draw视频广告，结果会通过NativeExpressAdListener回调</span>
<span id="cb17-78"><a href="#cb17-78"></a>     <span class="co">*/</span></span>
<span id="cb17-79"><a href="#cb17-79"></a>    <span class="dt">void</span> <span class="fu">loadExpressDrawFeedAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> NativeExpressAdListener listener);</span>
<span id="cb17-80"><a href="#cb17-80"></a>    </span>
<span id="cb17-81"><a href="#cb17-81"></a>    <span class="co">/**</span></span>
<span id="cb17-82"><a href="#cb17-82"></a>     <span class="co">* </span><span class="an">@param adSlot </span>请求配置信息</span>
<span id="cb17-83"><a href="#cb17-83"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-84"><a href="#cb17-84"></a>     <span class="co">*</span> 异步加载个性化模板Banner广告，结果会通过NativeExpressAdListener回调</span>
<span id="cb17-85"><a href="#cb17-85"></a>     <span class="co">*/</span></span>
<span id="cb17-86"><a href="#cb17-86"></a>     <span class="dt">void</span> <span class="fu">loadBannerExpressAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> NativeExpressAdListener listener);</span>
<span id="cb17-87"><a href="#cb17-87"></a>    </span>
<span id="cb17-88"><a href="#cb17-88"></a>    <span class="co">/**</span></span>
<span id="cb17-89"><a href="#cb17-89"></a>     <span class="co">* </span><span class="an">@param adSlot </span>请求配置信息</span>
<span id="cb17-90"><a href="#cb17-90"></a>     <span class="co">*</span> <span class="an">@param listener </span>加载结果回调</span>
<span id="cb17-91"><a href="#cb17-91"></a>     <span class="co">*</span> 异步加载个性化模板插屏广告，结果会通过NativeExpressAdListener回调</span>
<span id="cb17-92"><a href="#cb17-92"></a>     <span class="co">*/</span></span>
<span id="cb17-93"><a href="#cb17-93"></a>     <span class="dt">void</span> <span class="fu">loadInteractionExpressAd</span>(AdSlot adSlot, <span class="at">@NonNull</span> NativeExpressAdListener listener);</span>
<span id="cb17-94"><a href="#cb17-94"></a></span>
<span id="cb17-95"><a href="#cb17-95"></a>    <span class="co">/**</span></span>
<span id="cb17-96"><a href="#cb17-96"></a>     <span class="co">*</span> 信息流广告加载监听器</span>
<span id="cb17-97"><a href="#cb17-97"></a>     <span class="co">*/</span></span>
<span id="cb17-98"><a href="#cb17-98"></a>    <span class="kw">interface</span> FeedAdListener {</span>
<span id="cb17-99"><a href="#cb17-99"></a></span>
<span id="cb17-100"><a href="#cb17-100"></a>        <span class="co">/**</span></span>
<span id="cb17-101"><a href="#cb17-101"></a>         <span class="co">*</span> 加载失败的回调</span>
<span id="cb17-102"><a href="#cb17-102"></a>         <span class="co">*</span></span>
<span id="cb17-103"><a href="#cb17-103"></a>         <span class="co">* </span><span class="an">@param code</span></span>
<span id="cb17-104"><a href="#cb17-104"></a>         <span class="co">*</span> <span class="an">@param message</span></span>
<span id="cb17-105"><a href="#cb17-105"></a>         <span class="co">*/</span></span>
<span id="cb17-106"><a href="#cb17-106"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-107"><a href="#cb17-107"></a>        <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message);</span>
<span id="cb17-108"><a href="#cb17-108"></a></span>
<span id="cb17-109"><a href="#cb17-109"></a>        <span class="co">/**</span></span>
<span id="cb17-110"><a href="#cb17-110"></a>         <span class="co">*</span> 广告加载成功的回调，接入方可以在这个回调中进行渲染</span>
<span id="cb17-111"><a href="#cb17-111"></a>         <span class="co">*</span></span>
<span id="cb17-112"><a href="#cb17-112"></a>         <span class="co">* </span><span class="an">@param ads </span>返回的广告列表</span>
<span id="cb17-113"><a href="#cb17-113"></a>         <span class="co">*/</span></span>
<span id="cb17-114"><a href="#cb17-114"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-115"><a href="#cb17-115"></a>        <span class="dt">void</span> <span class="fu">onFeedAdLoad</span>(<span class="bu">List</span>&lt;TTFeedAd&gt; ads);</span>
<span id="cb17-116"><a href="#cb17-116"></a></span>
<span id="cb17-117"><a href="#cb17-117"></a>    }</span>
<span id="cb17-118"><a href="#cb17-118"></a></span>
<span id="cb17-119"><a href="#cb17-119"></a>    <span class="co">/**</span></span>
<span id="cb17-120"><a href="#cb17-120"></a>     <span class="co">*</span> 原生广告加载监听器</span>
<span id="cb17-121"><a href="#cb17-121"></a>     <span class="co">*/</span></span>
<span id="cb17-122"><a href="#cb17-122"></a>    <span class="kw">interface</span> NativeAdListener {</span>
<span id="cb17-123"><a href="#cb17-123"></a></span>
<span id="cb17-124"><a href="#cb17-124"></a>        <span class="co">/**</span></span>
<span id="cb17-125"><a href="#cb17-125"></a>         <span class="co">*</span> 加载失败的回调</span>
<span id="cb17-126"><a href="#cb17-126"></a>         <span class="co">*</span></span>
<span id="cb17-127"><a href="#cb17-127"></a>         <span class="co">* </span><span class="an">@param code</span></span>
<span id="cb17-128"><a href="#cb17-128"></a>         <span class="co">*</span> <span class="an">@param message</span></span>
<span id="cb17-129"><a href="#cb17-129"></a>         <span class="co">*/</span></span>
<span id="cb17-130"><a href="#cb17-130"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-131"><a href="#cb17-131"></a>        <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message);</span>
<span id="cb17-132"><a href="#cb17-132"></a></span>
<span id="cb17-133"><a href="#cb17-133"></a>        <span class="co">/**</span></span>
<span id="cb17-134"><a href="#cb17-134"></a>         <span class="co">*</span> 广告加载成功的回调，接入方可以在这个回调中进行渲染</span>
<span id="cb17-135"><a href="#cb17-135"></a>         <span class="co">*</span></span>
<span id="cb17-136"><a href="#cb17-136"></a>         <span class="co">* </span><span class="an">@param ads </span>返回的广告列表</span>
<span id="cb17-137"><a href="#cb17-137"></a>         <span class="co">*/</span></span>
<span id="cb17-138"><a href="#cb17-138"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-139"><a href="#cb17-139"></a>        <span class="dt">void</span> <span class="fu">onNativeAdLoad</span>(<span class="bu">List</span>&lt;TTNativeAd&gt; ads);</span>
<span id="cb17-140"><a href="#cb17-140"></a></span>
<span id="cb17-141"><a href="#cb17-141"></a>    }</span>
<span id="cb17-142"><a href="#cb17-142"></a></span>
<span id="cb17-143"><a href="#cb17-143"></a>    <span class="co">/**</span></span>
<span id="cb17-144"><a href="#cb17-144"></a>     <span class="co">*</span> Banner广告加载监听器</span>
<span id="cb17-145"><a href="#cb17-145"></a>     <span class="co">*/</span></span>
<span id="cb17-146"><a href="#cb17-146"></a>    <span class="kw">interface</span> BannerAdListener {</span>
<span id="cb17-147"><a href="#cb17-147"></a></span>
<span id="cb17-148"><a href="#cb17-148"></a>        <span class="co">/**</span></span>
<span id="cb17-149"><a href="#cb17-149"></a>         <span class="co">*</span> 加载失败的回调</span>
<span id="cb17-150"><a href="#cb17-150"></a>         <span class="co">*</span></span>
<span id="cb17-151"><a href="#cb17-151"></a>         <span class="co">* </span><span class="an">@param code</span></span>
<span id="cb17-152"><a href="#cb17-152"></a>         <span class="co">*</span> <span class="an">@param message</span></span>
<span id="cb17-153"><a href="#cb17-153"></a>         <span class="co">*/</span></span>
<span id="cb17-154"><a href="#cb17-154"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-155"><a href="#cb17-155"></a>        <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message);</span>
<span id="cb17-156"><a href="#cb17-156"></a></span>
<span id="cb17-157"><a href="#cb17-157"></a>        <span class="co">/**</span></span>
<span id="cb17-158"><a href="#cb17-158"></a>         <span class="co">*</span> 广告加载完成的回调，接入方可以在这个回调中进行渲染</span>
<span id="cb17-159"><a href="#cb17-159"></a>         <span class="co">*</span></span>
<span id="cb17-160"><a href="#cb17-160"></a>         <span class="co">* </span><span class="an">@param ad</span></span>
<span id="cb17-161"><a href="#cb17-161"></a>         <span class="co">*/</span></span>
<span id="cb17-162"><a href="#cb17-162"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-163"><a href="#cb17-163"></a>        <span class="dt">void</span> <span class="fu">onBannerAdLoad</span>(TTBannerAd ad);</span>
<span id="cb17-164"><a href="#cb17-164"></a></span>
<span id="cb17-165"><a href="#cb17-165"></a>    }</span>
<span id="cb17-166"><a href="#cb17-166"></a></span>
<span id="cb17-167"><a href="#cb17-167"></a>    <span class="co">/**</span></span>
<span id="cb17-168"><a href="#cb17-168"></a>     <span class="co">*</span> 插屏广告加载监听器</span>
<span id="cb17-169"><a href="#cb17-169"></a>     <span class="co">*/</span></span>
<span id="cb17-170"><a href="#cb17-170"></a>    <span class="kw">interface</span> InteractionAdListener {</span>
<span id="cb17-171"><a href="#cb17-171"></a>        <span class="co">/**</span></span>
<span id="cb17-172"><a href="#cb17-172"></a>         <span class="co">*</span> 加载失败回调</span>
<span id="cb17-173"><a href="#cb17-173"></a>         <span class="co">* </span><span class="an">@param code</span></span>
<span id="cb17-174"><a href="#cb17-174"></a>         <span class="co">*</span> <span class="an">@param message</span></span>
<span id="cb17-175"><a href="#cb17-175"></a>         <span class="co">*/</span></span>
<span id="cb17-176"><a href="#cb17-176"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-177"><a href="#cb17-177"></a>        <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code,<span class="bu">String</span> message);</span>
<span id="cb17-178"><a href="#cb17-178"></a></span>
<span id="cb17-179"><a href="#cb17-179"></a>        <span class="co">/**</span></span>
<span id="cb17-180"><a href="#cb17-180"></a>         <span class="co">*</span> 广告加载成功回调</span>
<span id="cb17-181"><a href="#cb17-181"></a>         <span class="co">*</span></span>
<span id="cb17-182"><a href="#cb17-182"></a>         <span class="co">*/</span></span>
<span id="cb17-183"><a href="#cb17-183"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-184"><a href="#cb17-184"></a>        <span class="dt">void</span> <span class="fu">onInteractionAdLoad</span>(TTInteractionAd ad);</span>
<span id="cb17-185"><a href="#cb17-185"></a>    }</span>
<span id="cb17-186"><a href="#cb17-186"></a></span>
<span id="cb17-187"><a href="#cb17-187"></a>    <span class="co">/**</span></span>
<span id="cb17-188"><a href="#cb17-188"></a>     <span class="co">*</span> 开屏广告加载监听器</span>
<span id="cb17-189"><a href="#cb17-189"></a>     <span class="co">*/</span></span>
<span id="cb17-190"><a href="#cb17-190"></a>    <span class="kw">interface</span> SplashAdListener {</span>
<span id="cb17-191"><a href="#cb17-191"></a>        <span class="co">/**</span></span>
<span id="cb17-192"><a href="#cb17-192"></a>         <span class="co">*</span> 加载失败回调</span>
<span id="cb17-193"><a href="#cb17-193"></a>         <span class="co">*</span></span>
<span id="cb17-194"><a href="#cb17-194"></a>         <span class="co">* </span><span class="an">@param code</span></span>
<span id="cb17-195"><a href="#cb17-195"></a>         <span class="co">*</span> <span class="an">@param message</span></span>
<span id="cb17-196"><a href="#cb17-196"></a>         <span class="co">*/</span></span>
<span id="cb17-197"><a href="#cb17-197"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-198"><a href="#cb17-198"></a>        <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message);</span>
<span id="cb17-199"><a href="#cb17-199"></a></span>
<span id="cb17-200"><a href="#cb17-200"></a>        <span class="co">/**</span></span>
<span id="cb17-201"><a href="#cb17-201"></a>         <span class="co">*</span> 开屏广告加载超时回调</span>
<span id="cb17-202"><a href="#cb17-202"></a>         <span class="co">*/</span></span>
<span id="cb17-203"><a href="#cb17-203"></a>        <span class="dt">void</span> <span class="fu">onTimeout</span>();</span>
<span id="cb17-204"><a href="#cb17-204"></a></span>
<span id="cb17-205"><a href="#cb17-205"></a>        <span class="co">/**</span></span>
<span id="cb17-206"><a href="#cb17-206"></a>         <span class="co">*</span> 广告加载完成的回调，接入方可以在这个回调中进行渲染</span>
<span id="cb17-207"><a href="#cb17-207"></a>         <span class="co">*</span></span>
<span id="cb17-208"><a href="#cb17-208"></a>         <span class="co">* </span><span class="an">@param ad </span>开屏广告接口</span>
<span id="cb17-209"><a href="#cb17-209"></a>         <span class="co">*/</span></span>
<span id="cb17-210"><a href="#cb17-210"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-211"><a href="#cb17-211"></a>        <span class="dt">void</span> <span class="fu">onSplashAdLoad</span>(TTSplashAd ad);</span>
<span id="cb17-212"><a href="#cb17-212"></a>    }</span>
<span id="cb17-213"><a href="#cb17-213"></a></span>
<span id="cb17-214"><a href="#cb17-214"></a>    <span class="co">/**</span></span>
<span id="cb17-215"><a href="#cb17-215"></a>     <span class="co">*</span> 激励视频广告加载监听器</span>
<span id="cb17-216"><a href="#cb17-216"></a>     <span class="co">*/</span></span>
<span id="cb17-217"><a href="#cb17-217"></a>    <span class="kw">interface</span> RewardVideoAdListener {</span>
<span id="cb17-218"><a href="#cb17-218"></a>        <span class="co">/**</span></span>
<span id="cb17-219"><a href="#cb17-219"></a>         <span class="co">*</span> 加载失败回调</span>
<span id="cb17-220"><a href="#cb17-220"></a>         <span class="co">*</span></span>
<span id="cb17-221"><a href="#cb17-221"></a>         <span class="co">* </span><span class="an">@param code</span></span>
<span id="cb17-222"><a href="#cb17-222"></a>         <span class="co">*</span> <span class="an">@param message</span></span>
<span id="cb17-223"><a href="#cb17-223"></a>         <span class="co">*/</span></span>
<span id="cb17-224"><a href="#cb17-224"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-225"><a href="#cb17-225"></a>        <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message);</span>
<span id="cb17-226"><a href="#cb17-226"></a></span>
<span id="cb17-227"><a href="#cb17-227"></a>        <span class="co">/**</span></span>
<span id="cb17-228"><a href="#cb17-228"></a>         <span class="co">*</span> 广告加载完成的回调，接入方可以在这个回调中进行渲染</span>
<span id="cb17-229"><a href="#cb17-229"></a>         <span class="co">*</span></span>
<span id="cb17-230"><a href="#cb17-230"></a>         <span class="co">* </span><span class="an">@param ad </span>激励视频广告接口</span>
<span id="cb17-231"><a href="#cb17-231"></a>         <span class="co">*/</span></span>
<span id="cb17-232"><a href="#cb17-232"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-233"><a href="#cb17-233"></a>        <span class="dt">void</span> <span class="fu">onRewardVideoAdLoad</span>(TTRewardVideoAd ad);</span>
<span id="cb17-234"><a href="#cb17-234"></a></span>
<span id="cb17-235"><a href="#cb17-235"></a>        <span class="co">/**</span></span>
<span id="cb17-236"><a href="#cb17-236"></a>         <span class="co">*</span> 广告视频本地加载完成的回调，接入方可以在这个回调后直接播放本地视频</span>
<span id="cb17-237"><a href="#cb17-237"></a>         <span class="co">*/</span></span>
<span id="cb17-238"><a href="#cb17-238"></a>        <span class="dt">void</span> <span class="fu">onRewardVideoCached</span>();</span>
<span id="cb17-239"><a href="#cb17-239"></a>    }</span>
<span id="cb17-240"><a href="#cb17-240"></a></span>
<span id="cb17-241"><a href="#cb17-241"></a>    <span class="co">/**</span></span>
<span id="cb17-242"><a href="#cb17-242"></a>     <span class="co">*</span> 全屏视频广告加载监听器</span>
<span id="cb17-243"><a href="#cb17-243"></a>     <span class="co">*/</span></span>
<span id="cb17-244"><a href="#cb17-244"></a>    <span class="kw">interface</span> FullScreenVideoAdListener {</span>
<span id="cb17-245"><a href="#cb17-245"></a>        <span class="co">/**</span></span>
<span id="cb17-246"><a href="#cb17-246"></a>         <span class="co">*</span> 加载失败回调</span>
<span id="cb17-247"><a href="#cb17-247"></a>         <span class="co">*</span></span>
<span id="cb17-248"><a href="#cb17-248"></a>         <span class="co">* </span><span class="an">@param code</span></span>
<span id="cb17-249"><a href="#cb17-249"></a>         <span class="co">*</span> <span class="an">@param message</span></span>
<span id="cb17-250"><a href="#cb17-250"></a>         <span class="co">*/</span></span>
<span id="cb17-251"><a href="#cb17-251"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-252"><a href="#cb17-252"></a>        <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message);</span>
<span id="cb17-253"><a href="#cb17-253"></a></span>
<span id="cb17-254"><a href="#cb17-254"></a>        <span class="co">/**</span></span>
<span id="cb17-255"><a href="#cb17-255"></a>         <span class="co">*</span> 广告加载完成的回调，接入方可以在这个回调中进行渲染</span>
<span id="cb17-256"><a href="#cb17-256"></a>         <span class="co">*</span></span>
<span id="cb17-257"><a href="#cb17-257"></a>         <span class="co">* </span><span class="an">@param ad </span>全屏视频广告接口</span>
<span id="cb17-258"><a href="#cb17-258"></a>         <span class="co">*/</span></span>
<span id="cb17-259"><a href="#cb17-259"></a>        <span class="at">@MainThread</span></span>
<span id="cb17-260"><a href="#cb17-260"></a>        <span class="dt">void</span> <span class="fu">onFullScreenVideoAdLoad</span>(TTFullScreenVideoAd ad);</span>
<span id="cb17-261"><a href="#cb17-261"></a></span>
<span id="cb17-262"><a href="#cb17-262"></a>        <span class="co">/**</span></span>
<span id="cb17-263"><a href="#cb17-263"></a>         <span class="co">*</span> 广告视频本地加载完成的回调，接入方可以在这个回调后直接播放本地视频</span>
<span id="cb17-264"><a href="#cb17-264"></a>         <span class="co">*/</span></span>
<span id="cb17-265"><a href="#cb17-265"></a>        <span class="dt">void</span> <span class="fu">onFullScreenVideoCached</span>();</span>
<span id="cb17-266"><a href="#cb17-266"></a>    }</span>
<span id="cb17-267"><a href="#cb17-267"></a></span>
<span id="cb17-268"><a href="#cb17-268"></a>    <span class="co">/**</span></span>
<span id="cb17-269"><a href="#cb17-269"></a>     <span class="co">*</span> 个性化模板广告加载监听器</span>
<span id="cb17-270"><a href="#cb17-270"></a>     <span class="co">*/</span></span>
<span id="cb17-271"><a href="#cb17-271"></a>     <span class="kw">interface</span> NativeExpressAdListener {</span>
<span id="cb17-272"><a href="#cb17-272"></a></span>
<span id="cb17-273"><a href="#cb17-273"></a>         <span class="co">/**</span></span>
<span id="cb17-274"><a href="#cb17-274"></a>          <span class="co">*</span> 加载失败的回调</span>
<span id="cb17-275"><a href="#cb17-275"></a>          <span class="co">*</span></span>
<span id="cb17-276"><a href="#cb17-276"></a>          <span class="co">* </span><span class="an">@param code</span></span>
<span id="cb17-277"><a href="#cb17-277"></a>          <span class="co">*</span> <span class="an">@param message</span></span>
<span id="cb17-278"><a href="#cb17-278"></a>          <span class="co">*/</span></span>
<span id="cb17-279"><a href="#cb17-279"></a>         <span class="at">@MainThread</span></span>
<span id="cb17-280"><a href="#cb17-280"></a>         <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message);</span>
<span id="cb17-281"><a href="#cb17-281"></a></span>
<span id="cb17-282"><a href="#cb17-282"></a>         <span class="co">/**</span></span>
<span id="cb17-283"><a href="#cb17-283"></a>          <span class="co">*</span> 广告加载成功的回调，接入方可以在这个回调中进行渲染</span>
<span id="cb17-284"><a href="#cb17-284"></a>          <span class="co">*</span></span>
<span id="cb17-285"><a href="#cb17-285"></a>          <span class="co">* </span><span class="an">@param ads </span>返回的广告列表</span>
<span id="cb17-286"><a href="#cb17-286"></a>          <span class="co">*/</span></span>
<span id="cb17-287"><a href="#cb17-287"></a>         <span class="at">@MainThread</span></span>
<span id="cb17-288"><a href="#cb17-288"></a>         <span class="dt">void</span> <span class="fu">onNativeExpressAdLoad</span>(<span class="bu">List</span>&lt;TTNativeExpressAd&gt; ads);</span>
<span id="cb17-289"><a href="#cb17-289"></a></span>
<span id="cb17-290"><a href="#cb17-290"></a>     }</span>
<span id="cb17-291"><a href="#cb17-291"></a>}</span></code></pre></div>
<h3 id="构建adslot对象">2.3 构建AdSlot对象</h3>
<p>AdSlot对象为加载广告时需要设置的广告信息，在TTAdNative加载广告时使用。</p>
<p>构建方法：</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb18-1"><a href="#cb18-1"></a>AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb18-2"><a href="#cb18-2"></a>    <span class="co">// 必选参数 设置您的CodeId</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>    .<span class="fu">setCodeId</span>(“<span class="dv">900486272</span><span class="st">&quot;)</span></span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="co">// 必选参数 设置广告图片的最大尺寸及期望的图片宽高比，单位Px</span></span>
<span id="cb18-5"><a href="#cb18-5"></a>    <span class="co">// 注：必填字段，期望的图片尺寸，返回尺寸可能有差异</span></span>
<span id="cb18-6"><a href="#cb18-6"></a>    .<span class="fu">setImageAcceptedSize</span>(<span class="dv">640</span>, <span class="dv">320</span>)</span>
<span id="cb18-7"><a href="#cb18-7"></a>    <span class="co">//模板广告需要设置期望个性化模板广告的大小,单位dp,代码位是否属于个性化模板广告，请在穿山甲平台查看</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>    .<span class="fu">setExpressViewAcceptedSize</span>(expressViewWidth, expressViewHeight)</span>
<span id="cb18-9"><a href="#cb18-9"></a>    <span class="co">// 可选参数，针对信息流广告设置每次请求的广告返回个数，最多支持3个</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>    .<span class="fu">setAdCount</span>(<span class="dv">2</span>)</span>
<span id="cb18-11"><a href="#cb18-11"></a>    <span class="co">//请求原生广告时候需要设置，参数为TYPE_BANNER或TYPE_INTERACTION_AD</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>    .<span class="fu">setNativeAdType</span>(AdSlot.<span class="fu">TYPE_BANNER</span>)</span>
<span id="cb18-13"><a href="#cb18-13"></a>    <span class="co">//非必传参数，仅奖励发放服务端回调时需要使用</span></span>
<span id="cb18-14"><a href="#cb18-14"></a>    .<span class="fu">setUserID</span>(<span class="st">&quot;user123&quot;</span>)</span>
<span id="cb18-15"><a href="#cb18-15"></a>    <span class="co">//非必传参数，仅奖励发放服务端回调时需要使用</span></span>
<span id="cb18-16"><a href="#cb18-16"></a>    .<span class="fu">setMediaExtra</span>(<span class="st">&quot;media_extra&quot;</span>)</span>
<span id="cb18-17"><a href="#cb18-17"></a>    .<span class="fu">build</span>();</span></code></pre></div>
<h3 id="接入原生信息流广告ttfeedad">2.4 接入原生信息流广告（TTFeedAd）</h3>
<p>SDK为接入方提供了可自定义布局的信息流广告，包含大图、小图、组图和视频四种基本样式类型（具体的布局摆放可自行定义），及电话拨打、应用下载、跳转到落地页、跳转到浏览器四种交互类型。目前穿山甲信息流广告大图的尺寸为（16：9）、小图尺寸为（3：2）、组图3张为（3：2）、视频为（16:9）,标题和描述长度为6-26个字符。</p>
<h4 id="ttfeedad接口说明">2.4.1 TTFeedAd接口说明</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb19-1"><a href="#cb19-1"></a><span class="kw">public</span> <span class="kw">interface</span> TTFeedAd {</span>
<span id="cb19-2"><a href="#cb19-2"></a></span>
<span id="cb19-3"><a href="#cb19-3"></a>    <span class="co">/**</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>     <span class="co">*</span> 获取穿山甲穿山甲logo，图片大小：8<span class="co">0*80</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>     <span class="co">*</span></span>
<span id="cb19-6"><a href="#cb19-6"></a>     <span class="co">* </span><span class="an">@return </span>bitmap对象</span>
<span id="cb19-7"><a href="#cb19-7"></a>     <span class="co">*/</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>    Bitmap <span class="fu">getAdLogo</span>();</span>
<span id="cb19-9"><a href="#cb19-9"></a></span>
<span id="cb19-10"><a href="#cb19-10"></a>    <span class="co">/**</span></span>
<span id="cb19-11"><a href="#cb19-11"></a>     <span class="co">*</span> 广告标题</span>
<span id="cb19-12"><a href="#cb19-12"></a>     <span class="co">*</span></span>
<span id="cb19-13"><a href="#cb19-13"></a>     <span class="co">* @</span>return</span>
<span id="cb19-14"><a href="#cb19-14"></a>     <span class="co">*/</span></span>
<span id="cb19-15"><a href="#cb19-15"></a>    <span class="bu">String</span> <span class="fu">getTitle</span>();</span>
<span id="cb19-16"><a href="#cb19-16"></a></span>
<span id="cb19-17"><a href="#cb19-17"></a>    <span class="co">/**</span></span>
<span id="cb19-18"><a href="#cb19-18"></a>     <span class="co">*</span> 广告描述</span>
<span id="cb19-19"><a href="#cb19-19"></a>     <span class="co">*</span></span>
<span id="cb19-20"><a href="#cb19-20"></a>     <span class="co">* @</span>return</span>
<span id="cb19-21"><a href="#cb19-21"></a>     <span class="co">*/</span></span>
<span id="cb19-22"><a href="#cb19-22"></a>    <span class="bu">String</span> <span class="fu">getDescription</span>();</span>
<span id="cb19-23"><a href="#cb19-23"></a></span>
<span id="cb19-24"><a href="#cb19-24"></a>    <span class="co">/**</span></span>
<span id="cb19-25"><a href="#cb19-25"></a>     <span class="co">*</span> 广告来源</span>
<span id="cb19-26"><a href="#cb19-26"></a>     <span class="co">*</span></span>
<span id="cb19-27"><a href="#cb19-27"></a>     <span class="co">* @</span>return</span>
<span id="cb19-28"><a href="#cb19-28"></a>     <span class="co">*/</span></span>
<span id="cb19-29"><a href="#cb19-29"></a>    <span class="bu">String</span> <span class="fu">getSource</span>();</span>
<span id="cb19-30"><a href="#cb19-30"></a></span>
<span id="cb19-31"><a href="#cb19-31"></a>    <span class="co">/**</span></span>
<span id="cb19-32"><a href="#cb19-32"></a>     <span class="co">*</span> 广告图标Image</span>
<span id="cb19-33"><a href="#cb19-33"></a>     <span class="co">*</span></span>
<span id="cb19-34"><a href="#cb19-34"></a>     <span class="co">* @</span>return</span>
<span id="cb19-35"><a href="#cb19-35"></a>     <span class="co">*/</span></span>
<span id="cb19-36"><a href="#cb19-36"></a>    TTImage <span class="fu">getIcon</span>();</span>
<span id="cb19-37"><a href="#cb19-37"></a></span>
<span id="cb19-38"><a href="#cb19-38"></a>    <span class="co">/**</span></span>
<span id="cb19-39"><a href="#cb19-39"></a>     <span class="co">*</span> 广告图片Image list</span>
<span id="cb19-40"><a href="#cb19-40"></a>     <span class="co">*</span></span>
<span id="cb19-41"><a href="#cb19-41"></a>     <span class="co">* @</span>return</span>
<span id="cb19-42"><a href="#cb19-42"></a>     <span class="co">*/</span></span>
<span id="cb19-43"><a href="#cb19-43"></a>    <span class="bu">List</span>&lt;TTImage&gt; <span class="fu">getImageList</span>();</span>
<span id="cb19-44"><a href="#cb19-44"></a></span>
<span id="cb19-45"><a href="#cb19-45"></a>    <span class="co">/**</span></span>
<span id="cb19-46"><a href="#cb19-46"></a>     <span class="co">*</span> 得到Feed广告交互类型</span>
<span id="cb19-47"><a href="#cb19-47"></a>     <span class="co">*</span></span>
<span id="cb19-48"><a href="#cb19-48"></a>     <span class="co">* </span><span class="an">@return </span><span class="co">2:</span>在浏览器打开网页，3<span class="co">:</span>在app中打开，<span class="co">4:</span>下载应用，5<span class="co">:</span>拨打电话 其它：未知类型</span>
<span id="cb19-49"><a href="#cb19-49"></a>     <span class="co">*/</span></span>
<span id="cb19-50"><a href="#cb19-50"></a>    <span class="dt">int</span> <span class="fu">getInteractionType</span>();</span>
<span id="cb19-51"><a href="#cb19-51"></a></span>
<span id="cb19-52"><a href="#cb19-52"></a></span>
<span id="cb19-53"><a href="#cb19-53"></a>    <span class="co">/**</span></span>
<span id="cb19-54"><a href="#cb19-54"></a>     <span class="co">*</span> 得到Feed广告图片模式</span>
<span id="cb19-55"><a href="#cb19-55"></a>     <span class="co">*</span></span>
<span id="cb19-56"><a href="#cb19-56"></a>     <span class="co">* </span><span class="an">@return </span><span class="co">3</span> 大图 <span class="co">2小图</span> <span class="co">4</span> 组图 <span class="co">5</span> 视频 其它：未知类型</span>
<span id="cb19-57"><a href="#cb19-57"></a>     <span class="co">*/</span></span>
<span id="cb19-58"><a href="#cb19-58"></a>    <span class="dt">int</span> <span class="fu">getImageMode</span>();</span>
<span id="cb19-59"><a href="#cb19-59"></a></span>
<span id="cb19-60"><a href="#cb19-60"></a>    <span class="co">/**</span></span>
<span id="cb19-61"><a href="#cb19-61"></a>     <span class="co">*</span> 得到dislike dialog</span>
<span id="cb19-62"><a href="#cb19-62"></a>     <span class="co">*</span></span>
<span id="cb19-63"><a href="#cb19-63"></a>     <span class="co">* </span><span class="an">@param activity </span>建议传当前activity，否则可能会影响dislike对话框弹出</span>
<span id="cb19-64"><a href="#cb19-64"></a>     <span class="co">*</span> <span class="co">@</span>return</span>
<span id="cb19-65"><a href="#cb19-65"></a>     <span class="co">*/</span></span>
<span id="cb19-66"><a href="#cb19-66"></a>    TTAdDislike <span class="fu">getDislikeDialog</span>(Activity activity);</span>
<span id="cb19-67"><a href="#cb19-67"></a></span>
<span id="cb19-68"><a href="#cb19-68"></a>    <span class="co">/**</span></span>
<span id="cb19-69"><a href="#cb19-69"></a>     <span class="co">*</span> 自定义dislike dialog</span>
<span id="cb19-70"><a href="#cb19-70"></a>     <span class="co">*</span></span>
<span id="cb19-71"><a href="#cb19-71"></a>     <span class="co">* </span><span class="an">@param dialog </span>自定义dialog，需要由外部传入</span>
<span id="cb19-72"><a href="#cb19-72"></a>     <span class="co">*</span> <span class="co">@</span>return</span>
<span id="cb19-73"><a href="#cb19-73"></a>     <span class="co">*/</span></span>
<span id="cb19-74"><a href="#cb19-74"></a>    TTAdDislike <span class="fu">getDislikeDialog</span>(TTDislikeDialogAbstract dialog);</span>
<span id="cb19-75"><a href="#cb19-75"></a></span>
<span id="cb19-76"><a href="#cb19-76"></a>    <span class="co">/**</span></span>
<span id="cb19-77"><a href="#cb19-77"></a>     <span class="co">*</span> 获取下载状态控制器</span>
<span id="cb19-78"><a href="#cb19-78"></a>     <span class="co">*/</span></span>
<span id="cb19-79"><a href="#cb19-79"></a>    DownloadStatusController <span class="fu">getDownloadStatusController</span>();</span>
<span id="cb19-80"><a href="#cb19-80"></a></span>
<span id="cb19-81"><a href="#cb19-81"></a>    <span class="co">/**</span></span>
<span id="cb19-82"><a href="#cb19-82"></a>     <span class="co">*</span> 注册可点击的View，click<span class="co">/</span>show会在内部完成</span>
<span id="cb19-83"><a href="#cb19-83"></a>     <span class="co">*</span></span>
<span id="cb19-84"><a href="#cb19-84"></a>     <span class="co">* </span><span class="an">@param container </span>渲染广告最外层的ViewGroup</span>
<span id="cb19-85"><a href="#cb19-85"></a>     <span class="co">*</span> <span class="an">@param clickView </span>可点击的View</span>
<span id="cb19-86"><a href="#cb19-86"></a>     <span class="co">*/</span></span>
<span id="cb19-87"><a href="#cb19-87"></a>    <span class="dt">void</span> <span class="fu">registerViewForInteraction</span>(<span class="at">@NonNull</span> ViewGroup container, <span class="at">@NonNull</span> <span class="bu">View</span> clickView, AdInteractionListener listener);</span>
<span id="cb19-88"><a href="#cb19-88"></a></span>
<span id="cb19-89"><a href="#cb19-89"></a>    <span class="co">/**</span></span>
<span id="cb19-90"><a href="#cb19-90"></a>     <span class="co">*</span> 注册可点击的View，click<span class="co">/</span>show会在内部完成</span>
<span id="cb19-91"><a href="#cb19-91"></a>     <span class="co">*</span></span>
<span id="cb19-92"><a href="#cb19-92"></a>     <span class="co">* </span><span class="an">@param container </span>    渲染广告最外层的ViewGroup</span>
<span id="cb19-93"><a href="#cb19-93"></a>     <span class="co">*</span> <span class="an">@param clickViews </span>   可点击的View的列表</span>
<span id="cb19-94"><a href="#cb19-94"></a>     <span class="co">*</span> <span class="an">@param creativeViews </span>用于下载或者拨打电话的View</span>
<span id="cb19-95"><a href="#cb19-95"></a>     <span class="co">*/</span></span>
<span id="cb19-96"><a href="#cb19-96"></a>    <span class="dt">void</span> <span class="fu">registerViewForInteraction</span>(<span class="at">@NonNull</span> ViewGroup container, <span class="at">@NonNull</span> <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; clickViews, <span class="at">@Nullable</span> <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; creativeViews, AdInteractionListener listener);</span>
<span id="cb19-97"><a href="#cb19-97"></a></span>
<span id="cb19-98"><a href="#cb19-98"></a>    <span class="co">/**</span></span>
<span id="cb19-99"><a href="#cb19-99"></a>     <span class="co">*</span> 注册可点击的View，click<span class="co">/</span>show会在内部完成，注册dislike按钮</span>
<span id="cb19-100"><a href="#cb19-100"></a>     <span class="co">*</span></span>
<span id="cb19-101"><a href="#cb19-101"></a>     <span class="co">* </span><span class="an">@param container </span>    渲染广告最外层的ViewGroup</span>
<span id="cb19-102"><a href="#cb19-102"></a>     <span class="co">*</span> <span class="an">@param clickViews </span>   可点击的View的列表</span>
<span id="cb19-103"><a href="#cb19-103"></a>     <span class="co">*</span> <span class="an">@param creativeViews </span>用于下载或者拨打电话的View</span>
<span id="cb19-104"><a href="#cb19-104"></a>     <span class="co">*</span> <span class="an">@param dislikeView </span>  dislike按钮</span>
<span id="cb19-105"><a href="#cb19-105"></a>     <span class="co">*</span> <span class="an">@param listener </span>     点击回调</span>
<span id="cb19-106"><a href="#cb19-106"></a>     <span class="co">*/</span></span>
<span id="cb19-107"><a href="#cb19-107"></a>    <span class="dt">void</span> <span class="fu">registerViewForInteraction</span>(<span class="at">@NonNull</span> ViewGroup container, <span class="at">@NonNull</span> <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; clickViews, <span class="at">@Nullable</span> <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; creativeViews, <span class="at">@Nullable</span> <span class="bu">View</span> dislikeView, AdInteractionListener listener);</span>
<span id="cb19-108"><a href="#cb19-108"></a></span>
<span id="cb19-109"><a href="#cb19-109"></a>    <span class="co">/**</span></span>
<span id="cb19-110"><a href="#cb19-110"></a>     <span class="co">*</span> 设置下载监听器</span>
<span id="cb19-111"><a href="#cb19-111"></a>     <span class="co">*/</span></span>
<span id="cb19-112"><a href="#cb19-112"></a>    <span class="dt">void</span> <span class="fu">setDownloadListener</span>(TTAppDownloadListener downloadListener);</span>
<span id="cb19-113"><a href="#cb19-113"></a></span>
<span id="cb19-114"><a href="#cb19-114"></a>    <span class="co">/**</span></span>
<span id="cb19-115"><a href="#cb19-115"></a>     <span class="co">*</span> 兼容下载类广告，使用activity申请权限</span>
<span id="cb19-116"><a href="#cb19-116"></a>     <span class="co">*/</span></span>
<span id="cb19-117"><a href="#cb19-117"></a>    <span class="dt">void</span> <span class="fu">setActivityForDownloadApp</span>(<span class="at">@NonNull</span> Activity activity);</span>
<span id="cb19-118"><a href="#cb19-118"></a></span>
<span id="cb19-119"><a href="#cb19-119"></a>    <span class="co">/**</span></span>
<span id="cb19-120"><a href="#cb19-120"></a>     <span class="co">*</span> 获取广告的view<span class="co">,</span>如视频广告的view<span class="co">,</span>在广告平台可设置是否自动播放、是否静音等。</span>
<span id="cb19-121"><a href="#cb19-121"></a>     <span class="co">*</span></span>
<span id="cb19-122"><a href="#cb19-122"></a>     <span class="co">* @</span>return</span>
<span id="cb19-123"><a href="#cb19-123"></a>     <span class="co">*/</span></span>
<span id="cb19-124"><a href="#cb19-124"></a>    <span class="bu">View</span> <span class="fu">getAdView</span>();</span>
<span id="cb19-125"><a href="#cb19-125"></a></span>
<span id="cb19-126"><a href="#cb19-126"></a>    <span class="co">/**</span></span>
<span id="cb19-127"><a href="#cb19-127"></a>     <span class="co">*</span> 信息流视频广告回调接口</span>
<span id="cb19-128"><a href="#cb19-128"></a>     <span class="co">*/</span></span>
<span id="cb19-129"><a href="#cb19-129"></a>    <span class="kw">interface</span> VideoAdListener {</span>
<span id="cb19-130"><a href="#cb19-130"></a></span>
<span id="cb19-131"><a href="#cb19-131"></a>        <span class="co">/**</span></span>
<span id="cb19-132"><a href="#cb19-132"></a>         <span class="co">*</span> 视频广告加载成功</span>
<span id="cb19-133"><a href="#cb19-133"></a>         <span class="co">*</span></span>
<span id="cb19-134"><a href="#cb19-134"></a>         <span class="co">* </span><span class="an">@param ad</span></span>
<span id="cb19-135"><a href="#cb19-135"></a>         <span class="co">*/</span></span>
<span id="cb19-136"><a href="#cb19-136"></a>        <span class="dt">void</span> <span class="fu">onVideoLoad</span>(TTFeedAd ad);</span>
<span id="cb19-137"><a href="#cb19-137"></a></span>
<span id="cb19-138"><a href="#cb19-138"></a>        <span class="co">/**</span></span>
<span id="cb19-139"><a href="#cb19-139"></a>         <span class="co">*</span> 视频广告加载失败（原生MediaPlayer内部提供的错误类型）</span>
<span id="cb19-140"><a href="#cb19-140"></a>         <span class="co">* </span><span class="an">@param errorCode </span>错误类型：</span>
<span id="cb19-141"><a href="#cb19-141"></a>         <span class="co">*</span>                  MEDIA_ERROR_UNKNOWN</span>
<span id="cb19-142"><a href="#cb19-142"></a>         <span class="co">*</span>                  MEDIA_ERROR_SERVER_DIED</span>
<span id="cb19-143"><a href="#cb19-143"></a>         <span class="co">*</span></span>
<span id="cb19-144"><a href="#cb19-144"></a>         <span class="co">*</span> <span class="an">@param extraCode </span>额外错误信息</span>
<span id="cb19-145"><a href="#cb19-145"></a>         <span class="co">*</span>                  MEDIA_ERROR_IO</span>
<span id="cb19-146"><a href="#cb19-146"></a>         <span class="co">*</span>                  MEDIA_ERROR_MALFORMED</span>
<span id="cb19-147"><a href="#cb19-147"></a>         <span class="co">*</span>                  MEDIA_ERROR_UNSUPPORTED</span>
<span id="cb19-148"><a href="#cb19-148"></a>         <span class="co">*</span>                  MEDIA_ERROR_TIMED_OUT</span>
<span id="cb19-149"><a href="#cb19-149"></a>         <span class="co">*</span>                  MEDIA_ERROR_SYSTEM</span>
<span id="cb19-150"><a href="#cb19-150"></a>         <span class="co">*</span></span>
<span id="cb19-151"><a href="#cb19-151"></a>         <span class="co">*/</span></span>
<span id="cb19-152"><a href="#cb19-152"></a>        <span class="dt">void</span> <span class="fu">onVideoError</span>(<span class="dt">int</span> errorCode, <span class="dt">int</span> extraCode);</span>
<span id="cb19-153"><a href="#cb19-153"></a></span>
<span id="cb19-154"><a href="#cb19-154"></a>        <span class="co">/**</span></span>
<span id="cb19-155"><a href="#cb19-155"></a>         <span class="co">*</span> 视频广告播放回调</span>
<span id="cb19-156"><a href="#cb19-156"></a>         <span class="co">*</span></span>
<span id="cb19-157"><a href="#cb19-157"></a>         <span class="co">* </span><span class="an">@param ad</span></span>
<span id="cb19-158"><a href="#cb19-158"></a>         <span class="co">*/</span></span>
<span id="cb19-159"><a href="#cb19-159"></a>        <span class="dt">void</span> <span class="fu">onVideoAdStartPlay</span>(TTFeedAd ad);</span>
<span id="cb19-160"><a href="#cb19-160"></a></span>
<span id="cb19-161"><a href="#cb19-161"></a>        <span class="co">/**</span></span>
<span id="cb19-162"><a href="#cb19-162"></a>         <span class="co">*</span> 视频广告暂停回调</span>
<span id="cb19-163"><a href="#cb19-163"></a>         <span class="co">*</span></span>
<span id="cb19-164"><a href="#cb19-164"></a>         <span class="co">* </span><span class="an">@param ad</span></span>
<span id="cb19-165"><a href="#cb19-165"></a>         <span class="co">*/</span></span>
<span id="cb19-166"><a href="#cb19-166"></a>        <span class="dt">void</span> <span class="fu">onVideoAdPaused</span>(TTFeedAd ad);</span>
<span id="cb19-167"><a href="#cb19-167"></a></span>
<span id="cb19-168"><a href="#cb19-168"></a>        <span class="co">/**</span></span>
<span id="cb19-169"><a href="#cb19-169"></a>         <span class="co">*</span> 视频广告续播</span>
<span id="cb19-170"><a href="#cb19-170"></a>         <span class="co">*</span></span>
<span id="cb19-171"><a href="#cb19-171"></a>         <span class="co">* </span><span class="an">@param ad</span></span>
<span id="cb19-172"><a href="#cb19-172"></a>         <span class="co">*/</span></span>
<span id="cb19-173"><a href="#cb19-173"></a>        <span class="dt">void</span> <span class="fu">onVideoAdContinuePlay</span>(TTFeedAd ad);</span>
<span id="cb19-174"><a href="#cb19-174"></a>    }</span>
<span id="cb19-175"><a href="#cb19-175"></a></span>
<span id="cb19-176"><a href="#cb19-176"></a></span>
<span id="cb19-177"><a href="#cb19-177"></a>    <span class="dt">void</span> <span class="fu">setVideoAdListener</span>(VideoAdListener videoAdListener);</span>
<span id="cb19-178"><a href="#cb19-178"></a></span>
<span id="cb19-179"><a href="#cb19-179"></a>}</span>
<span id="cb19-180"><a href="#cb19-180"></a></span></code></pre></div>
<h4 id="加载原生信息流广告">2.4.2 加载原生信息流广告</h4>
<p>接入方可调用TTAdNative.loadFeedAd(AdSlot adSlot, FeedAdListener listener)方法异步加载信息流广告，adSlot为用户请求的信息，FeedAdListener为加载成功、失败的回调监听器。示例如下：</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb20-1"><a href="#cb20-1"></a>mTTAdNative.<span class="fu">loadFeedAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">FeedAdListener</span>() {</span>
<span id="cb20-2"><a href="#cb20-2"></a>    <span class="at">@Override</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb20-4"><a href="#cb20-4"></a>        <span class="co">//加载失败的回调，详见3.1错误码说明</span></span>
<span id="cb20-5"><a href="#cb20-5"></a>        Toast.<span class="fu">makeText</span>(FeedActivity.<span class="fu">this</span>, message, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb20-6"><a href="#cb20-6"></a>    }</span>
<span id="cb20-7"><a href="#cb20-7"></a></span>
<span id="cb20-8"><a href="#cb20-8"></a>    <span class="at">@Override</span></span>
<span id="cb20-9"><a href="#cb20-9"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onFeedAdLoad</span>(<span class="bu">List</span>&lt;TTFeedAd&gt; ads) {</span>
<span id="cb20-10"><a href="#cb20-10"></a>        <span class="co">//加载成功的回调 请确保您的代码足够健壮，可以处理异常情况；</span></span>
<span id="cb20-11"><a href="#cb20-11"></a>       <span class="kw">if</span> (ads == <span class="kw">null</span> || ads.<span class="fu">isEmpty</span>()) {</span>
<span id="cb20-12"><a href="#cb20-12"></a>            Toast.<span class="fu">makeText</span>(FeedActivity.<span class="fu">this</span>, <span class="st">&quot;on FeedAdLoaded: ad is null!&quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb20-13"><a href="#cb20-13"></a>            <span class="kw">return</span>;</span>
<span id="cb20-14"><a href="#cb20-14"></a>        }</span>
<span id="cb20-15"><a href="#cb20-15"></a>        <span class="kw">for</span> (<span class="dt">int</span> i = <span class="dv">0</span>; i &lt; ads.<span class="fu">size</span>(); i++) {</span>
<span id="cb20-16"><a href="#cb20-16"></a>            mData.<span class="fu">set</span>((AD_POSITION + i) % mData.<span class="fu">size</span>(), ads.<span class="fu">get</span>(i));</span>
<span id="cb20-17"><a href="#cb20-17"></a>        }</span>
<span id="cb20-18"><a href="#cb20-18"></a>        myAdapter.<span class="fu">notifyDataSetChanged</span>();</span>
<span id="cb20-19"><a href="#cb20-19"></a>    }</span>
<span id="cb20-20"><a href="#cb20-20"></a>});</span></code></pre></div>
<p>加载信息流广告的例子详见Demo中的FeedActivity类，以及/res/layout/下的listitem_ad_pic.xml文件。</p>
<h4 id="原生信息流视频广告回调">2.4.3 原生信息流视频广告回调</h4>
<p>如果需要额外的视频回调操作，如视频加载状态，暂停播放，续播等操作可以实现VideoAdListener接口</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb21-1"><a href="#cb21-1"></a>ttFeedAd.<span class="fu">setVideoAdListener</span>(<span class="kw">new</span> TTFeedAd.<span class="fu">VideoAdListener</span>() {</span>
<span id="cb21-2"><a href="#cb21-2"></a>        <span class="at">@Override</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoLoad</span>(TTFeedAd ad) {</span>
<span id="cb21-4"><a href="#cb21-4"></a>            <span class="kw">if</span> (ad != <span class="kw">null</span>) {</span>
<span id="cb21-5"><a href="#cb21-5"></a>                Log.<span class="fu">d</span>(<span class="st">&quot;ad&quot;</span>,<span class="st">&quot;视频加载成功&quot;</span>);</span>
<span id="cb21-6"><a href="#cb21-6"></a>            }</span>
<span id="cb21-7"><a href="#cb21-7"></a>        }</span>
<span id="cb21-8"><a href="#cb21-8"></a></span>
<span id="cb21-9"><a href="#cb21-9"></a>        <span class="at">@Override</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoError</span>(<span class="dt">int</span> errorCode, <span class="dt">int</span> extraCode) {</span>
<span id="cb21-11"><a href="#cb21-11"></a>                Log.<span class="fu">d</span>(<span class="st">&quot;ad&quot;</span>,<span class="st">&quot;视频播放错误：errorCode=&quot;</span>+errorCode+<span class="st">&quot;,extraCode=&quot;</span>+extraCode);</span>
<span id="cb21-12"><a href="#cb21-12"></a>        }</span>
<span id="cb21-13"><a href="#cb21-13"></a></span>
<span id="cb21-14"><a href="#cb21-14"></a>        <span class="at">@Override</span></span>
<span id="cb21-15"><a href="#cb21-15"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoAdStartPlay</span>(TTFeedAd ad) {</span>
<span id="cb21-16"><a href="#cb21-16"></a>            <span class="kw">if</span> (ad != <span class="kw">null</span>) {</span>
<span id="cb21-17"><a href="#cb21-17"></a>                Log.<span class="fu">d</span>(<span class="st">&quot;ad&quot;</span>,<span class="st">&quot;视频开始播放&quot;</span>);</span>
<span id="cb21-18"><a href="#cb21-18"></a></span>
<span id="cb21-19"><a href="#cb21-19"></a>            }</span>
<span id="cb21-20"><a href="#cb21-20"></a>        }</span>
<span id="cb21-21"><a href="#cb21-21"></a></span>
<span id="cb21-22"><a href="#cb21-22"></a>        <span class="at">@Override</span></span>
<span id="cb21-23"><a href="#cb21-23"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoAdPaused</span>(TTFeedAd ad) {</span>
<span id="cb21-24"><a href="#cb21-24"></a>            <span class="kw">if</span> (ad != <span class="kw">null</span>) {</span>
<span id="cb21-25"><a href="#cb21-25"></a>                Log.<span class="fu">d</span>(<span class="st">&quot;ad&quot;</span>,<span class="st">&quot;视频暂停播放&quot;</span>);</span>
<span id="cb21-26"><a href="#cb21-26"></a></span>
<span id="cb21-27"><a href="#cb21-27"></a>            }</span>
<span id="cb21-28"><a href="#cb21-28"></a>        }</span>
<span id="cb21-29"><a href="#cb21-29"></a></span>
<span id="cb21-30"><a href="#cb21-30"></a>        <span class="at">@Override</span></span>
<span id="cb21-31"><a href="#cb21-31"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoAdContinuePlay</span>(TTFeedAd ad) {</span>
<span id="cb21-32"><a href="#cb21-32"></a>            <span class="kw">if</span> (ad != <span class="kw">null</span>) {</span>
<span id="cb21-33"><a href="#cb21-33"></a>                Log.<span class="fu">d</span>(<span class="st">&quot;ad&quot;</span>,<span class="st">&quot;视频继续播放&quot;</span>);</span>
<span id="cb21-34"><a href="#cb21-34"></a></span>
<span id="cb21-35"><a href="#cb21-35"></a>            }</span>
<span id="cb21-36"><a href="#cb21-36"></a>        }</span>
<span id="cb21-37"><a href="#cb21-37"></a>    });</span></code></pre></div>
<h4 id="注册可点击的view">2.4.4 注册可点击的View</h4>
<p>在加载到信息流广告后，接入方需要注册在信息流广告中可以点击的View，即TTFeedAd.registerViewForInteraction()方法，以实现广告的功能交互及计费。包含图文点击区域的注册和附加创意按钮点击区域的注册。对于落地页广告，用户点击图文广告区域会跳转到相应的落地页，点击附加创意区域会进行电话拨打、应用下载等操作。 <strong>注意：如果需要点击图文区域也能进行下载或者拨打电话动作，请将图文区域的view传入creativeViewList，详细代码如下</strong></p>
<p>注册点击View示例的示例代码如下，该示例片段在BaseAdapter中的getView()方法中调用。</p>
<pre><code>private void bindData(View convertView, final AdViewHolder adViewHolder, TTFeedAd ad) {
    // 可以被点击的view, 也可以把convertView放进来意味整个item可被点击，点击会跳转到落地页
    List&lt;View&gt; clickViewList = new ArrayList&lt;View&gt;();
    clickViewList.add(convertView);
    // 创意点击区域的view 点击根据不同的创意进行下载或拨打电话动作
    //如果需要点击图文区域也能进行下载或者拨打电话动作，请将图文区域的view传入creativeViewList
    List&lt;View&gt; creativeViewList = new ArrayList&lt;View&gt;();
    creativeViewList.add(adViewHolder.mCreativeButton);
    // 注册普通点击区域，创意点击区域。重要! 这个涉及到广告计费及交互，必须正确调用。convertView必须使用ViewGroup。
    ad.registerViewForInteraction((ViewGroup) convertView, clickViewList, creativeViewList, new TTNativeAd.AdInteractionListener() {
        @Override
        public void onAdClicked(View view, TTNativeAd ad) {
            // 点击普通区域的回调
            Toast.makeText(mContext, &quot;广告被点击&quot;, Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onAdCreativeClick(View view, TTNativeAd ad) {
              // 点击创意区域的回调
            Toast.makeText(mContext, &quot;广告创意按钮被点击&quot;, Toast.LENGTH_SHORT).show();
        }

        @Override
        public void onAdShow(TTNativeAd ad) {
           // 广告曝光展示的回调
            TToast.show(mContext, &quot;广告&quot; + ad.getTitle() + &quot;展示&quot;);
        }
    });
    ...</code></pre>
<p>详见Demo中的FeedActivity及/res/layout/下的listitem_ad_pic.xml。</p>
<h3 id="接入开屏广告ttsplashad">2.5 接入开屏广告（TTSplashAd）</h3>
<p>SDK为接入方提供了开屏广告，开屏广告建议为用户在进入App时展示的全屏广告。开屏广告为一个View，宽高默认为match_parent,注意开屏广告view：width &gt;=70%屏幕宽；height &gt;=50%屏幕高 ，否则会影响计费。</p>
<p>开屏广告可支持的尺寸：图片尺寸传入与展示区域大小保持一致，避免素材变形</p>
<p>开屏广告场景也支持个性化模板广告，开发者需要在穿山甲平台申请支持该特性的广告位id，且在构造AdSlot对象时，调用setExpressViewAcceptedSize传入期望的模板广告尺寸大小，详见demo示例。</p>
<h4 id="ttsplashad广告接口说明">2.5.1 TTSplashAd广告接口说明：</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb23-1"><a href="#cb23-1"></a><span class="kw">public</span> <span class="kw">interface</span> TTSplashAd {</span>
<span id="cb23-2"><a href="#cb23-2"></a></span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="co">/**</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>   <span class="co">*</span> 得到开屏广告</span>
<span id="cb23-5"><a href="#cb23-5"></a>   <span class="co">*</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>   <span class="co">* @</span>return</span>
<span id="cb23-7"><a href="#cb23-7"></a>   <span class="co">*/</span></span>
<span id="cb23-8"><a href="#cb23-8"></a>  <span class="at">@NonNull</span></span>
<span id="cb23-9"><a href="#cb23-9"></a>  <span class="bu">View</span> <span class="fu">getSplashView</span>();</span>
<span id="cb23-10"><a href="#cb23-10"></a></span>
<span id="cb23-11"><a href="#cb23-11"></a>  <span class="co">/**</span></span>
<span id="cb23-12"><a href="#cb23-12"></a>   <span class="co">*</span> 得到Splash广告的交互类型</span>
<span id="cb23-13"><a href="#cb23-13"></a>   <span class="co">*</span></span>
<span id="cb23-14"><a href="#cb23-14"></a>   <span class="co">* </span><span class="an">@return </span><span class="co">2在浏览器内打开</span> （普通类型）3落地页（普通类型），<span class="co">5:</span>拨打电话 <span class="co">-1</span> 未知类型</span>
<span id="cb23-15"><a href="#cb23-15"></a>   <span class="co">*/</span></span>
<span id="cb23-16"><a href="#cb23-16"></a>  <span class="dt">int</span> <span class="fu">getInteractionType</span>();</span>
<span id="cb23-17"><a href="#cb23-17"></a></span>
<span id="cb23-18"><a href="#cb23-18"></a>  <span class="co">/**</span></span>
<span id="cb23-19"><a href="#cb23-19"></a>   <span class="co">*</span> 注册Splash广告交互回调</span>
<span id="cb23-20"><a href="#cb23-20"></a>   <span class="co">*</span></span>
<span id="cb23-21"><a href="#cb23-21"></a>   <span class="co">* </span><span class="an">@param listener </span>监听器</span>
<span id="cb23-22"><a href="#cb23-22"></a>   <span class="co">*/</span></span>
<span id="cb23-23"><a href="#cb23-23"></a>  <span class="dt">void</span> <span class="fu">setSplashInteractionListener</span>(AdInteractionListener listener);</span>
<span id="cb23-24"><a href="#cb23-24"></a></span>
<span id="cb23-25"><a href="#cb23-25"></a>  <span class="kw">interface</span> AdInteractionListener {</span>
<span id="cb23-26"><a href="#cb23-26"></a>      <span class="co">/**</span></span>
<span id="cb23-27"><a href="#cb23-27"></a>       <span class="co">*</span> Splash广告的点击回调</span>
<span id="cb23-28"><a href="#cb23-28"></a>       <span class="co">*</span></span>
<span id="cb23-29"><a href="#cb23-29"></a>       <span class="co">* </span><span class="an">@param view </span>Splash广告</span>
<span id="cb23-30"><a href="#cb23-30"></a>       <span class="co">*</span> <span class="an">@param type </span>Splash广告的交互类型</span>
<span id="cb23-31"><a href="#cb23-31"></a>       <span class="co">*/</span></span>
<span id="cb23-32"><a href="#cb23-32"></a>      <span class="dt">void</span> <span class="fu">onAdClicked</span>(<span class="bu">View</span> view, <span class="dt">int</span> type);</span>
<span id="cb23-33"><a href="#cb23-33"></a></span>
<span id="cb23-34"><a href="#cb23-34"></a>      <span class="co">/**</span></span>
<span id="cb23-35"><a href="#cb23-35"></a>       <span class="co">*</span> Splash广告的展示回调</span>
<span id="cb23-36"><a href="#cb23-36"></a>       <span class="co">*</span></span>
<span id="cb23-37"><a href="#cb23-37"></a>       <span class="co">* </span><span class="an">@param view </span>Splash广告</span>
<span id="cb23-38"><a href="#cb23-38"></a>       <span class="co">*</span> <span class="an">@param type </span>Splash广告的交互类型</span>
<span id="cb23-39"><a href="#cb23-39"></a>       <span class="co">*/</span></span>
<span id="cb23-40"><a href="#cb23-40"></a>      <span class="dt">void</span> <span class="fu">onAdShow</span>(<span class="bu">View</span> view, <span class="dt">int</span> type);</span>
<span id="cb23-41"><a href="#cb23-41"></a></span>
<span id="cb23-42"><a href="#cb23-42"></a>      <span class="co">/**</span></span>
<span id="cb23-43"><a href="#cb23-43"></a>       <span class="co">*</span> 点击跳过时回调</span>
<span id="cb23-44"><a href="#cb23-44"></a>       <span class="co">*/</span></span>
<span id="cb23-45"><a href="#cb23-45"></a>      <span class="dt">void</span> <span class="fu">onAdSkip</span>();</span>
<span id="cb23-46"><a href="#cb23-46"></a></span>
<span id="cb23-47"><a href="#cb23-47"></a>      <span class="co">/**</span></span>
<span id="cb23-48"><a href="#cb23-48"></a>       <span class="co">*</span> 广告播放时间结束</span>
<span id="cb23-49"><a href="#cb23-49"></a>       <span class="co">*/</span></span>
<span id="cb23-50"><a href="#cb23-50"></a>      <span class="dt">void</span> <span class="fu">onAdTimeOver</span>();</span>
<span id="cb23-51"><a href="#cb23-51"></a>  }</span>
<span id="cb23-52"><a href="#cb23-52"></a>}</span></code></pre></div>
<h4 id="加载开屏广告">2.5.2 加载开屏广告</h4>
<p>接入方可调用TTAdNative.loadSplashAd(AdSlot adSlot, SplashAdListener listener, int timeOut)异步加载开屏广告。adslot为请求广告的信息，SplashAdListener为广告加载成功或失败的回调，timeOut为加载开屏广告允许的最长时间（注：建议timeOut &gt; 3000ms）。调用示例如下：</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb24-1"><a href="#cb24-1"></a>mTTAdNative.<span class="fu">loadSplashAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">SplashAdListener</span>() {</span>
<span id="cb24-2"><a href="#cb24-2"></a>    <span class="at">@Override</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>    <span class="at">@MainThread</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb24-5"><a href="#cb24-5"></a>        Log.<span class="fu">d</span>(TAG, message);</span>
<span id="cb24-6"><a href="#cb24-6"></a>        mHasLoaded = <span class="kw">true</span>;</span>
<span id="cb24-7"><a href="#cb24-7"></a>        <span class="fu">showToast</span>(message);</span>
<span id="cb24-8"><a href="#cb24-8"></a>        <span class="fu">goToMainActivity</span>();</span>
<span id="cb24-9"><a href="#cb24-9"></a>    }</span>
<span id="cb24-10"><a href="#cb24-10"></a></span>
<span id="cb24-11"><a href="#cb24-11"></a>    <span class="at">@Override</span></span>
<span id="cb24-12"><a href="#cb24-12"></a>    <span class="at">@MainThread</span></span>
<span id="cb24-13"><a href="#cb24-13"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onTimeout</span>() {</span>
<span id="cb24-14"><a href="#cb24-14"></a>        mHasLoaded = <span class="kw">true</span>;</span>
<span id="cb24-15"><a href="#cb24-15"></a>        <span class="fu">showToast</span>(<span class="st">&quot;开屏广告加载超时&quot;</span>);</span>
<span id="cb24-16"><a href="#cb24-16"></a>        <span class="fu">goToMainActivity</span>();</span>
<span id="cb24-17"><a href="#cb24-17"></a>    }</span>
<span id="cb24-18"><a href="#cb24-18"></a></span>
<span id="cb24-19"><a href="#cb24-19"></a>    <span class="at">@Override</span></span>
<span id="cb24-20"><a href="#cb24-20"></a>    <span class="at">@MainThread</span></span>
<span id="cb24-21"><a href="#cb24-21"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSplashAdLoad</span>(TTSplashAd ad) {</span>
<span id="cb24-22"><a href="#cb24-22"></a>        Log.<span class="fu">d</span>(TAG, <span class="st">&quot;开屏广告请求成功&quot;</span>);</span>
<span id="cb24-23"><a href="#cb24-23"></a>        mHasLoaded = <span class="kw">true</span>;</span>
<span id="cb24-24"><a href="#cb24-24"></a>        mHandler.<span class="fu">removeCallbacksAndMessages</span>(<span class="kw">null</span>);</span>
<span id="cb24-25"><a href="#cb24-25"></a>        <span class="kw">if</span> (ad == <span class="kw">null</span>) {</span>
<span id="cb24-26"><a href="#cb24-26"></a>            <span class="kw">return</span>;</span>
<span id="cb24-27"><a href="#cb24-27"></a>        }</span>
<span id="cb24-28"><a href="#cb24-28"></a>        <span class="co">//获取SplashView</span></span>
<span id="cb24-29"><a href="#cb24-29"></a>        <span class="bu">View</span> view = ad.<span class="fu">getSplashView</span>();</span>
<span id="cb24-30"><a href="#cb24-30"></a></span>
<span id="cb24-31"><a href="#cb24-31"></a>        mSplashContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb24-32"><a href="#cb24-32"></a>        <span class="co">//把SplashView 添加到ViewGroup中</span></span>
<span id="cb24-33"><a href="#cb24-33"></a>        mSplashContainer.<span class="fu">addView</span>(view);</span>
<span id="cb24-34"><a href="#cb24-34"></a>        <span class="co">//设置SplashView的交互监听器</span></span>
<span id="cb24-35"><a href="#cb24-35"></a>        ad.<span class="fu">setSplashInteractionListener</span>(<span class="kw">new</span> TTSplashAd.<span class="fu">AdInteractionListener</span>() {</span>
<span id="cb24-36"><a href="#cb24-36"></a>            <span class="at">@Override</span></span>
<span id="cb24-37"><a href="#cb24-37"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdClicked</span>(<span class="bu">View</span> view, <span class="dt">int</span> type) {</span>
<span id="cb24-38"><a href="#cb24-38"></a>                Log.<span class="fu">d</span>(TAG, <span class="st">&quot;onAdClicked&quot;</span>);</span>
<span id="cb24-39"><a href="#cb24-39"></a>                <span class="fu">showToast</span>(<span class="st">&quot;开屏广告点击&quot;</span>);</span>
<span id="cb24-40"><a href="#cb24-40"></a>            }</span>
<span id="cb24-41"><a href="#cb24-41"></a></span>
<span id="cb24-42"><a href="#cb24-42"></a>            <span class="at">@Override</span></span>
<span id="cb24-43"><a href="#cb24-43"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdShow</span>(<span class="bu">View</span> view, <span class="dt">int</span> type) {</span>
<span id="cb24-44"><a href="#cb24-44"></a>                Log.<span class="fu">d</span>(TAG, <span class="st">&quot;onAdShow&quot;</span>);</span>
<span id="cb24-45"><a href="#cb24-45"></a>                <span class="fu">showToast</span>(<span class="st">&quot;开屏广告展示&quot;</span>);</span>
<span id="cb24-46"><a href="#cb24-46"></a>            }</span>
<span id="cb24-47"><a href="#cb24-47"></a></span>
<span id="cb24-48"><a href="#cb24-48"></a>            <span class="at">@Override</span></span>
<span id="cb24-49"><a href="#cb24-49"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdSkip</span>() {</span>
<span id="cb24-50"><a href="#cb24-50"></a>                Log.<span class="fu">d</span>(TAG, <span class="st">&quot;onAdSkip&quot;</span>);</span>
<span id="cb24-51"><a href="#cb24-51"></a>                <span class="fu">showToast</span>(<span class="st">&quot;开屏广告跳过&quot;</span>);</span>
<span id="cb24-52"><a href="#cb24-52"></a>                <span class="fu">goToMainActivity</span>();</span>
<span id="cb24-53"><a href="#cb24-53"></a></span>
<span id="cb24-54"><a href="#cb24-54"></a>            }</span>
<span id="cb24-55"><a href="#cb24-55"></a></span>
<span id="cb24-56"><a href="#cb24-56"></a>            <span class="at">@Override</span></span>
<span id="cb24-57"><a href="#cb24-57"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdTimeOver</span>() {</span>
<span id="cb24-58"><a href="#cb24-58"></a>                Log.<span class="fu">d</span>(TAG, <span class="st">&quot;onAdTimeOver&quot;</span>);</span>
<span id="cb24-59"><a href="#cb24-59"></a>                <span class="fu">showToast</span>(<span class="st">&quot;开屏广告倒计时结束&quot;</span>);</span>
<span id="cb24-60"><a href="#cb24-60"></a>                <span class="fu">goToMainActivity</span>();</span>
<span id="cb24-61"><a href="#cb24-61"></a>            }</span>
<span id="cb24-62"><a href="#cb24-62"></a>        });</span>
<span id="cb24-63"><a href="#cb24-63"></a>    }</span>
<span id="cb24-64"><a href="#cb24-64"></a>}, AD_TIME_OUT);</span></code></pre></div>
<p>加载开屏广告具体示例详见Demo中的SplashActivity。</p>
<h3 id="接入原生广告ttnativead">2.6 接入原生广告（TTNativeAd）</h3>
<p>本SDK为接入方提供原生广告，目前支持原生广告自渲染横幅和插屏两种广告，接入方式与TTFeedAd接入基本一致。</p>
<h4 id="ttnativead接口说明">2.6.1 TTNativeAd接口说明：</h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb25-1"><a href="#cb25-1"></a><span class="kw">public</span> <span class="kw">interface</span> TTNativeAd {</span>
<span id="cb25-2"><a href="#cb25-2"></a></span>
<span id="cb25-3"><a href="#cb25-3"></a>    <span class="co">/**</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>     <span class="co">*</span> 获取穿山甲穿山甲logo，图片大小：8<span class="co">0*80</span></span>
<span id="cb25-5"><a href="#cb25-5"></a>     <span class="co">*</span></span>
<span id="cb25-6"><a href="#cb25-6"></a>     <span class="co">* </span><span class="an">@return </span>bitmap对象</span>
<span id="cb25-7"><a href="#cb25-7"></a>     <span class="co">*/</span></span>
<span id="cb25-8"><a href="#cb25-8"></a>    Bitmap <span class="fu">getAdLogo</span>();</span>
<span id="cb25-9"><a href="#cb25-9"></a></span>
<span id="cb25-10"><a href="#cb25-10"></a>    <span class="co">/**</span></span>
<span id="cb25-11"><a href="#cb25-11"></a>     <span class="co">*</span> 广告标题</span>
<span id="cb25-12"><a href="#cb25-12"></a>     <span class="co">*</span></span>
<span id="cb25-13"><a href="#cb25-13"></a>     <span class="co">* @</span>return</span>
<span id="cb25-14"><a href="#cb25-14"></a>     <span class="co">*/</span></span>
<span id="cb25-15"><a href="#cb25-15"></a>    <span class="bu">String</span> <span class="fu">getTitle</span>();</span>
<span id="cb25-16"><a href="#cb25-16"></a></span>
<span id="cb25-17"><a href="#cb25-17"></a>    <span class="co">/**</span></span>
<span id="cb25-18"><a href="#cb25-18"></a>     <span class="co">*</span> 广告描述</span>
<span id="cb25-19"><a href="#cb25-19"></a>     <span class="co">*</span></span>
<span id="cb25-20"><a href="#cb25-20"></a>     <span class="co">* @</span>return</span>
<span id="cb25-21"><a href="#cb25-21"></a>     <span class="co">*/</span></span>
<span id="cb25-22"><a href="#cb25-22"></a>    <span class="bu">String</span> <span class="fu">getDescription</span>();</span>
<span id="cb25-23"><a href="#cb25-23"></a></span>
<span id="cb25-24"><a href="#cb25-24"></a>    <span class="co">/**</span></span>
<span id="cb25-25"><a href="#cb25-25"></a>     <span class="co">*</span> 广告来源</span>
<span id="cb25-26"><a href="#cb25-26"></a>     <span class="co">*</span></span>
<span id="cb25-27"><a href="#cb25-27"></a>     <span class="co">* @</span>return</span>
<span id="cb25-28"><a href="#cb25-28"></a>     <span class="co">*/</span></span>
<span id="cb25-29"><a href="#cb25-29"></a>    <span class="bu">String</span> <span class="fu">getSource</span>();</span>
<span id="cb25-30"><a href="#cb25-30"></a></span>
<span id="cb25-31"><a href="#cb25-31"></a>    <span class="co">/**</span></span>
<span id="cb25-32"><a href="#cb25-32"></a>     <span class="co">*</span> 广告图标Image</span>
<span id="cb25-33"><a href="#cb25-33"></a>     <span class="co">*</span></span>
<span id="cb25-34"><a href="#cb25-34"></a>     <span class="co">* @</span>return</span>
<span id="cb25-35"><a href="#cb25-35"></a>     <span class="co">*/</span></span>
<span id="cb25-36"><a href="#cb25-36"></a>    TTImage <span class="fu">getIcon</span>();</span>
<span id="cb25-37"><a href="#cb25-37"></a></span>
<span id="cb25-38"><a href="#cb25-38"></a>    <span class="co">/**</span></span>
<span id="cb25-39"><a href="#cb25-39"></a>     <span class="co">*</span> 广告图片Image list</span>
<span id="cb25-40"><a href="#cb25-40"></a>     <span class="co">*</span></span>
<span id="cb25-41"><a href="#cb25-41"></a>     <span class="co">* @</span>return</span>
<span id="cb25-42"><a href="#cb25-42"></a>     <span class="co">*/</span></span>
<span id="cb25-43"><a href="#cb25-43"></a>    <span class="bu">List</span>&lt;TTImage&gt; <span class="fu">getImageList</span>();</span>
<span id="cb25-44"><a href="#cb25-44"></a></span>
<span id="cb25-45"><a href="#cb25-45"></a>    <span class="co">/**</span></span>
<span id="cb25-46"><a href="#cb25-46"></a>     <span class="co">*</span> 获取原生广告交互类型</span>
<span id="cb25-47"><a href="#cb25-47"></a>     <span class="co">*</span></span>
<span id="cb25-48"><a href="#cb25-48"></a>     <span class="co">* </span><span class="an">@return </span><span class="co">2:</span>在浏览器打开网页，3<span class="co">:</span>在app中打开，<span class="co">4:</span>下载应用，5<span class="co">:</span>拨打电话 其它：未知类型</span>
<span id="cb25-49"><a href="#cb25-49"></a>     <span class="co">*/</span></span>
<span id="cb25-50"><a href="#cb25-50"></a>    <span class="dt">int</span> <span class="fu">getInteractionType</span>();</span>
<span id="cb25-51"><a href="#cb25-51"></a></span>
<span id="cb25-52"><a href="#cb25-52"></a></span>
<span id="cb25-53"><a href="#cb25-53"></a>    <span class="co">/**</span></span>
<span id="cb25-54"><a href="#cb25-54"></a>     <span class="co">*</span> 得到原生广告图片模式</span>
<span id="cb25-55"><a href="#cb25-55"></a>     <span class="co">*</span></span>
<span id="cb25-56"><a href="#cb25-56"></a>     <span class="co">* </span><span class="an">@return </span><span class="co">3</span> 大图 <span class="co">2小图</span> <span class="co">4</span> 组图 <span class="co">5</span> 视频 其它：未知类型</span>
<span id="cb25-57"><a href="#cb25-57"></a>     <span class="co">*/</span></span>
<span id="cb25-58"><a href="#cb25-58"></a>    <span class="dt">int</span> <span class="fu">getImageMode</span>();</span>
<span id="cb25-59"><a href="#cb25-59"></a></span>
<span id="cb25-60"><a href="#cb25-60"></a>    <span class="co">/**</span></span>
<span id="cb25-61"><a href="#cb25-61"></a>     <span class="co">*</span> 得到dislike dialog</span>
<span id="cb25-62"><a href="#cb25-62"></a>     <span class="co">*</span></span>
<span id="cb25-63"><a href="#cb25-63"></a>     <span class="co">* </span><span class="an">@param activity </span>建议传当前activity，否则可能会影响dislike对话框弹出</span>
<span id="cb25-64"><a href="#cb25-64"></a>     <span class="co">*</span> <span class="co">@</span>return</span>
<span id="cb25-65"><a href="#cb25-65"></a>     <span class="co">*/</span></span>
<span id="cb25-66"><a href="#cb25-66"></a>    TTAdDislike <span class="fu">getDislikeDialog</span>(Activity activity);</span>
<span id="cb25-67"><a href="#cb25-67"></a></span>
<span id="cb25-68"><a href="#cb25-68"></a>    <span class="co">/**</span></span>
<span id="cb25-69"><a href="#cb25-69"></a>     <span class="co">*</span> 自定义dislike dialog</span>
<span id="cb25-70"><a href="#cb25-70"></a>     <span class="co">*</span></span>
<span id="cb25-71"><a href="#cb25-71"></a>     <span class="co">* </span><span class="an">@param dialog </span>自定义dialog，需要由外部传入</span>
<span id="cb25-72"><a href="#cb25-72"></a>     <span class="co">*</span> <span class="co">@</span>return</span>
<span id="cb25-73"><a href="#cb25-73"></a>     <span class="co">*/</span></span>
<span id="cb25-74"><a href="#cb25-74"></a>    TTAdDislike <span class="fu">getDislikeDialog</span>(TTDislikeDialogAbstract dialog);</span>
<span id="cb25-75"><a href="#cb25-75"></a></span>
<span id="cb25-76"><a href="#cb25-76"></a>    <span class="co">/**</span></span>
<span id="cb25-77"><a href="#cb25-77"></a>     <span class="co">*</span> 获取下载状态控制器</span>
<span id="cb25-78"><a href="#cb25-78"></a>     <span class="co">*/</span></span>
<span id="cb25-79"><a href="#cb25-79"></a>    DownloadStatusController <span class="fu">getDownloadStatusController</span>();</span>
<span id="cb25-80"><a href="#cb25-80"></a></span>
<span id="cb25-81"><a href="#cb25-81"></a>    <span class="co">/**</span></span>
<span id="cb25-82"><a href="#cb25-82"></a>     <span class="co">*</span> 注册可点击的View，click<span class="co">/</span>show会在内部完成</span>
<span id="cb25-83"><a href="#cb25-83"></a>     <span class="co">*</span></span>
<span id="cb25-84"><a href="#cb25-84"></a>     <span class="co">* </span><span class="an">@param container </span>渲染广告最外层的ViewGroup</span>
<span id="cb25-85"><a href="#cb25-85"></a>     <span class="co">*</span> <span class="an">@param clickView </span>可点击的View</span>
<span id="cb25-86"><a href="#cb25-86"></a>     <span class="co">*/</span></span>
<span id="cb25-87"><a href="#cb25-87"></a>    <span class="dt">void</span> <span class="fu">registerViewForInteraction</span>(<span class="at">@NonNull</span> ViewGroup container, <span class="at">@NonNull</span> <span class="bu">View</span> clickView, AdInteractionListener listener);</span>
<span id="cb25-88"><a href="#cb25-88"></a></span>
<span id="cb25-89"><a href="#cb25-89"></a>    <span class="co">/**</span></span>
<span id="cb25-90"><a href="#cb25-90"></a>     <span class="co">*</span> 注册可点击的View，click<span class="co">/</span>show会在内部完成</span>
<span id="cb25-91"><a href="#cb25-91"></a>     <span class="co">*</span></span>
<span id="cb25-92"><a href="#cb25-92"></a>     <span class="co">* </span><span class="an">@param container </span>    渲染广告最外层的ViewGroup</span>
<span id="cb25-93"><a href="#cb25-93"></a>     <span class="co">*</span> <span class="an">@param clickViews </span>   可点击的View的列表</span>
<span id="cb25-94"><a href="#cb25-94"></a>     <span class="co">*</span> <span class="an">@param creativeViews </span>用于下载或者拨打电话的View</span>
<span id="cb25-95"><a href="#cb25-95"></a>     <span class="co">*/</span></span>
<span id="cb25-96"><a href="#cb25-96"></a>    <span class="dt">void</span> <span class="fu">registerViewForInteraction</span>(<span class="at">@NonNull</span> ViewGroup container, <span class="at">@NonNull</span> <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; clickViews, <span class="at">@Nullable</span> <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; creativeViews, AdInteractionListener listener);</span>
<span id="cb25-97"><a href="#cb25-97"></a></span>
<span id="cb25-98"><a href="#cb25-98"></a>    <span class="co">/**</span></span>
<span id="cb25-99"><a href="#cb25-99"></a>     <span class="co">*</span> 注册可点击的View，click<span class="co">/</span>show会在内部完成，注册dislike按钮</span>
<span id="cb25-100"><a href="#cb25-100"></a>     <span class="co">*</span></span>
<span id="cb25-101"><a href="#cb25-101"></a>     <span class="co">* </span><span class="an">@param container </span>    渲染广告最外层的ViewGroup</span>
<span id="cb25-102"><a href="#cb25-102"></a>     <span class="co">*</span> <span class="an">@param clickViews </span>   可点击的View的列表</span>
<span id="cb25-103"><a href="#cb25-103"></a>     <span class="co">*</span> <span class="an">@param creativeViews </span>用于下载或者拨打电话的View</span>
<span id="cb25-104"><a href="#cb25-104"></a>     <span class="co">*</span> <span class="an">@param dislikeView </span>  dislike按钮</span>
<span id="cb25-105"><a href="#cb25-105"></a>     <span class="co">*</span> <span class="an">@param listener </span>     点击回调</span>
<span id="cb25-106"><a href="#cb25-106"></a>     <span class="co">*/</span></span>
<span id="cb25-107"><a href="#cb25-107"></a>    <span class="dt">void</span> <span class="fu">registerViewForInteraction</span>(<span class="at">@NonNull</span> ViewGroup container, <span class="at">@NonNull</span> <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; clickViews, <span class="at">@Nullable</span> <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; creativeViews, <span class="at">@Nullable</span> <span class="bu">View</span> dislikeView, AdInteractionListener listener);</span>
<span id="cb25-108"><a href="#cb25-108"></a></span>
<span id="cb25-109"><a href="#cb25-109"></a>    <span class="co">/**</span></span>
<span id="cb25-110"><a href="#cb25-110"></a>     <span class="co">*</span> 设置下载监听器</span>
<span id="cb25-111"><a href="#cb25-111"></a>     <span class="co">*/</span></span>
<span id="cb25-112"><a href="#cb25-112"></a>    <span class="dt">void</span> <span class="fu">setDownloadListener</span>(TTAppDownloadListener downloadListener);</span>
<span id="cb25-113"><a href="#cb25-113"></a></span>
<span id="cb25-114"><a href="#cb25-114"></a>    <span class="co">/**</span></span>
<span id="cb25-115"><a href="#cb25-115"></a>     <span class="co">*</span> 兼容下载类广告，使用activity申请权限</span>
<span id="cb25-116"><a href="#cb25-116"></a>     <span class="co">*/</span></span>
<span id="cb25-117"><a href="#cb25-117"></a>    <span class="dt">void</span> <span class="fu">setActivityForDownloadApp</span>(<span class="at">@NonNull</span> Activity activity);</span>
<span id="cb25-118"><a href="#cb25-118"></a></span>
<span id="cb25-119"><a href="#cb25-119"></a>    <span class="bu">View</span> <span class="fu">getAdView</span>();</span>
<span id="cb25-120"><a href="#cb25-120"></a></span>
<span id="cb25-121"><a href="#cb25-121"></a>    <span class="co">/**</span></span>
<span id="cb25-122"><a href="#cb25-122"></a>     <span class="co">*</span> 信息流广告交互回调接口</span>
<span id="cb25-123"><a href="#cb25-123"></a>     <span class="co">*/</span></span>
<span id="cb25-124"><a href="#cb25-124"></a>    <span class="kw">interface</span> AdInteractionListener {</span>
<span id="cb25-125"><a href="#cb25-125"></a></span>
<span id="cb25-126"><a href="#cb25-126"></a>        <span class="co">/**</span></span>
<span id="cb25-127"><a href="#cb25-127"></a>         <span class="co">*</span> 广告点击的回调，点击后的动作由sdk控制</span>
<span id="cb25-128"><a href="#cb25-128"></a>         <span class="co">*</span></span>
<span id="cb25-129"><a href="#cb25-129"></a>         <span class="co">* </span><span class="an">@param ad</span></span>
<span id="cb25-130"><a href="#cb25-130"></a>         <span class="co">*/</span></span>
<span id="cb25-131"><a href="#cb25-131"></a>        <span class="dt">void</span> <span class="fu">onAdClicked</span>(<span class="bu">View</span> view, TTNativeAd ad);</span>
<span id="cb25-132"><a href="#cb25-132"></a></span>
<span id="cb25-133"><a href="#cb25-133"></a>        <span class="co">/**</span></span>
<span id="cb25-134"><a href="#cb25-134"></a>         <span class="co">*</span> 创意广告点击回调</span>
<span id="cb25-135"><a href="#cb25-135"></a>         <span class="co">*</span></span>
<span id="cb25-136"><a href="#cb25-136"></a>         <span class="co">* </span><span class="an">@param view</span></span>
<span id="cb25-137"><a href="#cb25-137"></a>         <span class="co">*</span> <span class="an">@param ad</span></span>
<span id="cb25-138"><a href="#cb25-138"></a>         <span class="co">*/</span></span>
<span id="cb25-139"><a href="#cb25-139"></a>        <span class="dt">void</span> <span class="fu">onAdCreativeClick</span>(<span class="bu">View</span> view, TTNativeAd ad);</span>
<span id="cb25-140"><a href="#cb25-140"></a></span>
<span id="cb25-141"><a href="#cb25-141"></a>        <span class="co">/**</span></span>
<span id="cb25-142"><a href="#cb25-142"></a>         <span class="co">*</span> 广告展示回调</span>
<span id="cb25-143"><a href="#cb25-143"></a>         <span class="co">*</span></span>
<span id="cb25-144"><a href="#cb25-144"></a>         <span class="co">* </span><span class="an">@param ad</span></span>
<span id="cb25-145"><a href="#cb25-145"></a>         <span class="co">*/</span></span>
<span id="cb25-146"><a href="#cb25-146"></a>        <span class="dt">void</span> <span class="fu">onAdShow</span>(TTNativeAd ad);</span>
<span id="cb25-147"><a href="#cb25-147"></a>    }</span>
<span id="cb25-148"><a href="#cb25-148"></a>}</span></code></pre></div>
<h4 id="加载原生广告">2.6.2 加载原生广告</h4>
<p>接入方可调用<code>loadNativeAd(AdSlot adSlot, @NonNull NativeAdListener listener)</code>异步加载原生广告，adslot为请求广告的信息，NativeAdListener为广告加载成功或失败的回调。</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb26-1"><a href="#cb26-1"></a>   <span class="co">//step4:创建广告请求参数AdSlot,注意其中的setNativeAdtype方法，具体参数含义参考文档</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>        <span class="dt">final</span> AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb26-3"><a href="#cb26-3"></a>                .<span class="fu">setCodeId</span>(codeId)</span>
<span id="cb26-4"><a href="#cb26-4"></a>                .<span class="fu">setImageAcceptedSize</span>(<span class="dv">600</span>, <span class="dv">257</span>)</span>
<span id="cb26-5"><a href="#cb26-5"></a>                .<span class="fu">setNativeAdType</span>(AdSlot.<span class="fu">TYPE_BANNER</span>) <span class="co">//请求原生广告时候，请务必调用该方法，设置参数为TYPE_BANNER或TYPE_INTERACTION_AD</span></span>
<span id="cb26-6"><a href="#cb26-6"></a>                .<span class="fu">setAdCount</span>(<span class="dv">1</span>)</span>
<span id="cb26-7"><a href="#cb26-7"></a>                .<span class="fu">build</span>();</span>
<span id="cb26-8"><a href="#cb26-8"></a></span>
<span id="cb26-9"><a href="#cb26-9"></a>        <span class="co">//step5:请求广告，对请求回调的广告作渲染处理</span></span>
<span id="cb26-10"><a href="#cb26-10"></a>        mTTAdNative.<span class="fu">loadNativeAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">NativeAdListener</span>() {</span>
<span id="cb26-11"><a href="#cb26-11"></a>            <span class="at">@Override</span></span>
<span id="cb26-12"><a href="#cb26-12"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb26-13"><a href="#cb26-13"></a>                TToast.<span class="fu">show</span>(NativeBannerActivity.<span class="fu">this</span>, <span class="st">&quot;load error : &quot;</span> + code + <span class="st">&quot;, &quot;</span> + message);</span>
<span id="cb26-14"><a href="#cb26-14"></a>            }</span>
<span id="cb26-15"><a href="#cb26-15"></a></span>
<span id="cb26-16"><a href="#cb26-16"></a>            <span class="at">@Override</span></span>
<span id="cb26-17"><a href="#cb26-17"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onNativeAdLoad</span>(<span class="bu">List</span>&lt;TTNativeAd&gt; ads) {</span>
<span id="cb26-18"><a href="#cb26-18"></a>                <span class="kw">if</span> (ads.<span class="fu">get</span>(<span class="dv">0</span>) == <span class="kw">null</span>) {</span>
<span id="cb26-19"><a href="#cb26-19"></a>                    <span class="kw">return</span>;</span>
<span id="cb26-20"><a href="#cb26-20"></a>                }</span>
<span id="cb26-21"><a href="#cb26-21"></a>                <span class="bu">View</span> bannerView = LayoutInflater.<span class="fu">from</span>(mContext).<span class="fu">inflate</span>(R.<span class="fu">layout</span>.<span class="fu">native_ad</span>, mBannerContainer, <span class="kw">false</span>);</span>
<span id="cb26-22"><a href="#cb26-22"></a>                <span class="kw">if</span> (bannerView == <span class="kw">null</span>) {</span>
<span id="cb26-23"><a href="#cb26-23"></a>                    <span class="kw">return</span>;</span>
<span id="cb26-24"><a href="#cb26-24"></a>                }</span>
<span id="cb26-25"><a href="#cb26-25"></a>                mBannerContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb26-26"><a href="#cb26-26"></a>                mBannerContainer.<span class="fu">addView</span>(bannerView);</span>
<span id="cb26-27"><a href="#cb26-27"></a>                <span class="co">//绑定原生广告的数据，请见Demo中NativeBannerActivity示例。</span></span>
<span id="cb26-28"><a href="#cb26-28"></a>                <span class="fu">setAdData</span>(bannerView, ads.<span class="fu">get</span>(<span class="dv">0</span>));</span>
<span id="cb26-29"><a href="#cb26-29"></a>            }</span>
<span id="cb26-30"><a href="#cb26-30"></a>        });</span></code></pre></div>
<h4 id="展示原生广告">2.6.3 展示原生广告</h4>
<div class="sourceCode" id="cb27"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb27-1"><a href="#cb27-1"></a> mBannerContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb27-2"><a href="#cb27-2"></a> mBannerContainer.<span class="fu">addView</span>(bannerView);</span></code></pre></div>
<p>详细代码请参考demo中的NativeBannerActivity。</p>
<h3 id="接入激励视频广告ttrewardvideoad">2.7 接入激励视频广告（TTRewardVideoAd）</h3>
<p>本SDK为接入方提供激励视频广告，该广告的效果为观看完毕视频广告，发放奖励给用户。使用场景包括但不限于： 1、游戏等应用内观看视频广告获得游戏内金币等：用户必须观看完整视频才能获取奖励； 2、积分类应用接入；</p>
<p>支持的广告尺寸： 全屏横屏播放和竖屏，默认横屏</p>
<h4 id="ttrewardvideoad接口说明">2.7.1 TTRewardVideoAd接口说明：</h4>
<div class="sourceCode" id="cb28"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb28-1"><a href="#cb28-1"></a><span class="kw">public</span> <span class="kw">interface</span> TTRewardVideoAd {</span>
<span id="cb28-2"><a href="#cb28-2"></a>    <span class="co">/**</span></span>
<span id="cb28-3"><a href="#cb28-3"></a>     <span class="co">*</span> 设置视频交互回调</span>
<span id="cb28-4"><a href="#cb28-4"></a>     <span class="co">*/</span></span>
<span id="cb28-5"><a href="#cb28-5"></a>    <span class="dt">void</span> <span class="fu">setRewardAdInteractionListener</span>(TTRewardVideoAd.<span class="fu">RewardAdInteractionListener</span> var1);</span>
<span id="cb28-6"><a href="#cb28-6"></a></span>
<span id="cb28-7"><a href="#cb28-7"></a>    <span class="co">/**</span></span>
<span id="cb28-8"><a href="#cb28-8"></a>     <span class="co">*</span> 设置下载应用的下载状态回调</span>
<span id="cb28-9"><a href="#cb28-9"></a>     <span class="co">*/</span></span>
<span id="cb28-10"><a href="#cb28-10"></a>    <span class="dt">void</span> <span class="fu">setDownloadListener</span>(TTAppDownloadListener var1);</span>
<span id="cb28-11"><a href="#cb28-11"></a></span>
<span id="cb28-12"><a href="#cb28-12"></a>    <span class="co">/**</span></span>
<span id="cb28-13"><a href="#cb28-13"></a>     <span class="co">*</span> 返回视频广告的交互类型，目前为下载类</span>
<span id="cb28-14"><a href="#cb28-14"></a>     <span class="co">*/</span></span>
<span id="cb28-15"><a href="#cb28-15"></a>    <span class="dt">int</span> <span class="fu">getInteractionType</span>();</span>
<span id="cb28-16"><a href="#cb28-16"></a></span>
<span id="cb28-17"><a href="#cb28-17"></a>    <span class="co">/**</span></span>
<span id="cb28-18"><a href="#cb28-18"></a>     <span class="co">*</span> 展示视频广告</span>
<span id="cb28-19"><a href="#cb28-19"></a>     <span class="co">*/</span></span>
<span id="cb28-20"><a href="#cb28-20"></a>    <span class="at">@MainThread</span></span>
<span id="cb28-21"><a href="#cb28-21"></a>    <span class="dt">void</span> <span class="fu">showRewardVideoAd</span>(Activity var1);</span>
<span id="cb28-22"><a href="#cb28-22"></a>    </span>
<span id="cb28-23"><a href="#cb28-23"></a>     <span class="co">/**</span></span>
<span id="cb28-24"><a href="#cb28-24"></a>     <span class="co">*</span> 展示广告</span>
<span id="cb28-25"><a href="#cb28-25"></a>     <span class="co">* </span><span class="an">@param activity </span> 宿主activity</span>
<span id="cb28-26"><a href="#cb28-26"></a>     <span class="co">*</span> <span class="an">@param ritScenes </span>广告展示的场景</span>
<span id="cb28-27"><a href="#cb28-27"></a>     <span class="co">*</span> <span class="an">@param scenes </span>   广告展示场景为 CUSTOMIZE_SCENES 时，自定义的场景信息</span>
<span id="cb28-28"><a href="#cb28-28"></a>     <span class="co">*/</span></span>
<span id="cb28-29"><a href="#cb28-29"></a>    <span class="dt">void</span> <span class="fu">showRewardVideoAd</span>(Activity activity,TTAdConstant.<span class="fu">RitScenes</span> ritScenes,<span class="bu">String</span> scenes);</span>
<span id="cb28-30"><a href="#cb28-30"></a></span>
<span id="cb28-31"><a href="#cb28-31"></a>    <span class="co">/**</span></span>
<span id="cb28-32"><a href="#cb28-32"></a>     <span class="co">*</span> 设置是否在视频播放页面展示下载bar</span>
<span id="cb28-33"><a href="#cb28-33"></a>     <span class="co">*/</span></span>
<span id="cb28-34"><a href="#cb28-34"></a>    <span class="dt">void</span> <span class="fu">setShowDownLoadBar</span>(<span class="dt">boolean</span> var1);</span>
<span id="cb28-35"><a href="#cb28-35"></a>    </span>
<span id="cb28-36"><a href="#cb28-36"></a>    </span>
<span id="cb28-37"><a href="#cb28-37"></a>   <span class="co">/**</span></span>
<span id="cb28-38"><a href="#cb28-38"></a>     <span class="co">*</span> 返回广告真实类型：</span>
<span id="cb28-39"><a href="#cb28-39"></a>     <span class="co">*</span> TTAdConstant<span class="co">.</span>AD_TYPE_UNKNOWN <span class="co">//</span>未知类型</span>
<span id="cb28-40"><a href="#cb28-40"></a>     <span class="co">*</span> TTAdConstant<span class="co">.</span>AD_TYPE_COMMON_VIDEO <span class="co">//</span>普通视频类型</span>
<span id="cb28-41"><a href="#cb28-41"></a>     <span class="co">*</span> TTAdConstant<span class="co">.</span>AD_TYPE_PLAYABLE_VIDEO <span class="co">//</span>video <span class="co">+</span> playable 类型</span>
<span id="cb28-42"><a href="#cb28-42"></a>     <span class="co">*</span> TTAdConstant<span class="co">.</span>AD_TYPE_PLAYABLE <span class="co">//</span>playable类型</span>
<span id="cb28-43"><a href="#cb28-43"></a>     <span class="co">* @</span>return</span>
<span id="cb28-44"><a href="#cb28-44"></a>     <span class="co">*/</span></span>
<span id="cb28-45"><a href="#cb28-45"></a>   <span class="dt">int</span> <span class="fu">getRewardVideoAdType</span>();</span>
<span id="cb28-46"><a href="#cb28-46"></a></span>
<span id="cb28-47"><a href="#cb28-47"></a></span>
<span id="cb28-48"><a href="#cb28-48"></a>    <span class="co">/**</span></span>
<span id="cb28-49"><a href="#cb28-49"></a>     <span class="co">*</span> 视频交互回调接口</span>
<span id="cb28-50"><a href="#cb28-50"></a>     <span class="co">*/</span></span>
<span id="cb28-51"><a href="#cb28-51"></a>    <span class="kw">public</span> <span class="kw">interface</span> RewardAdInteractionListener {</span>
<span id="cb28-52"><a href="#cb28-52"></a>        <span class="co">//视频广告展示回调</span></span>
<span id="cb28-53"><a href="#cb28-53"></a>        <span class="dt">void</span> <span class="fu">onAdShow</span>();</span>
<span id="cb28-54"><a href="#cb28-54"></a></span>
<span id="cb28-55"><a href="#cb28-55"></a>        <span class="co">//广告的下载bar点击回调</span></span>
<span id="cb28-56"><a href="#cb28-56"></a>        <span class="dt">void</span> <span class="fu">onAdVideoBarClick</span>();</span>
<span id="cb28-57"><a href="#cb28-57"></a></span>
<span id="cb28-58"><a href="#cb28-58"></a>        <span class="co">//视频广告关闭回调</span></span>
<span id="cb28-59"><a href="#cb28-59"></a>        <span class="dt">void</span> <span class="fu">onAdClose</span>();</span>
<span id="cb28-60"><a href="#cb28-60"></a></span>
<span id="cb28-61"><a href="#cb28-61"></a>        <span class="co">//视频广告播放完毕回调</span></span>
<span id="cb28-62"><a href="#cb28-62"></a>        <span class="dt">void</span> <span class="fu">onVideoComplete</span>();</span>
<span id="cb28-63"><a href="#cb28-63"></a></span>
<span id="cb28-64"><a href="#cb28-64"></a>        <span class="co">//视频广告播完验证奖励有效性回调，参数分别为是否有效，奖励数量，奖励名称</span></span>
<span id="cb28-65"><a href="#cb28-65"></a>        <span class="dt">void</span> <span class="fu">onRewardVerify</span>(<span class="dt">boolean</span> var1, <span class="dt">int</span> var2, <span class="bu">String</span> var3);</span>
<span id="cb28-66"><a href="#cb28-66"></a>    }</span>
<span id="cb28-67"><a href="#cb28-67"></a>}</span></code></pre></div>
<h4 id="加载激励视频广告">2.7.2 加载激励视频广告</h4>
<p>接入方可调用TTAdNative.loadRewardVideoAdA（dSlot var1, <span class="citation" data-cites="NonNull">@NonNull</span> TTAdNative.RewardVideoAdListener var2)异步加载激励视频广告，adslot为请求广告的信息，RewardVideoAdListener为广告加载成功或失败的回调。</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb29-1"><a href="#cb29-1"></a>AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb29-2"><a href="#cb29-2"></a>                .<span class="fu">setCodeId</span>(<span class="st">&quot;901121430&quot;</span>)</span>
<span id="cb29-3"><a href="#cb29-3"></a>                .<span class="fu">setAdCount</span>(<span class="dv">2</span>)</span>
<span id="cb29-4"><a href="#cb29-4"></a>                <span class="co">//个性化模板广告需要设置期望个性化模板广告的大小,单位dp,激励视频场景，只要设置的值大于0即可</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>                .<span class="fu">setExpressViewAcceptedSize</span>(<span class="dv">500</span>,<span class="dv">500</span>)</span>
<span id="cb29-6"><a href="#cb29-6"></a>                .<span class="fu">setImageAcceptedSize</span>(<span class="dv">1080</span>, <span class="dv">1920</span>)</span>
<span id="cb29-7"><a href="#cb29-7"></a>                <span class="co">//非必传参数，仅奖励发放服务端回调时需要使用</span></span>
<span id="cb29-8"><a href="#cb29-8"></a>                .<span class="fu">setUserID</span>(<span class="st">&quot;user123&quot;</span>)</span>
<span id="cb29-9"><a href="#cb29-9"></a>                 <span class="co">//非必传参数，仅奖励发放服务端回调时需要使用</span></span>
<span id="cb29-10"><a href="#cb29-10"></a>                .<span class="fu">setMediaExtra</span>(<span class="st">&quot;media_extra&quot;</span>)</span>
<span id="cb29-11"><a href="#cb29-11"></a>                .<span class="fu">build</span>();</span>
<span id="cb29-12"><a href="#cb29-12"></a>        mTTAdNative.<span class="fu">loadRewardVideoAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">RewardVideoAdListener</span>() {</span>
<span id="cb29-13"><a href="#cb29-13"></a>            <span class="at">@Override</span></span>
<span id="cb29-14"><a href="#cb29-14"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb29-15"><a href="#cb29-15"></a>                Toast.<span class="fu">makeText</span>(RewardVideoActivity.<span class="fu">this</span>, message, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb29-16"><a href="#cb29-16"></a>            }</span>
<span id="cb29-17"><a href="#cb29-17"></a>            <span class="co">//视频广告加载后的视频文件资源缓存到本地的回调</span></span>
<span id="cb29-18"><a href="#cb29-18"></a>            <span class="at">@Override</span></span>
<span id="cb29-19"><a href="#cb29-19"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRewardVideoCached</span>() {</span>
<span id="cb29-20"><a href="#cb29-20"></a>                mIsLoaded = <span class="kw">true</span>;</span>
<span id="cb29-21"><a href="#cb29-21"></a>                Toast.<span class="fu">makeText</span>(RewardVideoActivity.<span class="fu">this</span>, <span class="st">&quot;rewardVideoAd video cached&quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb29-22"><a href="#cb29-22"></a>            }</span>
<span id="cb29-23"><a href="#cb29-23"></a>            <span class="co">//视频广告素材加载到，如title,视频url等，不包括视频文件</span></span>
<span id="cb29-24"><a href="#cb29-24"></a>            <span class="at">@Override</span></span>
<span id="cb29-25"><a href="#cb29-25"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRewardVideoAdLoad</span>(TTRewardVideoAd ad) {</span>
<span id="cb29-26"><a href="#cb29-26"></a>                Toast.<span class="fu">makeText</span>(RewardVideoActivity.<span class="fu">this</span>, <span class="st">&quot;rewardVideoAd loaded&quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb29-27"><a href="#cb29-27"></a>                mIsLoaded = <span class="kw">false</span>;</span>
<span id="cb29-28"><a href="#cb29-28"></a>                mttRewardVideoAd = ad;</span>
<span id="cb29-29"><a href="#cb29-29"></a>                <span class="co">//mttRewardVideoAd.setShowDownLoadBar(false);</span></span>
<span id="cb29-30"><a href="#cb29-30"></a>                mttRewardVideoAd.<span class="fu">setRewardAdInteractionListener</span>(<span class="kw">new</span> TTRewardVideoAd.<span class="fu">RewardAdInteractionListener</span>() {</span>
<span id="cb29-31"><a href="#cb29-31"></a></span>
<span id="cb29-32"><a href="#cb29-32"></a>                    <span class="at">@Override</span></span>
<span id="cb29-33"><a href="#cb29-33"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdShow</span>() {</span>
<span id="cb29-34"><a href="#cb29-34"></a>                        Toast.<span class="fu">makeText</span>(RewardVideoActivity.<span class="fu">this</span>, <span class="st">&quot;rewardVideoAd show&quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb29-35"><a href="#cb29-35"></a>                    }</span>
<span id="cb29-36"><a href="#cb29-36"></a></span>
<span id="cb29-37"><a href="#cb29-37"></a>                    <span class="at">@Override</span></span>
<span id="cb29-38"><a href="#cb29-38"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdVideoBarClick</span>() {</span>
<span id="cb29-39"><a href="#cb29-39"></a>                        Toast.<span class="fu">makeText</span>(RewardVideoActivity.<span class="fu">this</span>, <span class="st">&quot;rewardVideoAd bar click&quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb29-40"><a href="#cb29-40"></a>                    }</span>
<span id="cb29-41"><a href="#cb29-41"></a></span>
<span id="cb29-42"><a href="#cb29-42"></a>                    <span class="at">@Override</span></span>
<span id="cb29-43"><a href="#cb29-43"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdClose</span>() {</span>
<span id="cb29-44"><a href="#cb29-44"></a>                        Toast.<span class="fu">makeText</span>(RewardVideoActivity.<span class="fu">this</span>, <span class="st">&quot;rewardVideoAd close&quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb29-45"><a href="#cb29-45"></a>                    }</span>
<span id="cb29-46"><a href="#cb29-46"></a></span>
<span id="cb29-47"><a href="#cb29-47"></a>                    <span class="at">@Override</span></span>
<span id="cb29-48"><a href="#cb29-48"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoComplete</span>() {</span>
<span id="cb29-49"><a href="#cb29-49"></a>                        Toast.<span class="fu">makeText</span>(RewardVideoActivity.<span class="fu">this</span>, <span class="st">&quot;rewardVideoAd complete&quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb29-50"><a href="#cb29-50"></a>                    }</span>
<span id="cb29-51"><a href="#cb29-51"></a></span>
<span id="cb29-52"><a href="#cb29-52"></a>                    <span class="at">@Override</span></span>
<span id="cb29-53"><a href="#cb29-53"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRewardVerify</span>(<span class="dt">boolean</span> rewardVerify, <span class="dt">int</span> rewardAmount, <span class="bu">String</span> rewardName) {</span>
<span id="cb29-54"><a href="#cb29-54"></a>                        Toast.<span class="fu">makeText</span>(RewardVideoActivity.<span class="fu">this</span>, <span class="st">&quot;verify:&quot;</span>+rewardVerify+<span class="st">&quot; amount:&quot;</span>+rewardAmount+</span>
<span id="cb29-55"><a href="#cb29-55"></a>                                <span class="st">&quot; name:&quot;</span>+rewardName,</span>
<span id="cb29-56"><a href="#cb29-56"></a>                                Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb29-57"><a href="#cb29-57"></a>                    }</span>
<span id="cb29-58"><a href="#cb29-58"></a>                });</span>
<span id="cb29-59"><a href="#cb29-59"></a>                mttRewardVideoAd.<span class="fu">setDownloadListener</span>(<span class="kw">new</span> <span class="fu">TTAppDownloadListener</span>() {</span>
<span id="cb29-60"><a href="#cb29-60"></a>                    <span class="at">@Override</span></span>
<span id="cb29-61"><a href="#cb29-61"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onIdle</span>() {</span>
<span id="cb29-62"><a href="#cb29-62"></a></span>
<span id="cb29-63"><a href="#cb29-63"></a>                    }</span>
<span id="cb29-64"><a href="#cb29-64"></a></span>
<span id="cb29-65"><a href="#cb29-65"></a>                    <span class="at">@Override</span></span>
<span id="cb29-66"><a href="#cb29-66"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadActive</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb29-67"><a href="#cb29-67"></a></span>
<span id="cb29-68"><a href="#cb29-68"></a>                    }</span>
<span id="cb29-69"><a href="#cb29-69"></a></span>
<span id="cb29-70"><a href="#cb29-70"></a>                    <span class="at">@Override</span></span>
<span id="cb29-71"><a href="#cb29-71"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadPaused</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb29-72"><a href="#cb29-72"></a></span>
<span id="cb29-73"><a href="#cb29-73"></a>                    }</span>
<span id="cb29-74"><a href="#cb29-74"></a></span>
<span id="cb29-75"><a href="#cb29-75"></a>                    <span class="at">@Override</span></span>
<span id="cb29-76"><a href="#cb29-76"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadFailed</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb29-77"><a href="#cb29-77"></a></span>
<span id="cb29-78"><a href="#cb29-78"></a>                    }</span>
<span id="cb29-79"><a href="#cb29-79"></a></span>
<span id="cb29-80"><a href="#cb29-80"></a>                    <span class="at">@Override</span></span>
<span id="cb29-81"><a href="#cb29-81"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadFinished</span>(<span class="dt">long</span> totalBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb29-82"><a href="#cb29-82"></a></span>
<span id="cb29-83"><a href="#cb29-83"></a>                    }</span>
<span id="cb29-84"><a href="#cb29-84"></a></span>
<span id="cb29-85"><a href="#cb29-85"></a>                    <span class="at">@Override</span></span>
<span id="cb29-86"><a href="#cb29-86"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onInstalled</span>(<span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb29-87"><a href="#cb29-87"></a></span>
<span id="cb29-88"><a href="#cb29-88"></a>                    }</span>
<span id="cb29-89"><a href="#cb29-89"></a>                });</span>
<span id="cb29-90"><a href="#cb29-90"></a>            }</span>
<span id="cb29-91"><a href="#cb29-91"></a>        });</span></code></pre></div>
<h4 id="展示视频广告">2.7.3 展示视频广告</h4>
<p>接入方可调用TTAdNative.loadRewardVideoAdA（dSlot var1, <span class="citation" data-cites="NonNull">@NonNull</span> TTAdNative.RewardVideoAdListener var2)异步加载激励视频广告，adslot为请求广告的信息，RewardVideoAdListener为广告加载成功或失败的回调。</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb30-1"><a href="#cb30-1"></a>mttRewardVideoAd.<span class="fu">showRewardVideoAd</span>(RewardVideoActivity.<span class="fu">this</span>);</span></code></pre></div>
<p>具体使用请参考demo示例。</p>
<h4 id="服务器到服务器回调">2.7.4 服务器到服务器回调</h4>
<p>服务器到服务器回调让您判定是否提供奖励给观看广告的用户。当用户成功看完广告时，您可以在头条媒体平台配置从头条服务器到您自己的服务器的回调链接，以通知您用户完成了操作。</p>
<h5 id="回调方式说明">回调方式说明</h5>
<p>头条服务器会以 GET 方式请求第三方服务的回调链接，并拼接以下参数回传：</p>
<p><code>user_id=%s&amp;trans_id=%s&amp;reward_name=%s&amp;reward_amount=%d&amp;extra=%s&amp;sign=%s</code></p>
<table>
<thead>
<tr class="header">
<th>字段名称</th>
<th>字段定义</th>
<th>字段类型</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>sign</td>
<td>签名</td>
<td>string</td>
<td>签名</td>
</tr>
<tr class="even">
<td>user_id</td>
<td>用户id</td>
<td>string</td>
<td>调用SDK透传，应用对用户的唯一标识</td>
</tr>
<tr class="odd">
<td>trans_id</td>
<td>交易id</td>
<td>string</td>
<td>完成观看的唯一交易ID</td>
</tr>
<tr class="even">
<td>reward_amount</td>
<td>奖励数量</td>
<td>int</td>
<td>媒体平台配置或调用SDK传入</td>
</tr>
<tr class="odd">
<td>reward_name</td>
<td>奖励名称</td>
<td>string</td>
<td>媒体平台配置或调用SDK传入</td>
</tr>
<tr class="even">
<td>extra</td>
<td>Extra</td>
<td>string</td>
<td>调用SDK传入并透传，如无需要则为空</td>
</tr>
</tbody>
</table>
<h5 id="签名生成方式">签名生成方式</h5>
<p>appSecurityKey: 您在头条媒体平台新建奖励视频代码位获取到的密钥 transId：交易id sign = sha256(appSecurityKey:transId)</p>
<p>Python 示例：</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1"></a><span class="im">import</span> hashlib</span>
<span id="cb31-2"><a href="#cb31-2"></a></span>
<span id="cb31-3"><a href="#cb31-3"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&quot;__main__&quot;</span>:</span>
<span id="cb31-4"><a href="#cb31-4"></a>    trans_id <span class="op">=</span> <span class="st">&quot;6FEB23ACB0374985A2A52D282EDD5361u6643&quot;</span></span>
<span id="cb31-5"><a href="#cb31-5"></a>    app_security_key <span class="op">=</span> <span class="st">&quot;7ca31ab0a59d69a42dd8abc7cf2d8fbd&quot;</span></span>
<span id="cb31-6"><a href="#cb31-6"></a>    check_sign_raw <span class="op">=</span> <span class="st">&quot;</span><span class="sc">%s</span><span class="st">:</span><span class="sc">%s</span><span class="st">&quot;</span> <span class="op">%</span> (app_security_key, trans_id)</span>
<span id="cb31-7"><a href="#cb31-7"></a>    sign <span class="op">=</span> hashlib.sha256(check_sign_raw).hexdigest()</span></code></pre></div>
<h5 id="返回约定">返回约定</h5>
<p>返回 json 数据，字段如下：</p>
<table>
<thead>
<tr class="header">
<th>字段名称</th>
<th>字段定义</th>
<th>字段类型</th>
<th>备注</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>isValid</td>
<td>校验结果</td>
<td>bool</td>
<td>判定结果，是否发放奖励</td>
</tr>
</tbody>
</table>
<p>示例：</p>
<pre><code>{
    &quot;isValid&quot;: true
}</code></pre>
<h3 id="接入全屏视频广告ttfullscreenvideoad">2.8 接入全屏视频广告（TTFullScreenVideoAd）</h3>
<p>本SDK为接入方提供全屏视频广告，该广告的效果播放全屏的视频，视频一定时间后可跳过，无需全程观看完。 支持的广告尺寸： 全屏横屏播放和竖屏，默认横屏</p>
<h4 id="ttfullscreenvideoad接口说明">2.8.1 TTFullScreenVideoAd接口说明：</h4>
<div class="sourceCode" id="cb33"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb33-1"><a href="#cb33-1"></a><span class="kw">public</span> <span class="kw">interface</span> TTFullScreenVideoAd {</span>
<span id="cb33-2"><a href="#cb33-2"></a>    <span class="co">/**</span></span>
<span id="cb33-3"><a href="#cb33-3"></a>     <span class="co">*</span> 注册插屏广告交互回调</span>
<span id="cb33-4"><a href="#cb33-4"></a>     <span class="co">*</span></span>
<span id="cb33-5"><a href="#cb33-5"></a>     <span class="co">* </span><span class="an">@param listener </span>交互监听器</span>
<span id="cb33-6"><a href="#cb33-6"></a>     <span class="co">*/</span></span>
<span id="cb33-7"><a href="#cb33-7"></a>    <span class="dt">void</span> <span class="fu">setFullScreenVideoAdInteractionListener</span>(FullScreenVideoAdInteractionListener listener);</span>
<span id="cb33-8"><a href="#cb33-8"></a></span>
<span id="cb33-9"><a href="#cb33-9"></a>    <span class="co">/**</span></span>
<span id="cb33-10"><a href="#cb33-10"></a>     <span class="co">*</span> 注册广告的下载回调</span>
<span id="cb33-11"><a href="#cb33-11"></a>     <span class="co">*</span></span>
<span id="cb33-12"><a href="#cb33-12"></a>     <span class="co">* </span><span class="an">@param listener </span>下载状态回调</span>
<span id="cb33-13"><a href="#cb33-13"></a>     <span class="co">*/</span></span>
<span id="cb33-14"><a href="#cb33-14"></a>    <span class="dt">void</span> <span class="fu">setDownloadListener</span>(TTAppDownloadListener listener);</span>
<span id="cb33-15"><a href="#cb33-15"></a></span>
<span id="cb33-16"><a href="#cb33-16"></a>    <span class="co">/**</span></span>
<span id="cb33-17"><a href="#cb33-17"></a>     <span class="co">*</span> 得到广告的交互类型</span>
<span id="cb33-18"><a href="#cb33-18"></a>     <span class="co">*</span></span>
<span id="cb33-19"><a href="#cb33-19"></a>     <span class="co">* </span><span class="an">@return </span><span class="co">2在浏览器内打开</span> （普通类型）3落地页（普通类型），<span class="co">4:</span>应用下载，5:拨打电话 <span class="co">-1</span> 未知类型</span>
<span id="cb33-20"><a href="#cb33-20"></a>     <span class="co">*/</span></span>
<span id="cb33-21"><a href="#cb33-21"></a>    <span class="dt">int</span> <span class="fu">getInteractionType</span>();</span>
<span id="cb33-22"><a href="#cb33-22"></a></span>
<span id="cb33-23"><a href="#cb33-23"></a>    <span class="co">/**</span></span>
<span id="cb33-24"><a href="#cb33-24"></a>     <span class="co">* </span><span class="an">@param activity </span>宿主activity<span class="co">,</span>用户判断宿主是否finishing</span>
<span id="cb33-25"><a href="#cb33-25"></a>     <span class="co">*/</span></span>
<span id="cb33-26"><a href="#cb33-26"></a>    <span class="at">@MainThread</span></span>
<span id="cb33-27"><a href="#cb33-27"></a>    <span class="dt">void</span> <span class="fu">showFullScreenVideoAd</span>(Activity activity);</span>
<span id="cb33-28"><a href="#cb33-28"></a>    </span>
<span id="cb33-29"><a href="#cb33-29"></a>    <span class="co">/**</span></span>
<span id="cb33-30"><a href="#cb33-30"></a>     <span class="co">*</span> 展示广告</span>
<span id="cb33-31"><a href="#cb33-31"></a>     <span class="co">* </span><span class="an">@param activity </span> 宿主activity</span>
<span id="cb33-32"><a href="#cb33-32"></a>     <span class="co">*</span> <span class="an">@param ritScenes </span>广告展示的场景</span>
<span id="cb33-33"><a href="#cb33-33"></a>     <span class="co">*</span> <span class="an">@param scenes </span>   广告展示场景为 CUSTOMIZE_SCENES 时，自定义的场景信息</span>
<span id="cb33-34"><a href="#cb33-34"></a>     <span class="co">*/</span></span>
<span id="cb33-35"><a href="#cb33-35"></a>    <span class="dt">void</span> <span class="fu">showFullScreenVideoAd</span>(Activity activity, TTAdConstant.<span class="fu">RitScenes</span> ritScenes, <span class="bu">String</span> scenes);</span>
<span id="cb33-36"><a href="#cb33-36"></a></span>
<span id="cb33-37"><a href="#cb33-37"></a>    <span class="dt">void</span> <span class="fu">setShowDownLoadBar</span>(<span class="dt">boolean</span> showDownLoadBar);</span>
<span id="cb33-38"><a href="#cb33-38"></a>    </span>
<span id="cb33-39"><a href="#cb33-39"></a>    <span class="co">/**</span></span>
<span id="cb33-40"><a href="#cb33-40"></a>     <span class="co">*</span> 返回广告真实类型：</span>
<span id="cb33-41"><a href="#cb33-41"></a>     <span class="co">*</span> TTAdConstant<span class="co">.</span>AD_TYPE_UNKNOWN <span class="co">//</span>未知类型</span>
<span id="cb33-42"><a href="#cb33-42"></a>     <span class="co">*</span> TTAdConstant<span class="co">.</span>AD_TYPE_COMMON_VIDEO <span class="co">//</span>普通视频类型</span>
<span id="cb33-43"><a href="#cb33-43"></a>     <span class="co">*</span> TTAdConstant<span class="co">.</span>AD_TYPE_PLAYABLE_VIDEO <span class="co">//</span>video <span class="co">+</span> playable 类型</span>
<span id="cb33-44"><a href="#cb33-44"></a>     <span class="co">*</span> TTAdConstant<span class="co">.</span>AD_TYPE_PLAYABLE <span class="co">//</span>playable类型</span>
<span id="cb33-45"><a href="#cb33-45"></a>     <span class="co">* @</span>return</span>
<span id="cb33-46"><a href="#cb33-46"></a>     <span class="co">*/</span></span>
<span id="cb33-47"><a href="#cb33-47"></a>    <span class="dt">int</span> <span class="fu">getFullVideoAdType</span>();</span>
<span id="cb33-48"><a href="#cb33-48"></a></span>
<span id="cb33-49"><a href="#cb33-49"></a>    <span class="co">/**</span></span>
<span id="cb33-50"><a href="#cb33-50"></a>     <span class="co">*</span> 全屏视频广告交互监听器</span>
<span id="cb33-51"><a href="#cb33-51"></a>     <span class="co">*/</span></span>
<span id="cb33-52"><a href="#cb33-52"></a>    <span class="kw">interface</span> FullScreenVideoAdInteractionListener {</span>
<span id="cb33-53"><a href="#cb33-53"></a>        <span class="co">/**</span></span>
<span id="cb33-54"><a href="#cb33-54"></a>         <span class="co">*</span> 广告的展示回调</span>
<span id="cb33-55"><a href="#cb33-55"></a>         <span class="co">*/</span></span>
<span id="cb33-56"><a href="#cb33-56"></a>        <span class="dt">void</span> <span class="fu">onAdShow</span>();</span>
<span id="cb33-57"><a href="#cb33-57"></a></span>
<span id="cb33-58"><a href="#cb33-58"></a>        <span class="co">/**</span></span>
<span id="cb33-59"><a href="#cb33-59"></a>         <span class="co">*</span> 广告的下载bar点击回调</span>
<span id="cb33-60"><a href="#cb33-60"></a>         <span class="co">*/</span></span>
<span id="cb33-61"><a href="#cb33-61"></a>        <span class="dt">void</span> <span class="fu">onAdVideoBarClick</span>();</span>
<span id="cb33-62"><a href="#cb33-62"></a></span>
<span id="cb33-63"><a href="#cb33-63"></a>        <span class="co">/**</span></span>
<span id="cb33-64"><a href="#cb33-64"></a>         <span class="co">*</span> 广告关闭的回调</span>
<span id="cb33-65"><a href="#cb33-65"></a>         <span class="co">*/</span></span>
<span id="cb33-66"><a href="#cb33-66"></a>        <span class="dt">void</span> <span class="fu">onAdClose</span>();</span>
<span id="cb33-67"><a href="#cb33-67"></a></span>
<span id="cb33-68"><a href="#cb33-68"></a>        <span class="co">/**</span></span>
<span id="cb33-69"><a href="#cb33-69"></a>         <span class="co">*</span> 视频播放完毕的回调</span>
<span id="cb33-70"><a href="#cb33-70"></a>         <span class="co">*/</span></span>
<span id="cb33-71"><a href="#cb33-71"></a>        <span class="dt">void</span> <span class="fu">onVideoComplete</span>();</span>
<span id="cb33-72"><a href="#cb33-72"></a></span>
<span id="cb33-73"><a href="#cb33-73"></a>        <span class="co">/**</span></span>
<span id="cb33-74"><a href="#cb33-74"></a>         <span class="co">*</span> 跳过视频播放</span>
<span id="cb33-75"><a href="#cb33-75"></a>         <span class="co">*/</span></span>
<span id="cb33-76"><a href="#cb33-76"></a>        <span class="dt">void</span> <span class="fu">onSkippedVideo</span>();</span>
<span id="cb33-77"><a href="#cb33-77"></a></span>
<span id="cb33-78"><a href="#cb33-78"></a>    }</span>
<span id="cb33-79"><a href="#cb33-79"></a>}</span></code></pre></div>
<h4 id="加载全屏视频广告">2.8.2 加载全屏视频广告</h4>
<p>接入方可调用<code>loadFullScreenVideoAd(AdSlot adSlot, @NonNull FullScreenVideoAdListener listener)</code>异步加载全屏视频广告，adslot为请求广告的信息，FullScreenVideoAdListener为广告加载成功或失败的回调。</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb34-1"><a href="#cb34-1"></a> <span class="co">//设置广告参数</span></span>
<span id="cb34-2"><a href="#cb34-2"></a> AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb34-3"><a href="#cb34-3"></a>                .<span class="fu">setCodeId</span>(codeId)</span>
<span id="cb34-4"><a href="#cb34-4"></a>                <span class="co">//个性化模板广告需要设置期望个性化模板广告的大小,单位dp,全屏视频场景，只要设置的值大于0即可</span></span>
<span id="cb34-5"><a href="#cb34-5"></a>                .<span class="fu">setExpressViewAcceptedSize</span>(<span class="dv">500</span>,<span class="dv">500</span>)</span>
<span id="cb34-6"><a href="#cb34-6"></a>                .<span class="fu">setImageAcceptedSize</span>(<span class="dv">1080</span>, <span class="dv">1920</span>)</span>
<span id="cb34-7"><a href="#cb34-7"></a>                .<span class="fu">build</span>();</span>
<span id="cb34-8"><a href="#cb34-8"></a>       <span class="co">//加载全屏视频</span></span>
<span id="cb34-9"><a href="#cb34-9"></a>        mTTAdNative.<span class="fu">loadFullScreenVideoAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">FullScreenVideoAdListener</span>() {</span>
<span id="cb34-10"><a href="#cb34-10"></a>            <span class="at">@Override</span></span>
<span id="cb34-11"><a href="#cb34-11"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb34-12"><a href="#cb34-12"></a>                TToast.<span class="fu">show</span>(FullScreenVideoActivity.<span class="fu">this</span>, message);</span>
<span id="cb34-13"><a href="#cb34-13"></a>            }</span>
<span id="cb34-14"><a href="#cb34-14"></a></span>
<span id="cb34-15"><a href="#cb34-15"></a>            <span class="at">@Override</span></span>
<span id="cb34-16"><a href="#cb34-16"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onFullScreenVideoAdLoad</span>(TTFullScreenVideoAd ad) {</span>
<span id="cb34-17"><a href="#cb34-17"></a>                TToast.<span class="fu">show</span>(FullScreenVideoActivity.<span class="fu">this</span>, <span class="st">&quot;FullVideoAd loaded&quot;</span>);</span>
<span id="cb34-18"><a href="#cb34-18"></a>                mIsLoaded = <span class="kw">false</span>;</span>
<span id="cb34-19"><a href="#cb34-19"></a>                mttFullVideoAd = ad;</span>
<span id="cb34-20"><a href="#cb34-20"></a>                mttFullVideoAd.<span class="fu">setFullScreenVideoAdInteractionListener</span>(<span class="kw">new</span> TTFullScreenVideoAd.<span class="fu">FullScreenVideoAdInteractionListener</span>() {</span>
<span id="cb34-21"><a href="#cb34-21"></a></span>
<span id="cb34-22"><a href="#cb34-22"></a>                    <span class="at">@Override</span></span>
<span id="cb34-23"><a href="#cb34-23"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdShow</span>() {</span>
<span id="cb34-24"><a href="#cb34-24"></a>                        TToast.<span class="fu">show</span>(FullScreenVideoActivity.<span class="fu">this</span>, <span class="st">&quot;FullVideoAd show&quot;</span>);</span>
<span id="cb34-25"><a href="#cb34-25"></a>                    }</span>
<span id="cb34-26"><a href="#cb34-26"></a></span>
<span id="cb34-27"><a href="#cb34-27"></a>                    <span class="at">@Override</span></span>
<span id="cb34-28"><a href="#cb34-28"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdVideoBarClick</span>() {</span>
<span id="cb34-29"><a href="#cb34-29"></a>                        TToast.<span class="fu">show</span>(FullScreenVideoActivity.<span class="fu">this</span>, <span class="st">&quot;FullVideoAd bar click&quot;</span>);</span>
<span id="cb34-30"><a href="#cb34-30"></a>                    }</span>
<span id="cb34-31"><a href="#cb34-31"></a></span>
<span id="cb34-32"><a href="#cb34-32"></a>                    <span class="at">@Override</span></span>
<span id="cb34-33"><a href="#cb34-33"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdClose</span>() {</span>
<span id="cb34-34"><a href="#cb34-34"></a>                        TToast.<span class="fu">show</span>(FullScreenVideoActivity.<span class="fu">this</span>, <span class="st">&quot;FullVideoAd close&quot;</span>);</span>
<span id="cb34-35"><a href="#cb34-35"></a>                    }</span>
<span id="cb34-36"><a href="#cb34-36"></a></span>
<span id="cb34-37"><a href="#cb34-37"></a>                    <span class="at">@Override</span></span>
<span id="cb34-38"><a href="#cb34-38"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onVideoComplete</span>() {</span>
<span id="cb34-39"><a href="#cb34-39"></a>                        TToast.<span class="fu">show</span>(FullScreenVideoActivity.<span class="fu">this</span>, <span class="st">&quot;FullVideoAd complete&quot;</span>);</span>
<span id="cb34-40"><a href="#cb34-40"></a>                    }</span>
<span id="cb34-41"><a href="#cb34-41"></a></span>
<span id="cb34-42"><a href="#cb34-42"></a>                    <span class="at">@Override</span></span>
<span id="cb34-43"><a href="#cb34-43"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSkippedVideo</span>() {</span>
<span id="cb34-44"><a href="#cb34-44"></a>                        TToast.<span class="fu">show</span>(FullScreenVideoActivity.<span class="fu">this</span>, <span class="st">&quot;FullVideoAd skipped&quot;</span>);</span>
<span id="cb34-45"><a href="#cb34-45"></a></span>
<span id="cb34-46"><a href="#cb34-46"></a>                    }</span>
<span id="cb34-47"><a href="#cb34-47"></a></span>
<span id="cb34-48"><a href="#cb34-48"></a>                });</span>
<span id="cb34-49"><a href="#cb34-49"></a>            }</span>
<span id="cb34-50"><a href="#cb34-50"></a></span>
<span id="cb34-51"><a href="#cb34-51"></a>            <span class="at">@Override</span></span>
<span id="cb34-52"><a href="#cb34-52"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onFullScreenVideoCached</span>() {</span>
<span id="cb34-53"><a href="#cb34-53"></a>                mIsLoaded = <span class="kw">true</span>;</span>
<span id="cb34-54"><a href="#cb34-54"></a>                TToast.<span class="fu">show</span>(FullScreenVideoActivity.<span class="fu">this</span>, <span class="st">&quot;FullVideoAd video cached&quot;</span>);</span>
<span id="cb34-55"><a href="#cb34-55"></a>            }</span>
<span id="cb34-56"><a href="#cb34-56"></a>        });</span></code></pre></div>
<h4 id="展示视频广告-1">2.8.3 展示视频广告</h4>
<div class="sourceCode" id="cb35"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb35-1"><a href="#cb35-1"></a>mttFullVideoAd.<span class="fu">showFullScreenVideoAd</span>(FullScreenVideoActivity.<span class="fu">this</span>);</span></code></pre></div>
<p>详细代码请参考demo中的FullScreenVideoActivity。</p>
<h3 id="接入draw竖版视频信息流广告ttdrawfeedad">2.9 接入Draw竖版视频信息流广告（TTDrawFeedAd）</h3>
<p>本SDK为接入方提供竖版视频信息流广告，该广告适合在竖版全屏视频流中使用，接入方可以控制视频暂停或继续播放，默认视频播放不可干预，视频广告相关配置可以在平台设置。 支持的广告尺寸： 全屏竖版。</p>
<h4 id="ttdrawfeedad接口说明">2.9.1 TTDrawFeedAd接口说明：</h4>
<div class="sourceCode" id="cb36"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb36-1"><a href="#cb36-1"></a><span class="kw">public</span> <span class="kw">interface</span> TTDrawFeedAd <span class="kw">extends</span> TTFeedAd {</span>
<span id="cb36-2"><a href="#cb36-2"></a></span>
<span id="cb36-3"><a href="#cb36-3"></a>    <span class="co">/**</span></span>
<span id="cb36-4"><a href="#cb36-4"></a>     <span class="co">*</span> 设置是否允许视频区域响应点击，并且暂停<span class="co">/</span>继续播放</span>
<span id="cb36-5"><a href="#cb36-5"></a>     <span class="co">*</span></span>
<span id="cb36-6"><a href="#cb36-6"></a>     <span class="co">* </span><span class="an">@param canInterruptVideoPlay </span>true 可以影响点击<span class="co">,</span> 默认为false</span>
<span id="cb36-7"><a href="#cb36-7"></a>     <span class="co">*/</span></span>
<span id="cb36-8"><a href="#cb36-8"></a>    <span class="dt">void</span> <span class="fu">setCanInterruptVideoPlay</span>(<span class="dt">boolean</span> canInterruptVideoPlay);</span>
<span id="cb36-9"><a href="#cb36-9"></a></span>
<span id="cb36-10"><a href="#cb36-10"></a>    <span class="co">/**</span></span>
<span id="cb36-11"><a href="#cb36-11"></a>     <span class="co">*</span> 设置暂停图标和大小</span>
<span id="cb36-12"><a href="#cb36-12"></a>     <span class="co">*</span></span>
<span id="cb36-13"><a href="#cb36-13"></a>     <span class="co">* </span><span class="an">@param pauseIcon</span></span>
<span id="cb36-14"><a href="#cb36-14"></a>     <span class="co">*</span> <span class="an">@param size </span> 单位为dp<span class="co">,</span> <span class="co">20</span> 到 <span class="co">200之间,</span>默认为 <span class="co">50</span></span>
<span id="cb36-15"><a href="#cb36-15"></a>     <span class="co">*/</span></span>
<span id="cb36-16"><a href="#cb36-16"></a>    <span class="dt">void</span> <span class="fu">setPauseIcon</span>(Bitmap pauseIcon, <span class="dt">int</span> size);</span>
<span id="cb36-17"><a href="#cb36-17"></a></span>
<span id="cb36-18"><a href="#cb36-18"></a>     <span class="co">/**</span></span>
<span id="cb36-19"><a href="#cb36-19"></a>     <span class="co">*</span> draw视频监听回调</span>
<span id="cb36-20"><a href="#cb36-20"></a>     <span class="co">* </span><span class="an">@param listener</span></span>
<span id="cb36-21"><a href="#cb36-21"></a>     <span class="co">*/</span></span>
<span id="cb36-22"><a href="#cb36-22"></a>    <span class="dt">void</span> <span class="fu">setDrawVideoListener</span>(DrawVideoListener listener);</span>
<span id="cb36-23"><a href="#cb36-23"></a></span>
<span id="cb36-24"><a href="#cb36-24"></a>    <span class="kw">interface</span> DrawVideoListener{</span>
<span id="cb36-25"><a href="#cb36-25"></a>        <span class="co">/**</span></span>
<span id="cb36-26"><a href="#cb36-26"></a>         <span class="co">*</span> 点击重试按钮</span>
<span id="cb36-27"><a href="#cb36-27"></a>         <span class="co">*/</span></span>
<span id="cb36-28"><a href="#cb36-28"></a>        <span class="dt">void</span> <span class="fu">onClickRetry</span>();</span>
<span id="cb36-29"><a href="#cb36-29"></a></span>
<span id="cb36-30"><a href="#cb36-30"></a>        <span class="co">/**</span></span>
<span id="cb36-31"><a href="#cb36-31"></a>         <span class="co">*</span> 点击查看详情或下载按钮</span>
<span id="cb36-32"><a href="#cb36-32"></a>         <span class="co">*/</span></span>
<span id="cb36-33"><a href="#cb36-33"></a>        <span class="dt">void</span> <span class="fu">onClick</span>();</span>
<span id="cb36-34"><a href="#cb36-34"></a>    }</span>
<span id="cb36-35"><a href="#cb36-35"></a></span>
<span id="cb36-36"><a href="#cb36-36"></a>}</span></code></pre></div>
<p>接口中其他方法请参考TTFeedAd接口。</p>
<h4 id="加载draw竖版视频信息流广告">2.9.2 加载Draw竖版视频信息流广告</h4>
<p>接入方可调用<code>loadDrawFeedAd(AdSlot adSlot, @NonNull DrawFeedAdListener listener)</code>异步加载广告，adslot为请求广告的信息，DrawFeedAdListener为广告加载成功或失败的回调。</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb37-1"><a href="#cb37-1"></a> <span class="co">//设置广告参数</span></span>
<span id="cb37-2"><a href="#cb37-2"></a>  AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb37-3"><a href="#cb37-3"></a>                .<span class="fu">setCodeId</span>(<span class="st">&quot;901121709&quot;</span>) <span class="co">//开发者申请的广告位</span></span>
<span id="cb37-4"><a href="#cb37-4"></a>                .<span class="fu">setImageAcceptedSize</span>(<span class="dv">1080</span>, <span class="dv">1920</span>) <span class="co">//符合广告场景的广告尺寸</span></span>
<span id="cb37-5"><a href="#cb37-5"></a>                .<span class="fu">setAdCount</span>(<span class="dv">1</span>) <span class="co">//请求广告数量为1到3条</span></span>
<span id="cb37-6"><a href="#cb37-6"></a>                .<span class="fu">build</span>();</span>
<span id="cb37-7"><a href="#cb37-7"></a>       <span class="co">//加载广告</span></span>
<span id="cb37-8"><a href="#cb37-8"></a>         mTTAdNative.<span class="fu">loadDrawFeedAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">DrawFeedAdListener</span>() {</span>
<span id="cb37-9"><a href="#cb37-9"></a>            <span class="at">@Override</span></span>
<span id="cb37-10"><a href="#cb37-10"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb37-11"><a href="#cb37-11"></a>                Log.<span class="fu">d</span>(TAG, message);</span>
<span id="cb37-12"><a href="#cb37-12"></a>                mHasLoaded = <span class="kw">true</span>;</span>
<span id="cb37-13"><a href="#cb37-13"></a>                <span class="fu">showToast</span>(message);</span>
<span id="cb37-14"><a href="#cb37-14"></a>            }</span>
<span id="cb37-15"><a href="#cb37-15"></a></span>
<span id="cb37-16"><a href="#cb37-16"></a>            <span class="at">@Override</span></span>
<span id="cb37-17"><a href="#cb37-17"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDrawFeedAdLoad</span>(<span class="bu">List</span>&lt;TTDrawFeedAd&gt; ads) {</span>
<span id="cb37-18"><a href="#cb37-18"></a>                mHasLoaded = <span class="kw">true</span>;</span>
<span id="cb37-19"><a href="#cb37-19"></a>                <span class="kw">if</span> (ads == <span class="kw">null</span> || ads.<span class="fu">isEmpty</span>()) {</span>
<span id="cb37-20"><a href="#cb37-20"></a>                    TToast.<span class="fu">show</span>(NativeVerticalVideoActivity.<span class="fu">this</span>, <span class="st">&quot; ad is null!&quot;</span>);</span>
<span id="cb37-21"><a href="#cb37-21"></a>                    <span class="kw">return</span>;</span>
<span id="cb37-22"><a href="#cb37-22"></a>                }</span>
<span id="cb37-23"><a href="#cb37-23"></a>                <span class="co">//为广告设置activity对象，下载相关行为需要该context对象</span></span>
<span id="cb37-24"><a href="#cb37-24"></a>                <span class="kw">for</span> (TTDrawFeedAd ad : ads) {</span>
<span id="cb37-25"><a href="#cb37-25"></a>                    ad.<span class="fu">setActivityForDownloadApp</span>(NativeVerticalVideoActivity.<span class="fu">this</span>);</span>
<span id="cb37-26"><a href="#cb37-26"></a>                    <span class="co">//点击监听器必须在getAdView之前调</span></span>
<span id="cb37-27"><a href="#cb37-27"></a>                    ad.<span class="fu">setDrawVideoListener</span>(<span class="kw">new</span> TTDrawFeedAd.<span class="fu">DrawVideoListener</span>() {</span>
<span id="cb37-28"><a href="#cb37-28"></a>                        <span class="at">@Override</span></span>
<span id="cb37-29"><a href="#cb37-29"></a>                        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onClickRetry</span>() {</span>
<span id="cb37-30"><a href="#cb37-30"></a>                            TToast.<span class="fu">show</span>(DrawNativeVideoActivity.<span class="fu">this</span>, <span class="st">&quot; onClickRetry !&quot;</span>);</span>
<span id="cb37-31"><a href="#cb37-31"></a>                            Log.<span class="fu">d</span>(<span class="st">&quot;drawss&quot;</span>, <span class="st">&quot;onClickRetry!&quot;</span>);</span>
<span id="cb37-32"><a href="#cb37-32"></a>                        }</span>
<span id="cb37-33"><a href="#cb37-33"></a></span>
<span id="cb37-34"><a href="#cb37-34"></a>                        <span class="at">@Override</span></span>
<span id="cb37-35"><a href="#cb37-35"></a>                        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onClick</span>() {</span>
<span id="cb37-36"><a href="#cb37-36"></a>                            Log.<span class="fu">d</span>(<span class="st">&quot;drawss&quot;</span>, <span class="st">&quot;onClick download or view detail page ! !&quot;</span>);</span>
<span id="cb37-37"><a href="#cb37-37"></a>                            TToast.<span class="fu">show</span>(DrawNativeVideoActivity.<span class="fu">this</span>, <span class="st">&quot; setDrawVideoListener click download or view detail page !&quot;</span>);</span>
<span id="cb37-38"><a href="#cb37-38"></a>                        }</span>
<span id="cb37-39"><a href="#cb37-39"></a>                    });</span>
<span id="cb37-40"><a href="#cb37-40"></a>                }</span>
<span id="cb37-41"><a href="#cb37-41"></a>                <span class="co">//设置广告视频区域是否响应点击行为，控制视频暂停、继续播放，默认不响应；</span></span>
<span id="cb37-42"><a href="#cb37-42"></a>                ads.<span class="fu">get</span>(<span class="dv">0</span>).<span class="fu">setCanInterruptVideoPlay</span>(<span class="kw">true</span>);</span>
<span id="cb37-43"><a href="#cb37-43"></a>                <span class="co">//设置视频暂停的Icon和大小</span></span>
<span id="cb37-44"><a href="#cb37-44"></a>                ads.<span class="fu">get</span>(<span class="dv">0</span>).<span class="fu">setPauseIcon</span>(BitmapFactory.<span class="fu">decodeResource</span>(mContext.<span class="fu">getResources</span>(),R.<span class="fu">drawable</span>.<span class="fu">dislike_icon</span>), <span class="dv">60</span>);</span>
<span id="cb37-45"><a href="#cb37-45"></a>                <span class="co">//获取广告视频播放的view并放入广告容器中</span></span>
<span id="cb37-46"><a href="#cb37-46"></a>                mAdContainer.<span class="fu">addView</span>(ads.<span class="fu">get</span>(<span class="dv">0</span>).<span class="fu">getAdView</span>());</span>
<span id="cb37-47"><a href="#cb37-47"></a>                <span class="co">//初始化并绑定广告行为</span></span>
<span id="cb37-48"><a href="#cb37-48"></a>                <span class="fu">initAdViewAndAction</span>(ads.<span class="fu">get</span>(<span class="dv">0</span>));</span>
<span id="cb37-49"><a href="#cb37-49"></a>            }</span>
<span id="cb37-50"><a href="#cb37-50"></a>        });</span>
<span id="cb37-51"><a href="#cb37-51"></a>    }</span>
<span id="cb37-52"><a href="#cb37-52"></a>    <span class="co">//绑定广告行为</span></span>
<span id="cb37-53"><a href="#cb37-53"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">initAdViewAndAction</span>(TTDrawFeedAd ad){</span>
<span id="cb37-54"><a href="#cb37-54"></a>        <span class="bu">Button</span> action = <span class="kw">new</span> <span class="bu">Button</span>(<span class="kw">this</span>);</span>
<span id="cb37-55"><a href="#cb37-55"></a>        action.<span class="fu">setText</span>(ad.<span class="fu">getButtonText</span>());</span>
<span id="cb37-56"><a href="#cb37-56"></a>        <span class="bu">Button</span> btTitle = <span class="kw">new</span> <span class="bu">Button</span>(<span class="kw">this</span>);</span>
<span id="cb37-57"><a href="#cb37-57"></a>        btTitle.<span class="fu">setText</span>(ad.<span class="fu">getTitle</span>());</span>
<span id="cb37-58"><a href="#cb37-58"></a></span>
<span id="cb37-59"><a href="#cb37-59"></a>        <span class="co">//其他代码略</span></span>
<span id="cb37-60"><a href="#cb37-60"></a></span>
<span id="cb37-61"><a href="#cb37-61"></a>        <span class="co">//响应点击区域的设置，分为普通的区域clickViews和创意区域creativeViews</span></span>
<span id="cb37-62"><a href="#cb37-62"></a>        <span class="co">//clickViews中的view被点击会尝试打开广告落地页；creativeViews中的view被点击会根据广告类型</span></span>
<span id="cb37-63"><a href="#cb37-63"></a>        <span class="co">//响应对应行为，如下载类广告直接下载，打开落地页类广告直接打开落地页。</span></span>
<span id="cb37-64"><a href="#cb37-64"></a>        <span class="co">//注意：ad.getAdView()获取的view请勿放入这两个区域中。</span></span>
<span id="cb37-65"><a href="#cb37-65"></a>        <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; clickViews = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;&gt;();</span>
<span id="cb37-66"><a href="#cb37-66"></a>        clickViews.<span class="fu">add</span>(btTitle);</span>
<span id="cb37-67"><a href="#cb37-67"></a>        <span class="bu">List</span>&lt;<span class="bu">View</span>&gt; creativeViews = <span class="kw">new</span> <span class="bu">ArrayList</span>&lt;&gt;();</span>
<span id="cb37-68"><a href="#cb37-68"></a>        creativeViews.<span class="fu">add</span>(action);</span>
<span id="cb37-69"><a href="#cb37-69"></a>        ad.<span class="fu">registerViewForInteraction</span>(mAdContainer, clickViews, creativeViews, <span class="kw">new</span> TTNativeAd.<span class="fu">AdInteractionListener</span>() {</span>
<span id="cb37-70"><a href="#cb37-70"></a>            <span class="at">@Override</span></span>
<span id="cb37-71"><a href="#cb37-71"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdClicked</span>(<span class="bu">View</span> view, TTNativeAd ad) {</span>
<span id="cb37-72"><a href="#cb37-72"></a>                <span class="fu">showToast</span>(<span class="st">&quot;onAdClicked&quot;</span>);</span>
<span id="cb37-73"><a href="#cb37-73"></a>            }</span>
<span id="cb37-74"><a href="#cb37-74"></a></span>
<span id="cb37-75"><a href="#cb37-75"></a>            <span class="at">@Override</span></span>
<span id="cb37-76"><a href="#cb37-76"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdCreativeClick</span>(<span class="bu">View</span> view, TTNativeAd ad) {</span>
<span id="cb37-77"><a href="#cb37-77"></a>                <span class="fu">showToast</span>(<span class="st">&quot;onAdCreativeClick&quot;</span>);</span>
<span id="cb37-78"><a href="#cb37-78"></a>            }</span>
<span id="cb37-79"><a href="#cb37-79"></a></span>
<span id="cb37-80"><a href="#cb37-80"></a>            <span class="at">@Override</span></span>
<span id="cb37-81"><a href="#cb37-81"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdShow</span>(TTNativeAd ad) {</span>
<span id="cb37-82"><a href="#cb37-82"></a>                <span class="fu">showToast</span>(<span class="st">&quot;onAdShow&quot;</span>);</span>
<span id="cb37-83"><a href="#cb37-83"></a>            }</span>
<span id="cb37-84"><a href="#cb37-84"></a>        });</span>
<span id="cb37-85"><a href="#cb37-85"></a></span>
<span id="cb37-86"><a href="#cb37-86"></a></span>
<span id="cb37-87"><a href="#cb37-87"></a>    }</span></code></pre></div>
<h4 id="展示视频广告-2">2.9.3 展示视频广告</h4>
<div class="sourceCode" id="cb38"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb38-1"><a href="#cb38-1"></a>mAdContainer.<span class="fu">addView</span>(ads.<span class="fu">get</span>(<span class="dv">0</span>).<span class="fu">getAdView</span>());</span></code></pre></div>
<p>通过getAdView()获取广告视频部分的view放入指定容器中，接入方同时可以获取其他广告信息，比如title、buttonText等信息，自定义绘制整个广告区域，可以和自己的应用的样式风格尽可能的接近，更加原生化。</p>
<p>详细代码请参考demo中的NativeVerticalVideoActivity以及DrawNativeVideoActivity。</p>
<h3 id="接入个性化模板信息流广告ttnativeexpressad">2.10 接入个性化模板信息流广告（TTNativeExpressAd）</h3>
<p>本SDK为接入方提供个性化模板信息流广告，支持图文和视频样式，开发者不用自行对广告样式进行编辑和渲染，可直接调用相关接口获取广告view,广告样式模板以及微调后期支持开发者编辑。</p>
<h4 id="ttnativeexpressad接口说明">2.10.1 TTNativeExpressAd接口说明：</h4>
<div class="sourceCode" id="cb39"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb39-1"><a href="#cb39-1"></a><span class="co">/**</span></span>
<span id="cb39-2"><a href="#cb39-2"></a> <span class="co">*</span> 个性化模板信息流广告实体类的操作接口</span>
<span id="cb39-3"><a href="#cb39-3"></a> <span class="co">*/</span></span>
<span id="cb39-4"><a href="#cb39-4"></a><span class="kw">public</span> <span class="kw">interface</span> TTNativeExpressAd {</span>
<span id="cb39-5"><a href="#cb39-5"></a></span>
<span id="cb39-6"><a href="#cb39-6"></a>    <span class="co">/**</span></span>
<span id="cb39-7"><a href="#cb39-7"></a>     <span class="co">*</span> 得到个性化模板信息流广告广告view</span>
<span id="cb39-8"><a href="#cb39-8"></a>     <span class="co">*</span></span>
<span id="cb39-9"><a href="#cb39-9"></a>     <span class="co">* @</span>return</span>
<span id="cb39-10"><a href="#cb39-10"></a>     <span class="co">*/</span></span>
<span id="cb39-11"><a href="#cb39-11"></a>    <span class="bu">View</span> <span class="fu">getExpressAdView</span>();</span>
<span id="cb39-12"><a href="#cb39-12"></a></span>
<span id="cb39-13"><a href="#cb39-13"></a>    <span class="co">/**</span></span>
<span id="cb39-14"><a href="#cb39-14"></a>     <span class="co">*</span> 得到原生广告图片模式</span>
<span id="cb39-15"><a href="#cb39-15"></a>     <span class="co">*</span></span>
<span id="cb39-16"><a href="#cb39-16"></a>     <span class="co">* </span><span class="an">@return </span><span class="co">3</span> 大图 <span class="co">2小图</span> <span class="co">4</span> 组图 <span class="co">5</span> 视频 其它：未知类型</span>
<span id="cb39-17"><a href="#cb39-17"></a>     <span class="co">*/</span></span>
<span id="cb39-18"><a href="#cb39-18"></a>    <span class="dt">int</span> <span class="fu">getImageMode</span>();</span>
<span id="cb39-19"><a href="#cb39-19"></a></span>
<span id="cb39-20"><a href="#cb39-20"></a>    <span class="co">/**</span></span>
<span id="cb39-21"><a href="#cb39-21"></a>     <span class="co">*</span> 获取负反馈选项数据</span>
<span id="cb39-22"><a href="#cb39-22"></a>     <span class="co">*</span></span>
<span id="cb39-23"><a href="#cb39-23"></a>     <span class="co">* @</span>return</span>
<span id="cb39-24"><a href="#cb39-24"></a>     <span class="co">*/</span></span>
<span id="cb39-25"><a href="#cb39-25"></a>    <span class="bu">List</span>&lt;FilterWord&gt; <span class="fu">getFilterWords</span>();</span>
<span id="cb39-26"><a href="#cb39-26"></a></span>
<span id="cb39-27"><a href="#cb39-27"></a>    <span class="co">/**</span></span>
<span id="cb39-28"><a href="#cb39-28"></a>     <span class="co">*</span> 注册个性化模板信息流广告交互回调</span>
<span id="cb39-29"><a href="#cb39-29"></a>     <span class="co">*</span></span>
<span id="cb39-30"><a href="#cb39-30"></a>     <span class="co">* </span><span class="an">@param listener </span>监听器</span>
<span id="cb39-31"><a href="#cb39-31"></a>     <span class="co">*/</span></span>
<span id="cb39-32"><a href="#cb39-32"></a>    <span class="dt">void</span> <span class="fu">setExpressInteractionListener</span>(ExpressAdInteractionListener listener);</span>
<span id="cb39-33"><a href="#cb39-33"></a>    </span>
<span id="cb39-34"><a href="#cb39-34"></a>     <span class="co">/**</span></span>
<span id="cb39-35"><a href="#cb39-35"></a>      <span class="co">*</span> 注册个性化模板插屏广告交互回调</span>
<span id="cb39-36"><a href="#cb39-36"></a>      <span class="co">*</span></span>
<span id="cb39-37"><a href="#cb39-37"></a>      <span class="co">* </span><span class="an">@param listener </span>监听器</span>
<span id="cb39-38"><a href="#cb39-38"></a>      <span class="co">*/</span></span>
<span id="cb39-39"><a href="#cb39-39"></a>     <span class="dt">void</span> <span class="fu">setExpressInteractionListener</span>(AdInteractionListener listener);</span>
<span id="cb39-40"><a href="#cb39-40"></a></span>
<span id="cb39-41"><a href="#cb39-41"></a>    <span class="co">/**</span></span>
<span id="cb39-42"><a href="#cb39-42"></a>     <span class="co">*</span> 注册广告的下载回调</span>
<span id="cb39-43"><a href="#cb39-43"></a>     <span class="co">*</span></span>
<span id="cb39-44"><a href="#cb39-44"></a>     <span class="co">* </span><span class="an">@param downloadListener </span>下载回调监听器</span>
<span id="cb39-45"><a href="#cb39-45"></a>     <span class="co">*/</span></span>
<span id="cb39-46"><a href="#cb39-46"></a>    <span class="dt">void</span> <span class="fu">setDownloadListener</span>(TTAppDownloadListener downloadListener);</span>
<span id="cb39-47"><a href="#cb39-47"></a></span>
<span id="cb39-48"><a href="#cb39-48"></a>    <span class="co">/**</span></span>
<span id="cb39-49"><a href="#cb39-49"></a>     <span class="co">*</span> 得到广告的交互类型</span>
<span id="cb39-50"><a href="#cb39-50"></a>     <span class="co">*</span></span>
<span id="cb39-51"><a href="#cb39-51"></a>     <span class="co">* </span><span class="an">@return </span><span class="co">2在浏览器内打开</span> （普通类型）3落地页（普通类型），<span class="co">4:</span>应用下载，5:拨打电话 <span class="co">-1</span> 未知类型</span>
<span id="cb39-52"><a href="#cb39-52"></a>     <span class="co">*/</span></span>
<span id="cb39-53"><a href="#cb39-53"></a>    <span class="dt">int</span> <span class="fu">getInteractionType</span>();</span>
<span id="cb39-54"><a href="#cb39-54"></a></span>
<span id="cb39-55"><a href="#cb39-55"></a>    <span class="co">/**</span></span>
<span id="cb39-56"><a href="#cb39-56"></a>     <span class="co">*</span> 渲染个性化模板广告</span>
<span id="cb39-57"><a href="#cb39-57"></a>     <span class="co">*/</span></span>
<span id="cb39-58"><a href="#cb39-58"></a>    <span class="dt">void</span> <span class="fu">render</span>();</span>
<span id="cb39-59"><a href="#cb39-59"></a></span>
<span id="cb39-60"><a href="#cb39-60"></a>    <span class="co">/**</span></span>
<span id="cb39-61"><a href="#cb39-61"></a>     <span class="co">*</span> 资源释放</span>
<span id="cb39-62"><a href="#cb39-62"></a>     <span class="co">*/</span></span>
<span id="cb39-63"><a href="#cb39-63"></a>    <span class="dt">void</span> <span class="fu">destroy</span>();</span>
<span id="cb39-64"><a href="#cb39-64"></a></span>
<span id="cb39-65"><a href="#cb39-65"></a>    <span class="co">/**</span></span>
<span id="cb39-66"><a href="#cb39-66"></a>     <span class="co">*</span> 设置在个性化模板信息流广告中使用穿山甲中dislike</span>
<span id="cb39-67"><a href="#cb39-67"></a>     <span class="co">*</span></span>
<span id="cb39-68"><a href="#cb39-68"></a>     <span class="co">* </span><span class="an">@param activity </span>创建dislike的context</span>
<span id="cb39-69"><a href="#cb39-69"></a>     <span class="co">*</span> <span class="an">@param dislikeInteractionCallback </span>dislike选择结果回调</span>
<span id="cb39-70"><a href="#cb39-70"></a>     <span class="co">*/</span></span>
<span id="cb39-71"><a href="#cb39-71"></a>    <span class="dt">void</span> <span class="fu">setDislikeCallback</span>(Activity activity, TTAdDislike.<span class="fu">DislikeInteractionCallback</span> dislikeInteractionCallback);</span>
<span id="cb39-72"><a href="#cb39-72"></a></span>
<span id="cb39-73"><a href="#cb39-73"></a>    <span class="co">/**</span></span>
<span id="cb39-74"><a href="#cb39-74"></a>     <span class="co">*</span> 自定义dislike dialog</span>
<span id="cb39-75"><a href="#cb39-75"></a>     <span class="co">*</span></span>
<span id="cb39-76"><a href="#cb39-76"></a>     <span class="co">* </span><span class="an">@param dialog </span>自定义dialog，需要由外部传入</span>
<span id="cb39-77"><a href="#cb39-77"></a>     <span class="co">*</span> <span class="co">@</span>return</span>
<span id="cb39-78"><a href="#cb39-78"></a>     <span class="co">*/</span></span>
<span id="cb39-79"><a href="#cb39-79"></a>    <span class="dt">void</span> <span class="fu">setDislikeDialog</span>(TTDislikeDialogAbstract dialog);</span>
<span id="cb39-80"><a href="#cb39-80"></a></span>
<span id="cb39-81"><a href="#cb39-81"></a>    <span class="co">/**</span></span>
<span id="cb39-82"><a href="#cb39-82"></a>     <span class="co">*</span> 展示插屏广告</span>
<span id="cb39-83"><a href="#cb39-83"></a>     <span class="co">*</span></span>
<span id="cb39-84"><a href="#cb39-84"></a>     <span class="co">* </span><span class="an">@param activity </span>宿主activity<span class="co">,</span>用户判断宿主是否finishing</span>
<span id="cb39-85"><a href="#cb39-85"></a>     <span class="co">*/</span></span>
<span id="cb39-86"><a href="#cb39-86"></a>    <span class="at">@MainThread</span></span>
<span id="cb39-87"><a href="#cb39-87"></a>    <span class="dt">void</span> <span class="fu">showInteractionExpressAd</span>(Activity activity);</span>
<span id="cb39-88"><a href="#cb39-88"></a></span>
<span id="cb39-89"><a href="#cb39-89"></a>    <span class="co">/**</span></span>
<span id="cb39-90"><a href="#cb39-90"></a>     <span class="co">*</span> 设置Banner广告轮播的间隔时间，如果不设置则默认不开启轮播</span>
<span id="cb39-91"><a href="#cb39-91"></a>     <span class="co">*</span></span>
<span id="cb39-92"><a href="#cb39-92"></a>     <span class="co">* </span><span class="an">@param intervalTime </span>Banner广告轮播的间隔时间，允许值在<span class="co">30</span> <span class="co">*</span> <span class="co">1000</span> <span class="co">~</span> <span class="co">120</span> <span class="co">*</span> <span class="co">1000之间</span></span>
<span id="cb39-93"><a href="#cb39-93"></a>     <span class="co">*/</span></span>
<span id="cb39-94"><a href="#cb39-94"></a>    <span class="dt">void</span> <span class="fu">setSlideIntervalTime</span>(<span class="dt">int</span> intervalTime);</span>
<span id="cb39-95"><a href="#cb39-95"></a>    </span>
<span id="cb39-96"><a href="#cb39-96"></a>     <span class="co">/**</span></span>
<span id="cb39-97"><a href="#cb39-97"></a>     <span class="co">*</span> 设置视频广告的回调监听</span>
<span id="cb39-98"><a href="#cb39-98"></a>     <span class="co">*</span></span>
<span id="cb39-99"><a href="#cb39-99"></a>     <span class="co">* </span><span class="an">@param videoAdListener </span> 个性化模板视频广告的监听</span>
<span id="cb39-100"><a href="#cb39-100"></a>     <span class="co">*/</span></span>
<span id="cb39-101"><a href="#cb39-101"></a>    <span class="dt">void</span> <span class="fu">setVideoAdListener</span>(ExpressVideoAdListener videoAdListener);</span>
<span id="cb39-102"><a href="#cb39-102"></a></span>
<span id="cb39-103"><a href="#cb39-103"></a>    <span class="co">/**</span></span>
<span id="cb39-104"><a href="#cb39-104"></a>     <span class="co">*</span> 个性化模板广告中视频广告是否可以点击暂停、继续播放</span>
<span id="cb39-105"><a href="#cb39-105"></a>     <span class="co">*</span></span>
<span id="cb39-106"><a href="#cb39-106"></a>     <span class="co">* </span><span class="an">@param canInterruptVideoPlay</span></span>
<span id="cb39-107"><a href="#cb39-107"></a>     <span class="co">*/</span></span>
<span id="cb39-108"><a href="#cb39-108"></a>    <span class="dt">void</span> <span class="fu">setCanInterruptVideoPlay</span>(<span class="dt">boolean</span> canInterruptVideoPlay);</span>
<span id="cb39-109"><a href="#cb39-109"></a>    </span>
<span id="cb39-110"><a href="#cb39-110"></a>    <span class="co">/**</span></span>
<span id="cb39-111"><a href="#cb39-111"></a>     <span class="co">*</span> 广告交互监听器</span>
<span id="cb39-112"><a href="#cb39-112"></a>     <span class="co">*/</span></span>
<span id="cb39-113"><a href="#cb39-113"></a>    <span class="kw">interface</span> ExpressAdInteractionListener {</span>
<span id="cb39-114"><a href="#cb39-114"></a></span>
<span id="cb39-115"><a href="#cb39-115"></a>        <span class="co">/**</span></span>
<span id="cb39-116"><a href="#cb39-116"></a>         <span class="co">*</span>广告的点击回调</span>
<span id="cb39-117"><a href="#cb39-117"></a>         <span class="co">* </span><span class="an">@param view </span>广告</span>
<span id="cb39-118"><a href="#cb39-118"></a>         <span class="co">*</span> <span class="an">@param type </span>广告的交互类型</span>
<span id="cb39-119"><a href="#cb39-119"></a>         <span class="co">*/</span></span>
<span id="cb39-120"><a href="#cb39-120"></a>        <span class="dt">void</span> <span class="fu">onAdClicked</span>(<span class="bu">View</span> view, <span class="dt">int</span> type);</span>
<span id="cb39-121"><a href="#cb39-121"></a></span>
<span id="cb39-122"><a href="#cb39-122"></a>        <span class="co">/**</span></span>
<span id="cb39-123"><a href="#cb39-123"></a>         <span class="co">*</span> 广告的展示回调</span>
<span id="cb39-124"><a href="#cb39-124"></a>         <span class="co">* </span><span class="an">@param view </span>广告view</span>
<span id="cb39-125"><a href="#cb39-125"></a>         <span class="co">*</span> <span class="an">@param type </span>广告的交互类型</span>
<span id="cb39-126"><a href="#cb39-126"></a>         <span class="co">*/</span></span>
<span id="cb39-127"><a href="#cb39-127"></a>        <span class="dt">void</span> <span class="fu">onAdShow</span>(<span class="bu">View</span> view, <span class="dt">int</span> type);</span>
<span id="cb39-128"><a href="#cb39-128"></a></span>
<span id="cb39-129"><a href="#cb39-129"></a>        <span class="co">/**</span></span>
<span id="cb39-130"><a href="#cb39-130"></a>         <span class="co">*</span> 个性化模板渲染失败</span>
<span id="cb39-131"><a href="#cb39-131"></a>         <span class="co">* </span><span class="an">@param view</span></span>
<span id="cb39-132"><a href="#cb39-132"></a>         <span class="co">*/</span></span>
<span id="cb39-133"><a href="#cb39-133"></a>        <span class="dt">void</span> <span class="fu">onRenderFail</span>(<span class="bu">View</span> view, <span class="bu">String</span> msg, <span class="dt">int</span> code);</span>
<span id="cb39-134"><a href="#cb39-134"></a></span>
<span id="cb39-135"><a href="#cb39-135"></a>        <span class="co">/**</span></span>
<span id="cb39-136"><a href="#cb39-136"></a>         <span class="co">*</span> 个性化模板渲染成功</span>
<span id="cb39-137"><a href="#cb39-137"></a>         <span class="co">* </span><span class="an">@param view</span></span>
<span id="cb39-138"><a href="#cb39-138"></a>         <span class="co">*</span> <span class="an">@param width </span> 返回view的宽 单位 dp</span>
<span id="cb39-139"><a href="#cb39-139"></a>         <span class="co">*</span> <span class="an">@param height </span>返回view的高 单位 dp</span>
<span id="cb39-140"><a href="#cb39-140"></a>         <span class="co">*/</span></span>
<span id="cb39-141"><a href="#cb39-141"></a>        <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height);</span>
<span id="cb39-142"><a href="#cb39-142"></a>    }</span>
<span id="cb39-143"><a href="#cb39-143"></a>    </span>
<span id="cb39-144"><a href="#cb39-144"></a>    <span class="co">/**</span></span>
<span id="cb39-145"><a href="#cb39-145"></a>     <span class="co">*</span> 个性化模板插屏广告广告交互监听器</span>
<span id="cb39-146"><a href="#cb39-146"></a>     <span class="co">*/</span></span>
<span id="cb39-147"><a href="#cb39-147"></a>    <span class="kw">interface</span> AdInteractionListener <span class="kw">extends</span> ExpressAdInteractionListener {</span>
<span id="cb39-148"><a href="#cb39-148"></a>    </span>
<span id="cb39-149"><a href="#cb39-149"></a>        <span class="co">/**</span></span>
<span id="cb39-150"><a href="#cb39-150"></a>         <span class="co">*</span> 插屏广告消失用户回调</span>
<span id="cb39-151"><a href="#cb39-151"></a>         <span class="co">*/</span></span>
<span id="cb39-152"><a href="#cb39-152"></a>        <span class="dt">void</span> <span class="fu">onAdDismiss</span>();</span>
<span id="cb39-153"><a href="#cb39-153"></a>    }</span>
<span id="cb39-154"><a href="#cb39-154"></a>    </span>
<span id="cb39-155"><a href="#cb39-155"></a>    <span class="co">/**</span></span>
<span id="cb39-156"><a href="#cb39-156"></a>     <span class="co">*</span> 个性化模板信息流视频广告回调接口</span>
<span id="cb39-157"><a href="#cb39-157"></a>     <span class="co">*/</span></span>
<span id="cb39-158"><a href="#cb39-158"></a>    <span class="kw">interface</span> ExpressVideoAdListener {</span>
<span id="cb39-159"><a href="#cb39-159"></a></span>
<span id="cb39-160"><a href="#cb39-160"></a>        <span class="co">/**</span></span>
<span id="cb39-161"><a href="#cb39-161"></a>         <span class="co">*</span> 视频广告加载成功</span>
<span id="cb39-162"><a href="#cb39-162"></a>         <span class="co">*/</span></span>
<span id="cb39-163"><a href="#cb39-163"></a>        <span class="dt">void</span> <span class="fu">onVideoLoad</span>();</span>
<span id="cb39-164"><a href="#cb39-164"></a></span>
<span id="cb39-165"><a href="#cb39-165"></a>        <span class="co">/**</span></span>
<span id="cb39-166"><a href="#cb39-166"></a>         <span class="co">*</span> 视频广告加载失败（原生MediaPlayer内部提供的错误类型）</span>
<span id="cb39-167"><a href="#cb39-167"></a>         <span class="co">* </span><span class="an">@param errorCode </span>错误类型：</span>
<span id="cb39-168"><a href="#cb39-168"></a>         <span class="co">*</span>                  MEDIA_ERROR_UNKNOWN</span>
<span id="cb39-169"><a href="#cb39-169"></a>         <span class="co">*</span>                  MEDIA_ERROR_SERVER_DIED</span>
<span id="cb39-170"><a href="#cb39-170"></a>         <span class="co">*</span></span>
<span id="cb39-171"><a href="#cb39-171"></a>         <span class="co">*</span> <span class="an">@param extraCode </span>额外错误信息</span>
<span id="cb39-172"><a href="#cb39-172"></a>         <span class="co">*</span>                  MEDIA_ERROR_IO</span>
<span id="cb39-173"><a href="#cb39-173"></a>         <span class="co">*</span>                  MEDIA_ERROR_MALFORMED</span>
<span id="cb39-174"><a href="#cb39-174"></a>         <span class="co">*</span>                  MEDIA_ERROR_UNSUPPORTED</span>
<span id="cb39-175"><a href="#cb39-175"></a>         <span class="co">*</span>                  MEDIA_ERROR_TIMED_OUT</span>
<span id="cb39-176"><a href="#cb39-176"></a>         <span class="co">*</span>                  MEDIA_ERROR_SYSTEM</span>
<span id="cb39-177"><a href="#cb39-177"></a>         <span class="co">*</span></span>
<span id="cb39-178"><a href="#cb39-178"></a>         <span class="co">*/</span></span>
<span id="cb39-179"><a href="#cb39-179"></a>        <span class="dt">void</span> <span class="fu">onVideoError</span>(<span class="dt">int</span> errorCode, <span class="dt">int</span> extraCode);</span>
<span id="cb39-180"><a href="#cb39-180"></a></span>
<span id="cb39-181"><a href="#cb39-181"></a>        <span class="co">/**</span></span>
<span id="cb39-182"><a href="#cb39-182"></a>         <span class="co">*</span> 视频广告播放回调</span>
<span id="cb39-183"><a href="#cb39-183"></a>         <span class="co">*/</span></span>
<span id="cb39-184"><a href="#cb39-184"></a>        <span class="dt">void</span> <span class="fu">onVideoAdStartPlay</span>();</span>
<span id="cb39-185"><a href="#cb39-185"></a></span>
<span id="cb39-186"><a href="#cb39-186"></a>        <span class="co">/**</span></span>
<span id="cb39-187"><a href="#cb39-187"></a>         <span class="co">*</span> 视频广告暂停回调</span>
<span id="cb39-188"><a href="#cb39-188"></a>         <span class="co">*/</span></span>
<span id="cb39-189"><a href="#cb39-189"></a>        <span class="dt">void</span> <span class="fu">onVideoAdPaused</span>();</span>
<span id="cb39-190"><a href="#cb39-190"></a></span>
<span id="cb39-191"><a href="#cb39-191"></a>        <span class="co">/**</span></span>
<span id="cb39-192"><a href="#cb39-192"></a>         <span class="co">*</span> 视频广告续播</span>
<span id="cb39-193"><a href="#cb39-193"></a>         <span class="co">*/</span></span>
<span id="cb39-194"><a href="#cb39-194"></a>        <span class="dt">void</span> <span class="fu">onVideoAdContinuePlay</span>();</span>
<span id="cb39-195"><a href="#cb39-195"></a></span>
<span id="cb39-196"><a href="#cb39-196"></a>        <span class="co">/**</span></span>
<span id="cb39-197"><a href="#cb39-197"></a>         <span class="co">*</span> 视频播放进度</span>
<span id="cb39-198"><a href="#cb39-198"></a>         <span class="co">*</span></span>
<span id="cb39-199"><a href="#cb39-199"></a>         <span class="co">* </span><span class="an">@param current</span></span>
<span id="cb39-200"><a href="#cb39-200"></a>         <span class="co">*</span> <span class="an">@param duration</span></span>
<span id="cb39-201"><a href="#cb39-201"></a>         <span class="co">*/</span></span>
<span id="cb39-202"><a href="#cb39-202"></a>        <span class="dt">void</span> <span class="fu">onProgressUpdate</span>(<span class="dt">long</span> current, <span class="dt">long</span> duration);</span>
<span id="cb39-203"><a href="#cb39-203"></a></span>
<span id="cb39-204"><a href="#cb39-204"></a>        <span class="co">/**</span></span>
<span id="cb39-205"><a href="#cb39-205"></a>         <span class="co">*</span> 视频广告播放完成回调</span>
<span id="cb39-206"><a href="#cb39-206"></a>         <span class="co">*/</span></span>
<span id="cb39-207"><a href="#cb39-207"></a>        <span class="dt">void</span> <span class="fu">onVideoAdComplete</span>();</span>
<span id="cb39-208"><a href="#cb39-208"></a></span>
<span id="cb39-209"><a href="#cb39-209"></a>        <span class="co">/**</span></span>
<span id="cb39-210"><a href="#cb39-210"></a>         <span class="co">*</span> 点击重播</span>
<span id="cb39-211"><a href="#cb39-211"></a>         <span class="co">*/</span></span>
<span id="cb39-212"><a href="#cb39-212"></a>        <span class="dt">void</span> <span class="fu">onClickRetry</span>();</span>
<span id="cb39-213"><a href="#cb39-213"></a>    }</span>
<span id="cb39-214"><a href="#cb39-214"></a>}</span></code></pre></div>
<h4 id="加载个性化模板信息流广告绑定接口回调dislike逻辑">2.10.2 加载个性化模板信息流广告，绑定接口回调、dislike逻辑</h4>
<p>接入方可调用<code>loadNativeExpressAd(AdSlot adSlot, @NonNull NativeExpressAdListener listener)</code>异步加载广告，adslot为请求广告的信息，NativeExpressAdListener为广告加载成功或失败等回调。</p>
<p><strong>注意</strong>:期望个性化模板尺寸的参数设置中，如果高度设置为0,则高度会自适应;dislike逻辑有助于我们提升广告体验和匹配度，请按照接入说明设置，<strong>如果不设置dislike的回调则布局中的dislike逻辑不生效。</strong></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb40-1"><a href="#cb40-1"></a> <span class="co">//设置广告参数</span></span>
<span id="cb40-2"><a href="#cb40-2"></a>   AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb40-3"><a href="#cb40-3"></a>                  .<span class="fu">setCodeId</span>(codeId) <span class="co">//广告位id</span></span>
<span id="cb40-4"><a href="#cb40-4"></a>                  .<span class="fu">setAdCount</span>(<span class="dv">1</span>) <span class="co">//请求广告数量为1到3条</span></span>
<span id="cb40-5"><a href="#cb40-5"></a>                  .<span class="fu">setExpressViewAcceptedSize</span>(expressViewWidth,expressViewHeight) <span class="co">//期望个性化模板广告view的size,单位dp</span></span>
<span id="cb40-6"><a href="#cb40-6"></a>                  .<span class="fu">setImageAcceptedSize</span>(<span class="dv">640</span>,<span class="dv">320</span>) <span class="co">//这个参数设置即可，不影响个性化模板广告的size</span></span>
<span id="cb40-7"><a href="#cb40-7"></a>                  .<span class="fu">build</span>();</span>
<span id="cb40-8"><a href="#cb40-8"></a>       <span class="co">//加载广告</span></span>
<span id="cb40-9"><a href="#cb40-9"></a>         mTTAdNative.<span class="fu">loadNativeExpressAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">NativeExpressAdListener</span>() {</span>
<span id="cb40-10"><a href="#cb40-10"></a>                     <span class="at">@Override</span></span>
<span id="cb40-11"><a href="#cb40-11"></a>                     <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb40-12"><a href="#cb40-12"></a>                         TToast.<span class="fu">show</span>(NativeExpressActivity.<span class="fu">this</span>, <span class="st">&quot;load error : &quot;</span> + code + <span class="st">&quot;, &quot;</span> + message);</span>
<span id="cb40-13"><a href="#cb40-13"></a>                         mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb40-14"><a href="#cb40-14"></a>                     }</span>
<span id="cb40-15"><a href="#cb40-15"></a>         </span>
<span id="cb40-16"><a href="#cb40-16"></a>                     <span class="at">@Override</span></span>
<span id="cb40-17"><a href="#cb40-17"></a>                     <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onNativeExpressAdLoad</span>(<span class="bu">List</span>&lt;TTNativeExpressAd&gt; ads) {</span>
<span id="cb40-18"><a href="#cb40-18"></a>                         <span class="kw">if</span> (ads == <span class="kw">null</span> || ads.<span class="fu">size</span>() == <span class="dv">0</span>){</span>
<span id="cb40-19"><a href="#cb40-19"></a>                             <span class="kw">return</span>;</span>
<span id="cb40-20"><a href="#cb40-20"></a>                         }</span>
<span id="cb40-21"><a href="#cb40-21"></a>                         mTTAd = ads.<span class="fu">get</span>(<span class="dv">0</span>);</span>
<span id="cb40-22"><a href="#cb40-22"></a>                         <span class="fu">bindAdListener</span>(mTTAd);</span>
<span id="cb40-23"><a href="#cb40-23"></a>                         mTTAd.<span class="fu">render</span>();<span class="co">//调用render开始渲染广告</span></span>
<span id="cb40-24"><a href="#cb40-24"></a>                     }</span>
<span id="cb40-25"><a href="#cb40-25"></a>                 });</span>
<span id="cb40-26"><a href="#cb40-26"></a>    <span class="co">//绑定广告行为</span></span>
<span id="cb40-27"><a href="#cb40-27"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">bindAdListener</span>(TTNativeExpressAd ad) {</span>
<span id="cb40-28"><a href="#cb40-28"></a>            ad.<span class="fu">setExpressInteractionListener</span>(<span class="kw">new</span> TTNativeExpressAd.<span class="fu">ExpressAdInteractionListener</span>() {</span>
<span id="cb40-29"><a href="#cb40-29"></a>                <span class="at">@Override</span></span>
<span id="cb40-30"><a href="#cb40-30"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdClicked</span>(<span class="bu">View</span> view, <span class="dt">int</span> type) {</span>
<span id="cb40-31"><a href="#cb40-31"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告被点击&quot;</span>);</span>
<span id="cb40-32"><a href="#cb40-32"></a>                }</span>
<span id="cb40-33"><a href="#cb40-33"></a>    </span>
<span id="cb40-34"><a href="#cb40-34"></a>                <span class="at">@Override</span></span>
<span id="cb40-35"><a href="#cb40-35"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdShow</span>(<span class="bu">View</span> view, <span class="dt">int</span> type) {</span>
<span id="cb40-36"><a href="#cb40-36"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告展示&quot;</span>);</span>
<span id="cb40-37"><a href="#cb40-37"></a>                }</span>
<span id="cb40-38"><a href="#cb40-38"></a>    </span>
<span id="cb40-39"><a href="#cb40-39"></a>                <span class="at">@Override</span></span>
<span id="cb40-40"><a href="#cb40-40"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderFail</span>(<span class="bu">View</span> view, <span class="bu">String</span> msg, <span class="dt">int</span> code) {</span>
<span id="cb40-41"><a href="#cb40-41"></a>                    Log.<span class="fu">e</span>(<span class="st">&quot;ExpressView&quot;</span>,<span class="st">&quot;render fail:&quot;</span>+(<span class="bu">System</span>.<span class="fu">currentTimeMillis</span>() - startTime));</span>
<span id="cb40-42"><a href="#cb40-42"></a>                    TToast.<span class="fu">show</span>(mContext, msg+<span class="st">&quot; code:&quot;</span>+code);</span>
<span id="cb40-43"><a href="#cb40-43"></a>                }</span>
<span id="cb40-44"><a href="#cb40-44"></a>    </span>
<span id="cb40-45"><a href="#cb40-45"></a>                <span class="at">@Override</span></span>
<span id="cb40-46"><a href="#cb40-46"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height) {</span>
<span id="cb40-47"><a href="#cb40-47"></a>                    <span class="co">//返回view的宽高 单位 dp</span></span>
<span id="cb40-48"><a href="#cb40-48"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;渲染成功&quot;</span>);</span>
<span id="cb40-49"><a href="#cb40-49"></a>                    <span class="co">//在渲染成功回调时展示广告，提升体验</span></span>
<span id="cb40-50"><a href="#cb40-50"></a>                    mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb40-51"><a href="#cb40-51"></a>                    mExpressContainer.<span class="fu">addView</span>(view);</span>
<span id="cb40-52"><a href="#cb40-52"></a>                }</span>
<span id="cb40-53"><a href="#cb40-53"></a>            });</span>
<span id="cb40-54"><a href="#cb40-54"></a>            <span class="co">//dislike设置</span></span>
<span id="cb40-55"><a href="#cb40-55"></a>            <span class="fu">bindDislike</span>(ad, <span class="kw">false</span>);</span>
<span id="cb40-56"><a href="#cb40-56"></a>            <span class="kw">if</span> (ad.<span class="fu">getInteractionType</span>() != TTAdConstant.<span class="fu">INTERACTION_TYPE_DOWNLOAD</span>){</span>
<span id="cb40-57"><a href="#cb40-57"></a>                <span class="kw">return</span>;</span>
<span id="cb40-58"><a href="#cb40-58"></a>            }</span>
<span id="cb40-59"><a href="#cb40-59"></a>            <span class="co">//可选，下载监听设置</span></span>
<span id="cb40-60"><a href="#cb40-60"></a>            ad.<span class="fu">setDownloadListener</span>(<span class="kw">new</span> <span class="fu">TTAppDownloadListener</span>() {</span>
<span id="cb40-61"><a href="#cb40-61"></a>                <span class="at">@Override</span></span>
<span id="cb40-62"><a href="#cb40-62"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onIdle</span>() {</span>
<span id="cb40-63"><a href="#cb40-63"></a>                    TToast.<span class="fu">show</span>(NativeExpressActivity.<span class="fu">this</span>, <span class="st">&quot;点击开始下载&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb40-64"><a href="#cb40-64"></a>                }</span>
<span id="cb40-65"><a href="#cb40-65"></a>    </span>
<span id="cb40-66"><a href="#cb40-66"></a>                <span class="at">@Override</span></span>
<span id="cb40-67"><a href="#cb40-67"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadActive</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb40-68"><a href="#cb40-68"></a>                    <span class="kw">if</span> (!mHasShowDownloadActive) {</span>
<span id="cb40-69"><a href="#cb40-69"></a>                        mHasShowDownloadActive = <span class="kw">true</span>;</span>
<span id="cb40-70"><a href="#cb40-70"></a>                        TToast.<span class="fu">show</span>(NativeExpressActivity.<span class="fu">this</span>, <span class="st">&quot;下载中，点击暂停&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb40-71"><a href="#cb40-71"></a>                    }</span>
<span id="cb40-72"><a href="#cb40-72"></a>                }</span>
<span id="cb40-73"><a href="#cb40-73"></a>    </span>
<span id="cb40-74"><a href="#cb40-74"></a>                <span class="at">@Override</span></span>
<span id="cb40-75"><a href="#cb40-75"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadPaused</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb40-76"><a href="#cb40-76"></a>                    TToast.<span class="fu">show</span>(NativeExpressActivity.<span class="fu">this</span>, <span class="st">&quot;下载暂停，点击继续&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb40-77"><a href="#cb40-77"></a>                }</span>
<span id="cb40-78"><a href="#cb40-78"></a>    </span>
<span id="cb40-79"><a href="#cb40-79"></a>                <span class="at">@Override</span></span>
<span id="cb40-80"><a href="#cb40-80"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadFailed</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb40-81"><a href="#cb40-81"></a>                    TToast.<span class="fu">show</span>(NativeExpressActivity.<span class="fu">this</span>, <span class="st">&quot;下载失败，点击重新下载&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb40-82"><a href="#cb40-82"></a>                }</span>
<span id="cb40-83"><a href="#cb40-83"></a>    </span>
<span id="cb40-84"><a href="#cb40-84"></a>                <span class="at">@Override</span></span>
<span id="cb40-85"><a href="#cb40-85"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onInstalled</span>(<span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb40-86"><a href="#cb40-86"></a>                    TToast.<span class="fu">show</span>(NativeExpressActivity.<span class="fu">this</span>, <span class="st">&quot;安装完成，点击图片打开&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb40-87"><a href="#cb40-87"></a>                }</span>
<span id="cb40-88"><a href="#cb40-88"></a>    </span>
<span id="cb40-89"><a href="#cb40-89"></a>                <span class="at">@Override</span></span>
<span id="cb40-90"><a href="#cb40-90"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadFinished</span>(<span class="dt">long</span> totalBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb40-91"><a href="#cb40-91"></a>                    TToast.<span class="fu">show</span>(NativeExpressActivity.<span class="fu">this</span>, <span class="st">&quot;点击安装&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb40-92"><a href="#cb40-92"></a>                }</span>
<span id="cb40-93"><a href="#cb40-93"></a>            });</span>
<span id="cb40-94"><a href="#cb40-94"></a>        }</span>
<span id="cb40-95"><a href="#cb40-95"></a>        <span class="co">/**</span></span>
<span id="cb40-96"><a href="#cb40-96"></a>         <span class="co">*</span> 设置广告的不喜欢，开发者可自定义样式</span>
<span id="cb40-97"><a href="#cb40-97"></a>         <span class="co">* </span><span class="an">@param ad</span></span>
<span id="cb40-98"><a href="#cb40-98"></a>         <span class="co">*</span> <span class="an">@param customStyle </span>是否自定义样式，true<span class="co">:</span>样式自定义</span>
<span id="cb40-99"><a href="#cb40-99"></a>         <span class="co">*/</span></span>
<span id="cb40-100"><a href="#cb40-100"></a>        <span class="kw">private</span> <span class="dt">void</span> <span class="fu">bindDislike</span>(TTNativeExpressAd ad, <span class="dt">boolean</span> customStyle) {</span>
<span id="cb40-101"><a href="#cb40-101"></a>            <span class="kw">if</span> (customStyle) {</span>
<span id="cb40-102"><a href="#cb40-102"></a>                <span class="co">//使用自定义样式</span></span>
<span id="cb40-103"><a href="#cb40-103"></a>                <span class="bu">List</span>&lt;FilterWord&gt; words = ad.<span class="fu">getFilterWords</span>();</span>
<span id="cb40-104"><a href="#cb40-104"></a>                <span class="kw">if</span> (words == <span class="kw">null</span> || words.<span class="fu">isEmpty</span>()) {</span>
<span id="cb40-105"><a href="#cb40-105"></a>                    <span class="kw">return</span>;</span>
<span id="cb40-106"><a href="#cb40-106"></a>                }</span>
<span id="cb40-107"><a href="#cb40-107"></a>        </span>
<span id="cb40-108"><a href="#cb40-108"></a>                <span class="dt">final</span> DislikeDialog dislikeDialog = <span class="kw">new</span> <span class="fu">DislikeDialog</span>(<span class="kw">this</span>, words);</span>
<span id="cb40-109"><a href="#cb40-109"></a>                dislikeDialog.<span class="fu">setOnDislikeItemClick</span>(<span class="kw">new</span> DislikeDialog.<span class="fu">OnDislikeItemClick</span>() {</span>
<span id="cb40-110"><a href="#cb40-110"></a>                    <span class="at">@Override</span></span>
<span id="cb40-111"><a href="#cb40-111"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onItemClick</span>(FilterWord filterWord) {</span>
<span id="cb40-112"><a href="#cb40-112"></a>                        <span class="co">//屏蔽广告</span></span>
<span id="cb40-113"><a href="#cb40-113"></a>                        TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;点击 &quot;</span> + filterWord.<span class="fu">getName</span>());</span>
<span id="cb40-114"><a href="#cb40-114"></a>                        <span class="co">//用户选择不喜欢原因后，移除广告展示</span></span>
<span id="cb40-115"><a href="#cb40-115"></a>                        mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb40-116"><a href="#cb40-116"></a>                    }</span>
<span id="cb40-117"><a href="#cb40-117"></a>                });</span>
<span id="cb40-118"><a href="#cb40-118"></a>                ad.<span class="fu">setDislikeDialog</span>(dislikeDialog);</span>
<span id="cb40-119"><a href="#cb40-119"></a>                <span class="kw">return</span>;</span>
<span id="cb40-120"><a href="#cb40-120"></a>            }</span>
<span id="cb40-121"><a href="#cb40-121"></a>            <span class="co">//使用默认个性化模板中默认dislike弹出样式</span></span>
<span id="cb40-122"><a href="#cb40-122"></a>            ad.<span class="fu">setDislikeCallback</span>(NativeExpressActivity.<span class="fu">this</span>, <span class="kw">new</span> TTAdDislike.<span class="fu">DislikeInteractionCallback</span>() {</span>
<span id="cb40-123"><a href="#cb40-123"></a>                <span class="at">@Override</span></span>
<span id="cb40-124"><a href="#cb40-124"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSelected</span>(<span class="dt">int</span> position, <span class="bu">String</span> value) {</span>
<span id="cb40-125"><a href="#cb40-125"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;点击 &quot;</span> + value);</span>
<span id="cb40-126"><a href="#cb40-126"></a>                    <span class="co">//用户选择不喜欢原因后，移除广告展示</span></span>
<span id="cb40-127"><a href="#cb40-127"></a>                    mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb40-128"><a href="#cb40-128"></a>                }</span>
<span id="cb40-129"><a href="#cb40-129"></a>        </span>
<span id="cb40-130"><a href="#cb40-130"></a>                <span class="at">@Override</span></span>
<span id="cb40-131"><a href="#cb40-131"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCancel</span>() {</span>
<span id="cb40-132"><a href="#cb40-132"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;点击取消 &quot;</span>);</span>
<span id="cb40-133"><a href="#cb40-133"></a>                }</span>
<span id="cb40-134"><a href="#cb40-134"></a>            });</span>
<span id="cb40-135"><a href="#cb40-135"></a>        }</span>
<span id="cb40-136"><a href="#cb40-136"></a>        </span>
<span id="cb40-137"><a href="#cb40-137"></a>        <span class="co">//在合适的时机，释放广告的资源</span></span>
<span id="cb40-138"><a href="#cb40-138"></a>        <span class="at">@Override</span></span>
<span id="cb40-139"><a href="#cb40-139"></a>        <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onDestroy</span>() {</span>
<span id="cb40-140"><a href="#cb40-140"></a>            <span class="kw">super</span>.<span class="fu">onDestroy</span>();</span>
<span id="cb40-141"><a href="#cb40-141"></a>            <span class="kw">if</span> (mTTAd != <span class="kw">null</span>) {</span>
<span id="cb40-142"><a href="#cb40-142"></a>                <span class="co">//调用destroy()方法释放</span></span>
<span id="cb40-143"><a href="#cb40-143"></a>                mTTAd.<span class="fu">destroy</span>();</span>
<span id="cb40-144"><a href="#cb40-144"></a>            }</span>
<span id="cb40-145"><a href="#cb40-145"></a>        }</span></code></pre></div>
<h4 id="展示个性化模板信息流广告">2.10.3 展示个性化模板信息流广告</h4>
<div class="sourceCode" id="cb41"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb41-1"><a href="#cb41-1"></a> <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height) {</span>
<span id="cb41-2"><a href="#cb41-2"></a>                    <span class="co">//返回view的宽高 单位 dp</span></span>
<span id="cb41-3"><a href="#cb41-3"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;渲染成功&quot;</span>);</span>
<span id="cb41-4"><a href="#cb41-4"></a>                    <span class="co">//在渲染成功回调时展示广告，提升体验</span></span>
<span id="cb41-5"><a href="#cb41-5"></a>                    mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb41-6"><a href="#cb41-6"></a>                    mExpressContainer.<span class="fu">addView</span>(view);</span>
<span id="cb41-7"><a href="#cb41-7"></a>                }</span></code></pre></div>
<p>加载到广告后，调用TTNativeExpressAd.render()方法渲染广告，在onRenderSuccess(View view, float width, float height)方法 中，获取渲染成功后的广告view并添加到容器中展示。 详细代码请参考demo中的NativeExpressActivity，如果在信息流场景使用参考NativeExpressListActivity。</p>
<h3 id="接入个性化模板banner广告接口同-ttnativeexpressad">2.11 接入个性化模板Banner广告（接口同 TTNativeExpressAd）</h3>
<p>本SDK为接入方提供个性化模板Banner广告，开发者不用自行对广告样式进行编辑和渲染，可直接调用相关接口获取广告view,广告样式模板以及微调后期支持开发者编辑。</p>
<h4 id="加载个性化模板banner广告绑定接口回调dislike逻辑">2.11.1 加载个性化模板Banner广告，绑定接口回调、dislike逻辑</h4>
<p>接入方可调用<code>loadBannerExpressAd(AdSlot adSlot, @NonNull NativeExpressAdListener listener)</code>异步加载广告，adslot为请求广告的信息，NativeExpressAdListener为广告加载成功或失败等回调。</p>
<p><strong>注意</strong>:期望个性化模板尺寸的参数设置中，如果高度设置为0,则高度会自适应,尺寸大小请保持和平台设置一致；dislike逻辑有助于我们提升广告体验和匹配度，请按照接入说明设置，<strong>如果不设置dislike的回调则布局中的dislike逻辑不生效。</strong></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb42-1"><a href="#cb42-1"></a> <span class="co">//设置广告参数</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>   AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb42-3"><a href="#cb42-3"></a>                  .<span class="fu">setCodeId</span>(codeId) <span class="co">//广告位id</span></span>
<span id="cb42-4"><a href="#cb42-4"></a>                  .<span class="fu">setAdCount</span>(<span class="dv">1</span>) <span class="co">//请求广告数量为1到3条</span></span>
<span id="cb42-5"><a href="#cb42-5"></a>                  .<span class="fu">setExpressViewAcceptedSize</span>(expressViewWidth,expressViewHeight) <span class="co">//期望个性化模板广告view的size,单位dp</span></span>
<span id="cb42-6"><a href="#cb42-6"></a>                  .<span class="fu">setImageAcceptedSize</span>(<span class="dv">640</span>,<span class="dv">320</span> )<span class="co">//这个参数设置即可，不影响个性化模板广告的size</span></span>
<span id="cb42-7"><a href="#cb42-7"></a>                  .<span class="fu">build</span>();</span>
<span id="cb42-8"><a href="#cb42-8"></a>       <span class="co">//加载广告</span></span>
<span id="cb42-9"><a href="#cb42-9"></a>         mTTAdNative.<span class="fu">loadBannerExpressAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">NativeExpressAdListener</span>() {</span>
<span id="cb42-10"><a href="#cb42-10"></a>                     <span class="at">@Override</span></span>
<span id="cb42-11"><a href="#cb42-11"></a>                     <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb42-12"><a href="#cb42-12"></a>                         TToast.<span class="fu">show</span>(NativeExpressActivity.<span class="fu">this</span>, <span class="st">&quot;load error : &quot;</span> + code + <span class="st">&quot;, &quot;</span> + message);</span>
<span id="cb42-13"><a href="#cb42-13"></a>                         mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb42-14"><a href="#cb42-14"></a>                     }</span>
<span id="cb42-15"><a href="#cb42-15"></a>         </span>
<span id="cb42-16"><a href="#cb42-16"></a>                     <span class="at">@Override</span></span>
<span id="cb42-17"><a href="#cb42-17"></a>                     <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onNativeExpressAdLoad</span>(<span class="bu">List</span>&lt;TTNativeExpressAd&gt; ads) {</span>
<span id="cb42-18"><a href="#cb42-18"></a>                         <span class="kw">if</span> (ads == <span class="kw">null</span> || ads.<span class="fu">size</span>() == <span class="dv">0</span>){</span>
<span id="cb42-19"><a href="#cb42-19"></a>                             <span class="kw">return</span>;</span>
<span id="cb42-20"><a href="#cb42-20"></a>                         }</span>
<span id="cb42-21"><a href="#cb42-21"></a>                         mTTAd = ads.<span class="fu">get</span>(<span class="dv">0</span>);</span>
<span id="cb42-22"><a href="#cb42-22"></a>                         mTTAd.<span class="fu">setSlideIntervalTime</span>(<span class="dv">30</span>*<span class="dv">1000</span>);<span class="co">//设置轮播间隔 ms,不调用则不进行轮播展示</span></span>
<span id="cb42-23"><a href="#cb42-23"></a>                         <span class="fu">bindAdListener</span>(mTTAd);</span>
<span id="cb42-24"><a href="#cb42-24"></a>                         mTTAd.<span class="fu">render</span>();<span class="co">//调用render开始渲染广告</span></span>
<span id="cb42-25"><a href="#cb42-25"></a>                     }</span>
<span id="cb42-26"><a href="#cb42-26"></a>                 });</span>
<span id="cb42-27"><a href="#cb42-27"></a>    <span class="co">//绑定广告行为</span></span>
<span id="cb42-28"><a href="#cb42-28"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">bindAdListener</span>(TTNativeExpressAd ad) {</span>
<span id="cb42-29"><a href="#cb42-29"></a>            ad.<span class="fu">setExpressInteractionListener</span>(<span class="kw">new</span> TTNativeExpressAd.<span class="fu">ExpressAdInteractionListener</span>() {</span>
<span id="cb42-30"><a href="#cb42-30"></a>                <span class="at">@Override</span></span>
<span id="cb42-31"><a href="#cb42-31"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdClicked</span>(<span class="bu">View</span> view, <span class="dt">int</span> type) {</span>
<span id="cb42-32"><a href="#cb42-32"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告被点击&quot;</span>);</span>
<span id="cb42-33"><a href="#cb42-33"></a>                }</span>
<span id="cb42-34"><a href="#cb42-34"></a>    </span>
<span id="cb42-35"><a href="#cb42-35"></a>                <span class="at">@Override</span></span>
<span id="cb42-36"><a href="#cb42-36"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdShow</span>(<span class="bu">View</span> view, <span class="dt">int</span> type) {</span>
<span id="cb42-37"><a href="#cb42-37"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告展示&quot;</span>);</span>
<span id="cb42-38"><a href="#cb42-38"></a>                }</span>
<span id="cb42-39"><a href="#cb42-39"></a>    </span>
<span id="cb42-40"><a href="#cb42-40"></a>                <span class="at">@Override</span></span>
<span id="cb42-41"><a href="#cb42-41"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderFail</span>(<span class="bu">View</span> view, <span class="bu">String</span> msg, <span class="dt">int</span> code) {</span>
<span id="cb42-42"><a href="#cb42-42"></a>                    Log.<span class="fu">e</span>(<span class="st">&quot;ExpressView&quot;</span>,<span class="st">&quot;render fail:&quot;</span>+(<span class="bu">System</span>.<span class="fu">currentTimeMillis</span>() - startTime));</span>
<span id="cb42-43"><a href="#cb42-43"></a>                    TToast.<span class="fu">show</span>(mContext, msg+<span class="st">&quot; code:&quot;</span>+code);</span>
<span id="cb42-44"><a href="#cb42-44"></a>                }</span>
<span id="cb42-45"><a href="#cb42-45"></a>    </span>
<span id="cb42-46"><a href="#cb42-46"></a>                <span class="at">@Override</span></span>
<span id="cb42-47"><a href="#cb42-47"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height) {</span>
<span id="cb42-48"><a href="#cb42-48"></a>                    <span class="co">//返回view的宽高 单位 dp</span></span>
<span id="cb42-49"><a href="#cb42-49"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;渲染成功&quot;</span>);</span>
<span id="cb42-50"><a href="#cb42-50"></a>                    <span class="co">//在渲染成功回调时展示广告，提升体验</span></span>
<span id="cb42-51"><a href="#cb42-51"></a>                    mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb42-52"><a href="#cb42-52"></a>                    mExpressContainer.<span class="fu">addView</span>(view);</span>
<span id="cb42-53"><a href="#cb42-53"></a>                }</span>
<span id="cb42-54"><a href="#cb42-54"></a>            });</span>
<span id="cb42-55"><a href="#cb42-55"></a>            <span class="co">//dislike设置</span></span>
<span id="cb42-56"><a href="#cb42-56"></a>            <span class="fu">bindDislike</span>(ad, <span class="kw">false</span>);</span>
<span id="cb42-57"><a href="#cb42-57"></a>            <span class="kw">if</span> (ad.<span class="fu">getInteractionType</span>() != TTAdConstant.<span class="fu">INTERACTION_TYPE_DOWNLOAD</span>){</span>
<span id="cb42-58"><a href="#cb42-58"></a>                <span class="kw">return</span>;</span>
<span id="cb42-59"><a href="#cb42-59"></a>            }</span>
<span id="cb42-60"><a href="#cb42-60"></a>            <span class="co">//可选，下载监听设置</span></span>
<span id="cb42-61"><a href="#cb42-61"></a>            ad.<span class="fu">setDownloadListener</span>(<span class="kw">new</span> <span class="fu">TTAppDownloadListener</span>() {</span>
<span id="cb42-62"><a href="#cb42-62"></a>                <span class="at">@Override</span></span>
<span id="cb42-63"><a href="#cb42-63"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onIdle</span>() {</span>
<span id="cb42-64"><a href="#cb42-64"></a>                    TToast.<span class="fu">show</span>(BannerExpressActivity.<span class="fu">this</span>, <span class="st">&quot;点击开始下载&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb42-65"><a href="#cb42-65"></a>                }</span>
<span id="cb42-66"><a href="#cb42-66"></a>    </span>
<span id="cb42-67"><a href="#cb42-67"></a>                <span class="at">@Override</span></span>
<span id="cb42-68"><a href="#cb42-68"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadActive</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb42-69"><a href="#cb42-69"></a>                    <span class="kw">if</span> (!mHasShowDownloadActive) {</span>
<span id="cb42-70"><a href="#cb42-70"></a>                        mHasShowDownloadActive = <span class="kw">true</span>;</span>
<span id="cb42-71"><a href="#cb42-71"></a>                        TToast.<span class="fu">show</span>(BannerExpressActivity.<span class="fu">this</span>, <span class="st">&quot;下载中，点击暂停&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb42-72"><a href="#cb42-72"></a>                    }</span>
<span id="cb42-73"><a href="#cb42-73"></a>                }</span>
<span id="cb42-74"><a href="#cb42-74"></a>    </span>
<span id="cb42-75"><a href="#cb42-75"></a>                <span class="at">@Override</span></span>
<span id="cb42-76"><a href="#cb42-76"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadPaused</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb42-77"><a href="#cb42-77"></a>                    TToast.<span class="fu">show</span>(BannerExpressActivity.<span class="fu">this</span>, <span class="st">&quot;下载暂停，点击继续&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb42-78"><a href="#cb42-78"></a>                }</span>
<span id="cb42-79"><a href="#cb42-79"></a>    </span>
<span id="cb42-80"><a href="#cb42-80"></a>                <span class="at">@Override</span></span>
<span id="cb42-81"><a href="#cb42-81"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadFailed</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb42-82"><a href="#cb42-82"></a>                    TToast.<span class="fu">show</span>(BannerExpressActivity.<span class="fu">this</span>, <span class="st">&quot;下载失败，点击重新下载&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb42-83"><a href="#cb42-83"></a>                }</span>
<span id="cb42-84"><a href="#cb42-84"></a>    </span>
<span id="cb42-85"><a href="#cb42-85"></a>                <span class="at">@Override</span></span>
<span id="cb42-86"><a href="#cb42-86"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onInstalled</span>(<span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb42-87"><a href="#cb42-87"></a>                    TToast.<span class="fu">show</span>(BannerExpressActivity.<span class="fu">this</span>, <span class="st">&quot;安装完成，点击图片打开&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb42-88"><a href="#cb42-88"></a>                }</span>
<span id="cb42-89"><a href="#cb42-89"></a>    </span>
<span id="cb42-90"><a href="#cb42-90"></a>                <span class="at">@Override</span></span>
<span id="cb42-91"><a href="#cb42-91"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadFinished</span>(<span class="dt">long</span> totalBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb42-92"><a href="#cb42-92"></a>                    TToast.<span class="fu">show</span>(BannerExpressActivity.<span class="fu">this</span>, <span class="st">&quot;点击安装&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb42-93"><a href="#cb42-93"></a>                }</span>
<span id="cb42-94"><a href="#cb42-94"></a>            });</span>
<span id="cb42-95"><a href="#cb42-95"></a>        }</span>
<span id="cb42-96"><a href="#cb42-96"></a>        <span class="co">/**</span></span>
<span id="cb42-97"><a href="#cb42-97"></a>         <span class="co">*</span> 设置广告的不喜欢，开发者可自定义样式</span>
<span id="cb42-98"><a href="#cb42-98"></a>         <span class="co">* </span><span class="an">@param ad</span></span>
<span id="cb42-99"><a href="#cb42-99"></a>         <span class="co">*</span> <span class="an">@param customStyle </span>是否自定义样式，true<span class="co">:</span>样式自定义</span>
<span id="cb42-100"><a href="#cb42-100"></a>         <span class="co">*/</span></span>
<span id="cb42-101"><a href="#cb42-101"></a>        <span class="kw">private</span> <span class="dt">void</span> <span class="fu">bindDislike</span>(TTNativeExpressAd ad, <span class="dt">boolean</span> customStyle) {</span>
<span id="cb42-102"><a href="#cb42-102"></a>            <span class="kw">if</span> (customStyle) {</span>
<span id="cb42-103"><a href="#cb42-103"></a>                <span class="co">//使用自定义样式</span></span>
<span id="cb42-104"><a href="#cb42-104"></a>                <span class="bu">List</span>&lt;FilterWord&gt; words = ad.<span class="fu">getFilterWords</span>();</span>
<span id="cb42-105"><a href="#cb42-105"></a>                <span class="kw">if</span> (words == <span class="kw">null</span> || words.<span class="fu">isEmpty</span>()) {</span>
<span id="cb42-106"><a href="#cb42-106"></a>                    <span class="kw">return</span>;</span>
<span id="cb42-107"><a href="#cb42-107"></a>                }</span>
<span id="cb42-108"><a href="#cb42-108"></a>        </span>
<span id="cb42-109"><a href="#cb42-109"></a>                <span class="dt">final</span> DislikeDialog dislikeDialog = <span class="kw">new</span> <span class="fu">DislikeDialog</span>(<span class="kw">this</span>, words);</span>
<span id="cb42-110"><a href="#cb42-110"></a>                dislikeDialog.<span class="fu">setOnDislikeItemClick</span>(<span class="kw">new</span> DislikeDialog.<span class="fu">OnDislikeItemClick</span>() {</span>
<span id="cb42-111"><a href="#cb42-111"></a>                    <span class="at">@Override</span></span>
<span id="cb42-112"><a href="#cb42-112"></a>                    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onItemClick</span>(FilterWord filterWord) {</span>
<span id="cb42-113"><a href="#cb42-113"></a>                        <span class="co">//屏蔽广告</span></span>
<span id="cb42-114"><a href="#cb42-114"></a>                        TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;点击 &quot;</span> + filterWord.<span class="fu">getName</span>());</span>
<span id="cb42-115"><a href="#cb42-115"></a>                        <span class="co">//用户选择不喜欢原因后，移除广告展示</span></span>
<span id="cb42-116"><a href="#cb42-116"></a>                        mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb42-117"><a href="#cb42-117"></a>                    }</span>
<span id="cb42-118"><a href="#cb42-118"></a>                });</span>
<span id="cb42-119"><a href="#cb42-119"></a>                ad.<span class="fu">setDislikeDialog</span>(dislikeDialog);</span>
<span id="cb42-120"><a href="#cb42-120"></a>                <span class="kw">return</span>;</span>
<span id="cb42-121"><a href="#cb42-121"></a>            }</span>
<span id="cb42-122"><a href="#cb42-122"></a>            <span class="co">//使用默认个性化模板中默认dislike弹出样式</span></span>
<span id="cb42-123"><a href="#cb42-123"></a>            ad.<span class="fu">setDislikeCallback</span>(BannerExpressActivity.<span class="fu">this</span>, <span class="kw">new</span> TTAdDislike.<span class="fu">DislikeInteractionCallback</span>() {</span>
<span id="cb42-124"><a href="#cb42-124"></a>                <span class="at">@Override</span></span>
<span id="cb42-125"><a href="#cb42-125"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSelected</span>(<span class="dt">int</span> position, <span class="bu">String</span> value) {</span>
<span id="cb42-126"><a href="#cb42-126"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;点击 &quot;</span> + value);</span>
<span id="cb42-127"><a href="#cb42-127"></a>                    <span class="co">//用户选择不喜欢原因后，移除广告展示</span></span>
<span id="cb42-128"><a href="#cb42-128"></a>                    mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb42-129"><a href="#cb42-129"></a>                }</span>
<span id="cb42-130"><a href="#cb42-130"></a>        </span>
<span id="cb42-131"><a href="#cb42-131"></a>                <span class="at">@Override</span></span>
<span id="cb42-132"><a href="#cb42-132"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCancel</span>() {</span>
<span id="cb42-133"><a href="#cb42-133"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;点击取消 &quot;</span>);</span>
<span id="cb42-134"><a href="#cb42-134"></a>                }</span>
<span id="cb42-135"><a href="#cb42-135"></a>            });</span>
<span id="cb42-136"><a href="#cb42-136"></a>        }</span>
<span id="cb42-137"><a href="#cb42-137"></a>        </span>
<span id="cb42-138"><a href="#cb42-138"></a>        <span class="co">//在合适的时机，释放广告的资源</span></span>
<span id="cb42-139"><a href="#cb42-139"></a>        <span class="at">@Override</span></span>
<span id="cb42-140"><a href="#cb42-140"></a>        <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onDestroy</span>() {</span>
<span id="cb42-141"><a href="#cb42-141"></a>            <span class="kw">super</span>.<span class="fu">onDestroy</span>();</span>
<span id="cb42-142"><a href="#cb42-142"></a>            <span class="kw">if</span> (mTTAd != <span class="kw">null</span>) {</span>
<span id="cb42-143"><a href="#cb42-143"></a>                <span class="co">//调用destroy()方法释放</span></span>
<span id="cb42-144"><a href="#cb42-144"></a>                mTTAd.<span class="fu">destroy</span>();</span>
<span id="cb42-145"><a href="#cb42-145"></a>            }</span>
<span id="cb42-146"><a href="#cb42-146"></a>        }</span></code></pre></div>
<h4 id="展示个性化模板banner广告">2.11.2 展示个性化模板Banner广告</h4>
<div class="sourceCode" id="cb43"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb43-1"><a href="#cb43-1"></a> <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height) {</span>
<span id="cb43-2"><a href="#cb43-2"></a>                    <span class="co">//返回view的宽高 单位 dp</span></span>
<span id="cb43-3"><a href="#cb43-3"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;渲染成功&quot;</span>);</span>
<span id="cb43-4"><a href="#cb43-4"></a>                    <span class="co">//在渲染成功回调时展示广告，提升体验</span></span>
<span id="cb43-5"><a href="#cb43-5"></a>                    mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb43-6"><a href="#cb43-6"></a>                    mExpressContainer.<span class="fu">addView</span>(view);</span>
<span id="cb43-7"><a href="#cb43-7"></a>                }</span></code></pre></div>
<p>加载到广告后，调用TTNativeExpressAd.render()方法渲染广告，在onRenderSuccess(View view, float width, float height)方法 中，获取渲染成功后的广告view并添加到容器中展示。 详细代码请参考demo中的BannerExpressActivity使用示例。</p>
<h3 id="接入个性化模板插屏广告接口同-ttnativeexpressad">2.12 接入个性化模板插屏广告（接口同 TTNativeExpressAd）</h3>
<p>本SDK为接入方提供个性化模板插屏广告，开发者不用自行对广告样式进行编辑和渲染，可直接调用相关接口获取广告view,广告样式模板以及微调后期支持开发者编辑。</p>
<h4 id="加载个性化模板插屏广告绑定接口回调">2.12.1 加载个性化模板插屏广告，绑定接口回调</h4>
<p>接入方可调用<code>loadInteractionExpressAd(AdSlot adSlot, @NonNull NativeExpressAdListener listener)</code>异步加载广告，adslot为请求广告的信息，NativeExpressAdListener为广告加载成功或失败等回调。</p>
<p><strong>注意</strong>:期望个性化模板尺寸的参数设置中，如果高度设置为0,则高度会自适应,尺寸大小请保持和平台设置一致;<strong>插屏广告不支持dislike逻辑。</strong></p>
<div class="sourceCode" id="cb44"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb44-1"><a href="#cb44-1"></a> <span class="co">//设置广告参数</span></span>
<span id="cb44-2"><a href="#cb44-2"></a>   AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb44-3"><a href="#cb44-3"></a>                  .<span class="fu">setCodeId</span>(codeId) <span class="co">//广告位id</span></span>
<span id="cb44-4"><a href="#cb44-4"></a>                  .<span class="fu">setAdCount</span>(<span class="dv">1</span>) <span class="co">//请求广告数量为1到3条</span></span>
<span id="cb44-5"><a href="#cb44-5"></a>                  .<span class="fu">setExpressViewAcceptedSize</span>(expressViewWidth,expressViewHeight) <span class="co">//期望个性化模板广告view的size,单位dp</span></span>
<span id="cb44-6"><a href="#cb44-6"></a>                  .<span class="fu">setImageAcceptedSize</span>(<span class="dv">640</span>,<span class="dv">320</span> )<span class="co">//这个参数设置即可，不影响个性化模板广告的size</span></span>
<span id="cb44-7"><a href="#cb44-7"></a>                  .<span class="fu">build</span>();</span>
<span id="cb44-8"><a href="#cb44-8"></a>       <span class="co">//加载广告</span></span>
<span id="cb44-9"><a href="#cb44-9"></a>         mTTAdNative.<span class="fu">loadInteractionExpressAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">NativeExpressAdListener</span>() {</span>
<span id="cb44-10"><a href="#cb44-10"></a>                     <span class="at">@Override</span></span>
<span id="cb44-11"><a href="#cb44-11"></a>                     <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb44-12"><a href="#cb44-12"></a>                         TToast.<span class="fu">show</span>(NativeExpressActivity.<span class="fu">this</span>, <span class="st">&quot;load error : &quot;</span> + code + <span class="st">&quot;, &quot;</span> + message);</span>
<span id="cb44-13"><a href="#cb44-13"></a>                         mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb44-14"><a href="#cb44-14"></a>                     }</span>
<span id="cb44-15"><a href="#cb44-15"></a>         </span>
<span id="cb44-16"><a href="#cb44-16"></a>                     <span class="at">@Override</span></span>
<span id="cb44-17"><a href="#cb44-17"></a>                     <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onNativeExpressAdLoad</span>(<span class="bu">List</span>&lt;TTNativeExpressAd&gt; ads) {</span>
<span id="cb44-18"><a href="#cb44-18"></a>                         <span class="kw">if</span> (ads == <span class="kw">null</span> || ads.<span class="fu">size</span>() == <span class="dv">0</span>){</span>
<span id="cb44-19"><a href="#cb44-19"></a>                             <span class="kw">return</span>;</span>
<span id="cb44-20"><a href="#cb44-20"></a>                         }</span>
<span id="cb44-21"><a href="#cb44-21"></a>                         mTTAd = ads.<span class="fu">get</span>(<span class="dv">0</span>);</span>
<span id="cb44-22"><a href="#cb44-22"></a>                         <span class="fu">bindAdListener</span>(mTTAd);</span>
<span id="cb44-23"><a href="#cb44-23"></a>                         mTTAd.<span class="fu">render</span>();<span class="co">//调用render开始渲染广告</span></span>
<span id="cb44-24"><a href="#cb44-24"></a>                     }</span>
<span id="cb44-25"><a href="#cb44-25"></a>                 });</span>
<span id="cb44-26"><a href="#cb44-26"></a>    <span class="co">//绑定广告行为</span></span>
<span id="cb44-27"><a href="#cb44-27"></a>    <span class="kw">private</span> <span class="dt">void</span> <span class="fu">bindAdListener</span>(TTNativeExpressAd ad) {</span>
<span id="cb44-28"><a href="#cb44-28"></a>            ad.<span class="fu">setExpressInteractionListener</span>(<span class="kw">new</span> TTNativeExpressAd.<span class="fu">AdInteractionListener</span>() {</span>
<span id="cb44-29"><a href="#cb44-29"></a>                </span>
<span id="cb44-30"><a href="#cb44-30"></a>                <span class="at">@Override</span></span>
<span id="cb44-31"><a href="#cb44-31"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdDismiss</span>() {</span>
<span id="cb44-32"><a href="#cb44-32"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告关闭&quot;</span>);</span>
<span id="cb44-33"><a href="#cb44-33"></a>                }</span>
<span id="cb44-34"><a href="#cb44-34"></a>                </span>
<span id="cb44-35"><a href="#cb44-35"></a>                <span class="at">@Override</span></span>
<span id="cb44-36"><a href="#cb44-36"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdClicked</span>(<span class="bu">View</span> view, <span class="dt">int</span> type) {</span>
<span id="cb44-37"><a href="#cb44-37"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告被点击&quot;</span>);</span>
<span id="cb44-38"><a href="#cb44-38"></a>                }</span>
<span id="cb44-39"><a href="#cb44-39"></a>    </span>
<span id="cb44-40"><a href="#cb44-40"></a>                <span class="at">@Override</span></span>
<span id="cb44-41"><a href="#cb44-41"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdShow</span>(<span class="bu">View</span> view, <span class="dt">int</span> type) {</span>
<span id="cb44-42"><a href="#cb44-42"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;广告展示&quot;</span>);</span>
<span id="cb44-43"><a href="#cb44-43"></a>                }</span>
<span id="cb44-44"><a href="#cb44-44"></a>    </span>
<span id="cb44-45"><a href="#cb44-45"></a>                <span class="at">@Override</span></span>
<span id="cb44-46"><a href="#cb44-46"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderFail</span>(<span class="bu">View</span> view, <span class="bu">String</span> msg, <span class="dt">int</span> code) {</span>
<span id="cb44-47"><a href="#cb44-47"></a>                    Log.<span class="fu">e</span>(<span class="st">&quot;ExpressView&quot;</span>,<span class="st">&quot;render fail:&quot;</span>+(<span class="bu">System</span>.<span class="fu">currentTimeMillis</span>() - startTime));</span>
<span id="cb44-48"><a href="#cb44-48"></a>                    TToast.<span class="fu">show</span>(mContext, msg+<span class="st">&quot; code:&quot;</span>+code);</span>
<span id="cb44-49"><a href="#cb44-49"></a>                }</span>
<span id="cb44-50"><a href="#cb44-50"></a>    </span>
<span id="cb44-51"><a href="#cb44-51"></a>                <span class="at">@Override</span></span>
<span id="cb44-52"><a href="#cb44-52"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height) {</span>
<span id="cb44-53"><a href="#cb44-53"></a>                    <span class="co">//返回view的宽高 单位 dp</span></span>
<span id="cb44-54"><a href="#cb44-54"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;渲染成功&quot;</span>);</span>
<span id="cb44-55"><a href="#cb44-55"></a>                    <span class="co">//在渲染成功回调时展示广告，提升体验</span></span>
<span id="cb44-56"><a href="#cb44-56"></a>                    mExpressContainer.<span class="fu">removeAllViews</span>();</span>
<span id="cb44-57"><a href="#cb44-57"></a>                    mExpressContainer.<span class="fu">addView</span>(view);</span>
<span id="cb44-58"><a href="#cb44-58"></a>                }</span>
<span id="cb44-59"><a href="#cb44-59"></a>            });</span>
<span id="cb44-60"><a href="#cb44-60"></a>           </span>
<span id="cb44-61"><a href="#cb44-61"></a>            <span class="kw">if</span> (ad.<span class="fu">getInteractionType</span>() != TTAdConstant.<span class="fu">INTERACTION_TYPE_DOWNLOAD</span>){</span>
<span id="cb44-62"><a href="#cb44-62"></a>                <span class="kw">return</span>;</span>
<span id="cb44-63"><a href="#cb44-63"></a>            }</span>
<span id="cb44-64"><a href="#cb44-64"></a>            <span class="co">//可选，下载监听设置</span></span>
<span id="cb44-65"><a href="#cb44-65"></a>            ad.<span class="fu">setDownloadListener</span>(<span class="kw">new</span> <span class="fu">TTAppDownloadListener</span>() {</span>
<span id="cb44-66"><a href="#cb44-66"></a>                <span class="at">@Override</span></span>
<span id="cb44-67"><a href="#cb44-67"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onIdle</span>() {</span>
<span id="cb44-68"><a href="#cb44-68"></a>                    TToast.<span class="fu">show</span>(InteractionExpressActivity.<span class="fu">this</span>, <span class="st">&quot;点击开始下载&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb44-69"><a href="#cb44-69"></a>                }</span>
<span id="cb44-70"><a href="#cb44-70"></a>    </span>
<span id="cb44-71"><a href="#cb44-71"></a>                <span class="at">@Override</span></span>
<span id="cb44-72"><a href="#cb44-72"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadActive</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb44-73"><a href="#cb44-73"></a>                    <span class="kw">if</span> (!mHasShowDownloadActive) {</span>
<span id="cb44-74"><a href="#cb44-74"></a>                        mHasShowDownloadActive = <span class="kw">true</span>;</span>
<span id="cb44-75"><a href="#cb44-75"></a>                        TToast.<span class="fu">show</span>(InteractionExpressActivity.<span class="fu">this</span>, <span class="st">&quot;下载中，点击暂停&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb44-76"><a href="#cb44-76"></a>                    }</span>
<span id="cb44-77"><a href="#cb44-77"></a>                }</span>
<span id="cb44-78"><a href="#cb44-78"></a>    </span>
<span id="cb44-79"><a href="#cb44-79"></a>                <span class="at">@Override</span></span>
<span id="cb44-80"><a href="#cb44-80"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadPaused</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb44-81"><a href="#cb44-81"></a>                    TToast.<span class="fu">show</span>(InteractionExpressActivity.<span class="fu">this</span>, <span class="st">&quot;下载暂停，点击继续&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb44-82"><a href="#cb44-82"></a>                }</span>
<span id="cb44-83"><a href="#cb44-83"></a>    </span>
<span id="cb44-84"><a href="#cb44-84"></a>                <span class="at">@Override</span></span>
<span id="cb44-85"><a href="#cb44-85"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadFailed</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb44-86"><a href="#cb44-86"></a>                    TToast.<span class="fu">show</span>(InteractionExpressActivity.<span class="fu">this</span>, <span class="st">&quot;下载失败，点击重新下载&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb44-87"><a href="#cb44-87"></a>                }</span>
<span id="cb44-88"><a href="#cb44-88"></a>    </span>
<span id="cb44-89"><a href="#cb44-89"></a>                <span class="at">@Override</span></span>
<span id="cb44-90"><a href="#cb44-90"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onInstalled</span>(<span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb44-91"><a href="#cb44-91"></a>                    TToast.<span class="fu">show</span>(InteractionExpressActivity.<span class="fu">this</span>, <span class="st">&quot;安装完成，点击图片打开&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb44-92"><a href="#cb44-92"></a>                }</span>
<span id="cb44-93"><a href="#cb44-93"></a>    </span>
<span id="cb44-94"><a href="#cb44-94"></a>                <span class="at">@Override</span></span>
<span id="cb44-95"><a href="#cb44-95"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadFinished</span>(<span class="dt">long</span> totalBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb44-96"><a href="#cb44-96"></a>                    TToast.<span class="fu">show</span>(InteractionExpressActivity.<span class="fu">this</span>, <span class="st">&quot;点击安装&quot;</span>, Toast.<span class="fu">LENGTH_LONG</span>);</span>
<span id="cb44-97"><a href="#cb44-97"></a>                }</span>
<span id="cb44-98"><a href="#cb44-98"></a>            });</span>
<span id="cb44-99"><a href="#cb44-99"></a>        }</span>
<span id="cb44-100"><a href="#cb44-100"></a>        </span>
<span id="cb44-101"><a href="#cb44-101"></a>        <span class="co">//在合适的时机，释放广告的资源</span></span>
<span id="cb44-102"><a href="#cb44-102"></a>        <span class="at">@Override</span></span>
<span id="cb44-103"><a href="#cb44-103"></a>        <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onDestroy</span>() {</span>
<span id="cb44-104"><a href="#cb44-104"></a>            <span class="kw">super</span>.<span class="fu">onDestroy</span>();</span>
<span id="cb44-105"><a href="#cb44-105"></a>            <span class="kw">if</span> (mTTAd != <span class="kw">null</span>) {</span>
<span id="cb44-106"><a href="#cb44-106"></a>                <span class="co">//调用destroy()方法释放</span></span>
<span id="cb44-107"><a href="#cb44-107"></a>                mTTAd.<span class="fu">destroy</span>();</span>
<span id="cb44-108"><a href="#cb44-108"></a>            }</span>
<span id="cb44-109"><a href="#cb44-109"></a>        }</span></code></pre></div>
<h4 id="展示个性化模板插屏广告">2.12.2 展示个性化模板插屏广告</h4>
<div class="sourceCode" id="cb45"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb45-1"><a href="#cb45-1"></a> <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height) {</span>
<span id="cb45-2"><a href="#cb45-2"></a>                    <span class="co">//返回view的宽高 单位 dp</span></span>
<span id="cb45-3"><a href="#cb45-3"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;渲染成功&quot;</span>);</span>
<span id="cb45-4"><a href="#cb45-4"></a>                    <span class="co">//在渲染成功回调时展示广告，提升体验</span></span>
<span id="cb45-5"><a href="#cb45-5"></a>                       mTTAd.<span class="fu">showInteractionExpressAd</span>(InteractionExpressActivity.<span class="fu">this</span>);</span>
<span id="cb45-6"><a href="#cb45-6"></a>                }</span></code></pre></div>
<p>加载到广告后，调用TTNativeExpressAd.render()方法渲染广告，在onRenderSuccess(View view, float width, float height)方法 回调中，调用展示插屏广告。详细代码请参考demo中的InteractionExpressActivity示例。</p>
<h3 id="接入个性化模板draw视频广告接口同-ttnativeexpressad">2.13 接入个性化模板Draw视频广告（接口同 TTNativeExpressAd）</h3>
<p>本SDK为接入方提供个性化模板Draw广告，开发者不用自行对广告样式进行编辑和渲染，可直接调用相关接口获取广告view,广告样式模板以及微调后期支持开发者编辑。</p>
<h4 id="加载个性化模板draw视频广告绑定接口回调">2.13.1 加载个性化模板Draw视频广告，绑定接口回调</h4>
<p>接入方可调用<code>loadExpressDrawFeedAd(AdSlot adSlot, @NonNull NativeExpressAdListener listener)</code>异步加载广告，adslot为请求广告的信息，NativeExpressAdListener为广告加载成功或失败等回调。</p>
<p><strong>注意</strong>:期望个性化模板尺寸的参数设置中，个性化模板Draw视频广告高度不能设置为0,尺寸大小请保持和平台设置一致;<strong>个性化模板Draw广告不支持dislike逻辑。</strong></p>
<div class="sourceCode" id="cb46"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb46-1"><a href="#cb46-1"></a> <span class="co">//设置广告参数</span></span>
<span id="cb46-2"><a href="#cb46-2"></a>   AdSlot adSlot = <span class="kw">new</span> AdSlot.<span class="fu">Builder</span>()</span>
<span id="cb46-3"><a href="#cb46-3"></a>                  .<span class="fu">setCodeId</span>(codeId) <span class="co">//广告位id</span></span>
<span id="cb46-4"><a href="#cb46-4"></a>                  .<span class="fu">setAdCount</span>(<span class="dv">1</span>) <span class="co">//请求广告数量为1到3条</span></span>
<span id="cb46-5"><a href="#cb46-5"></a>                  .<span class="fu">setExpressViewAcceptedSize</span>(expressViewWidth,expressViewHeight) <span class="co">//期望个性化模板广告view的size,单位dp</span></span>
<span id="cb46-6"><a href="#cb46-6"></a>                  .<span class="fu">setImageAcceptedSize</span>(<span class="dv">640</span>,<span class="dv">320</span> )<span class="co">//这个参数设置即可，不影响个性化模板广告的size</span></span>
<span id="cb46-7"><a href="#cb46-7"></a>                  .<span class="fu">build</span>();</span>
<span id="cb46-8"><a href="#cb46-8"></a>       <span class="co">//加载广告</span></span>
<span id="cb46-9"><a href="#cb46-9"></a>         mTTAdNative.<span class="fu">loadExpressDrawFeedAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">NativeExpressAdListener</span>() {</span>
<span id="cb46-10"><a href="#cb46-10"></a>                     <span class="at">@Override</span></span>
<span id="cb46-11"><a href="#cb46-11"></a>                     <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb46-12"><a href="#cb46-12"></a>                         TToast.<span class="fu">show</span>(DrawNativeExpressVideoActivity.<span class="fu">this</span>, <span class="st">&quot;load error : &quot;</span> + code + <span class="st">&quot;, &quot;</span> + message);</span>
<span id="cb46-13"><a href="#cb46-13"></a>                     }</span>
<span id="cb46-14"><a href="#cb46-14"></a>         </span>
<span id="cb46-15"><a href="#cb46-15"></a>                     <span class="at">@Override</span></span>
<span id="cb46-16"><a href="#cb46-16"></a>                     <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onNativeExpressAdLoad</span>(<span class="bu">List</span>&lt;TTNativeExpressAd&gt; ads) {</span>
<span id="cb46-17"><a href="#cb46-17"></a>                         <span class="kw">if</span> (ads == <span class="kw">null</span> || ads.<span class="fu">size</span>() == <span class="dv">0</span>){</span>
<span id="cb46-18"><a href="#cb46-18"></a>                             <span class="kw">return</span>;</span>
<span id="cb46-19"><a href="#cb46-19"></a>                         }</span>
<span id="cb46-20"><a href="#cb46-20"></a>                         <span class="kw">for</span> (<span class="dt">final</span> TTNativeExpressAd ad : ads) {</span>
<span id="cb46-21"><a href="#cb46-21"></a>                         <span class="co">//设置监听回调</span></span>
<span id="cb46-22"><a href="#cb46-22"></a>                         ad.<span class="fu">setVideoAdListener</span>(<span class="kw">new</span> TTNativeExpressAd.<span class="fu">ExpressVideoAdListener</span>() {<span class="co">//略});</span></span>
<span id="cb46-23"><a href="#cb46-23"></a>                         <span class="co">//是否允许点击暂停视频播放</span></span>
<span id="cb46-24"><a href="#cb46-24"></a>                         ad.<span class="fu">setCanInterruptVideoPlay</span>(<span class="kw">true</span>);</span>
<span id="cb46-25"><a href="#cb46-25"></a>                         ad.<span class="fu">setExpressInteractionListener</span>(<span class="kw">new</span> TTNativeExpressAd.<span class="fu">ExpressAdInteractionListener</span>() {</span>
<span id="cb46-26"><a href="#cb46-26"></a>                             <span class="at">@Override</span></span>
<span id="cb46-27"><a href="#cb46-27"></a>                             <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdClicked</span>(<span class="bu">View</span> view, <span class="dt">int</span> type) {</span>
<span id="cb46-28"><a href="#cb46-28"></a></span>
<span id="cb46-29"><a href="#cb46-29"></a>                             }</span>
<span id="cb46-30"><a href="#cb46-30"></a></span>
<span id="cb46-31"><a href="#cb46-31"></a>                             <span class="at">@Override</span></span>
<span id="cb46-32"><a href="#cb46-32"></a>                             <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onAdShow</span>(<span class="bu">View</span> view, <span class="dt">int</span> type) {</span>
<span id="cb46-33"><a href="#cb46-33"></a></span>
<span id="cb46-34"><a href="#cb46-34"></a>                             }</span>
<span id="cb46-35"><a href="#cb46-35"></a></span>
<span id="cb46-36"><a href="#cb46-36"></a>                             <span class="at">@Override</span></span>
<span id="cb46-37"><a href="#cb46-37"></a>                            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderFail</span>(<span class="bu">View</span> view, <span class="bu">String</span> msg, <span class="dt">int</span> code) {</span>
<span id="cb46-38"><a href="#cb46-38"></a></span>
<span id="cb46-39"><a href="#cb46-39"></a>                             }</span>
<span id="cb46-40"><a href="#cb46-40"></a></span>
<span id="cb46-41"><a href="#cb46-41"></a>                             <span class="at">@Override</span></span>
<span id="cb46-42"><a href="#cb46-42"></a>                             <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height) {</span>
<span id="cb46-43"><a href="#cb46-43"></a>                             TToast.<span class="fu">show</span>(DrawNativeExpressVideoActivity.<span class="fu">this</span>, <span class="st">&quot;渲染成功&quot;</span>);</span>
<span id="cb46-44"><a href="#cb46-44"></a>                             <span class="dt">int</span> random = (<span class="dt">int</span>) (<span class="bu">Math</span>.<span class="fu">random</span>() * <span class="dv">100</span>);</span>
<span id="cb46-45"><a href="#cb46-45"></a>                             <span class="dt">int</span> index = random % videos.<span class="fu">length</span>;</span>
<span id="cb46-46"><a href="#cb46-46"></a>                             <span class="kw">if</span> (index == <span class="dv">0</span>){</span>
<span id="cb46-47"><a href="#cb46-47"></a>                                    index++;</span>
<span id="cb46-48"><a href="#cb46-48"></a>                             }</span>
<span id="cb46-49"><a href="#cb46-49"></a>                             datas.<span class="fu">add</span>(index, <span class="kw">new</span> <span class="fu">Item</span>(TYPE_AD_ITEM, ad, -<span class="dv">1</span>, -<span class="dv">1</span>));</span>
<span id="cb46-50"><a href="#cb46-50"></a>                             mAdapter.<span class="fu">notifyDataSetChanged</span>();</span>
<span id="cb46-51"><a href="#cb46-51"></a>                             }</span>
<span id="cb46-52"><a href="#cb46-52"></a>                          });</span>
<span id="cb46-53"><a href="#cb46-53"></a>                         ad.<span class="fu">render</span>();<span class="co">//调用render开始渲染广告</span></span>
<span id="cb46-54"><a href="#cb46-54"></a>                     }</span>
<span id="cb46-55"><a href="#cb46-55"></a>                 });</span>
<span id="cb46-56"><a href="#cb46-56"></a>            }</span>
<span id="cb46-57"><a href="#cb46-57"></a>        </span>
<span id="cb46-58"><a href="#cb46-58"></a>        <span class="co">//在合适的时机，释放广告的资源</span></span>
<span id="cb46-59"><a href="#cb46-59"></a>        <span class="at">@Override</span></span>
<span id="cb46-60"><a href="#cb46-60"></a>        <span class="kw">protected</span> <span class="dt">void</span> <span class="fu">onDestroy</span>() {</span>
<span id="cb46-61"><a href="#cb46-61"></a>            <span class="kw">super</span>.<span class="fu">onDestroy</span>();</span>
<span id="cb46-62"><a href="#cb46-62"></a>            <span class="kw">if</span> (mTTAd != <span class="kw">null</span>) {</span>
<span id="cb46-63"><a href="#cb46-63"></a>                <span class="co">//调用destroy()方法释放</span></span>
<span id="cb46-64"><a href="#cb46-64"></a>                mTTAd.<span class="fu">destroy</span>();</span>
<span id="cb46-65"><a href="#cb46-65"></a>            }</span>
<span id="cb46-66"><a href="#cb46-66"></a>        }</span></code></pre></div>
<h4 id="展示个性化模板draw视频广告">2.13.2 展示个性化模板Draw视频广告</h4>
<div class="sourceCode" id="cb47"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb47-1"><a href="#cb47-1"></a> <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onRenderSuccess</span>(<span class="bu">View</span> view, <span class="dt">float</span> width, <span class="dt">float</span> height) {</span>
<span id="cb47-2"><a href="#cb47-2"></a>                    <span class="co">//返回view的宽高 单位 dp</span></span>
<span id="cb47-3"><a href="#cb47-3"></a>                    TToast.<span class="fu">show</span>(mContext, <span class="st">&quot;渲染成功&quot;</span>);</span>
<span id="cb47-4"><a href="#cb47-4"></a>                    <span class="co">//在渲染成功回调时将广告加入页面中，提升体验</span></span>
<span id="cb47-5"><a href="#cb47-5"></a>                    <span class="co">//todo 接入中完善更新逻辑</span></span>
<span id="cb47-6"><a href="#cb47-6"></a>                }</span></code></pre></div>
<p>加载到广告后，调用TTNativeExpressAd.render()方法渲染广告，在onRenderSuccess(View view, float width, float height)方法 回调中，处理添加广告的逻辑。详细代码请参考demo中的DrawNativeExpressVideoActivity示例。</p>
<h3 id="下载监听器注册">2.14 下载监听器注册：</h3>
<p>SDK针对应用下载广告提供了下载状态监听器，接入方可注册该监听器以监听下载状态的变化，监听器支持未下载、下载中、下载暂停、下载失败、下载完成、安装完成的回调。</p>
<h4 id="下载监听回调说明">2.14.1 下载监听回调说明</h4>
<div class="sourceCode" id="cb48"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb48-1"><a href="#cb48-1"></a><span class="kw">public</span> <span class="kw">interface</span> TTAppDownloadListener {</span>
<span id="cb48-2"><a href="#cb48-2"></a></span>
<span id="cb48-3"><a href="#cb48-3"></a>    <span class="dt">void</span> <span class="fu">onIdle</span>(); <span class="co">// 未开始下载</span></span>
<span id="cb48-4"><a href="#cb48-4"></a></span>
<span id="cb48-5"><a href="#cb48-5"></a>    <span class="co">/**</span></span>
<span id="cb48-6"><a href="#cb48-6"></a>     <span class="co">*</span> 下载中回调</span>
<span id="cb48-7"><a href="#cb48-7"></a>     <span class="co">* </span><span class="an">@param totalBytes </span>安装包总字节数 <span class="co">-1</span> ：未知</span>
<span id="cb48-8"><a href="#cb48-8"></a>     <span class="co">*</span> <span class="an">@param currBytes </span>当前已下载的字节数</span>
<span id="cb48-9"><a href="#cb48-9"></a>     <span class="co">*</span> <span class="an">@param fileName </span>下载文件名称</span>
<span id="cb48-10"><a href="#cb48-10"></a>     <span class="co">*</span> <span class="an">@param appName </span>当前下载的APP名</span>
<span id="cb48-11"><a href="#cb48-11"></a>     <span class="co">*/</span></span>
<span id="cb48-12"><a href="#cb48-12"></a>    <span class="dt">void</span> <span class="fu">onDownloadActive</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName); <span class="co">// 下载中</span></span>
<span id="cb48-13"><a href="#cb48-13"></a></span>
<span id="cb48-14"><a href="#cb48-14"></a>    <span class="co">/**</span></span>
<span id="cb48-15"><a href="#cb48-15"></a>     <span class="co">*</span> 下载暂停回调</span>
<span id="cb48-16"><a href="#cb48-16"></a>     <span class="co">* </span><span class="an">@param totalBytes </span>安装包总字节数 <span class="co">-1</span> ：未知</span>
<span id="cb48-17"><a href="#cb48-17"></a>     <span class="co">*</span> <span class="an">@param currBytes </span>当前已下载的字节数</span>
<span id="cb48-18"><a href="#cb48-18"></a>     <span class="co">*</span> <span class="an">@param fileName </span>下载文件名称</span>
<span id="cb48-19"><a href="#cb48-19"></a>     <span class="co">*</span> <span class="an">@param appName </span>当前下载的APP名</span>
<span id="cb48-20"><a href="#cb48-20"></a>     <span class="co">*/</span></span>
<span id="cb48-21"><a href="#cb48-21"></a>    <span class="dt">void</span> <span class="fu">onDownloadPaused</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName);</span>
<span id="cb48-22"><a href="#cb48-22"></a></span>
<span id="cb48-23"><a href="#cb48-23"></a>    <span class="co">/**</span></span>
<span id="cb48-24"><a href="#cb48-24"></a>     <span class="co">*</span> 下载失败回调</span>
<span id="cb48-25"><a href="#cb48-25"></a>     <span class="co">* </span><span class="an">@param totalBytes </span>安装包总字节数 <span class="co">-1</span> ：未知</span>
<span id="cb48-26"><a href="#cb48-26"></a>     <span class="co">*</span> <span class="an">@param currBytes </span>当前已下载的字节数</span>
<span id="cb48-27"><a href="#cb48-27"></a>     <span class="co">*</span> <span class="an">@param fileName </span>下载文件名称</span>
<span id="cb48-28"><a href="#cb48-28"></a>     <span class="co">*</span> <span class="an">@param appName </span>当前下载的APP名</span>
<span id="cb48-29"><a href="#cb48-29"></a>     <span class="co">*/</span></span>
<span id="cb48-30"><a href="#cb48-30"></a>    <span class="dt">void</span> <span class="fu">onDownloadFailed</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName);</span>
<span id="cb48-31"><a href="#cb48-31"></a></span>
<span id="cb48-32"><a href="#cb48-32"></a>    <span class="co">/**</span></span>
<span id="cb48-33"><a href="#cb48-33"></a>     <span class="co">*</span> 下载完成回调</span>
<span id="cb48-34"><a href="#cb48-34"></a>     <span class="co">* </span><span class="an">@param totalBytes </span>安装包总字节数 <span class="co">-1</span> ：未知</span>
<span id="cb48-35"><a href="#cb48-35"></a>     <span class="co">*</span> <span class="an">@param fileName </span>下载文件名称</span>
<span id="cb48-36"><a href="#cb48-36"></a>     <span class="co">*</span> <span class="an">@param appName </span>当前下载的APP名</span>
<span id="cb48-37"><a href="#cb48-37"></a>     <span class="co">*/</span></span>
<span id="cb48-38"><a href="#cb48-38"></a>    <span class="dt">void</span> <span class="fu">onDownloadFinished</span>(<span class="dt">long</span> totalBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName);</span>
<span id="cb48-39"><a href="#cb48-39"></a></span>
<span id="cb48-40"><a href="#cb48-40"></a>    <span class="co">/**</span></span>
<span id="cb48-41"><a href="#cb48-41"></a>     <span class="co">*</span> 安装完成回调</span>
<span id="cb48-42"><a href="#cb48-42"></a>     <span class="co">* </span><span class="an">@param fileName </span>下载文件名称</span>
<span id="cb48-43"><a href="#cb48-43"></a>     <span class="co">*</span> <span class="an">@param appName </span>当前下载的APP名</span>
<span id="cb48-44"><a href="#cb48-44"></a>     <span class="co">*/</span></span>
<span id="cb48-45"><a href="#cb48-45"></a>    <span class="dt">void</span> <span class="fu">onInstalled</span>(<span class="bu">String</span> fileName, <span class="bu">String</span> appName);</span>
<span id="cb48-46"><a href="#cb48-46"></a></span>
<span id="cb48-47"><a href="#cb48-47"></a>}</span></code></pre></div>
<h4 id="注册下载监听器">2.14.2 注册下载监听器</h4>
<p>当返回的广告为应用下载类型，即ad.getInteractionType() == TTAdConstant.INTERACTION_TYPE_DOWNLOAD时，接入方可调用如下示例代码注册下载监听器：</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb49-1"><a href="#cb49-1"></a>TTAppDownloadListener downloadListener = <span class="kw">new</span> <span class="fu">TTAppDownloadListener</span>() {</span>
<span id="cb49-2"><a href="#cb49-2"></a>        <span class="at">@Override</span></span>
<span id="cb49-3"><a href="#cb49-3"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onIdle</span>() {</span>
<span id="cb49-4"><a href="#cb49-4"></a>            <span class="kw">if</span> (!<span class="fu">isValid</span>()) {</span>
<span id="cb49-5"><a href="#cb49-5"></a>                <span class="kw">return</span>;</span>
<span id="cb49-6"><a href="#cb49-6"></a>            }</span>
<span id="cb49-7"><a href="#cb49-7"></a>            adCreativeButton.<span class="fu">setText</span>(<span class="st">&quot;开始下载&quot;</span>);</span>
<span id="cb49-8"><a href="#cb49-8"></a>            adViewHolder.<span class="fu">mStopButton</span>.<span class="fu">setText</span>(<span class="st">&quot;开始下载&quot;</span>);</span>
<span id="cb49-9"><a href="#cb49-9"></a>        }</span>
<span id="cb49-10"><a href="#cb49-10"></a>    </span>
<span id="cb49-11"><a href="#cb49-11"></a>        <span class="at">@Override</span></span>
<span id="cb49-12"><a href="#cb49-12"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadActive</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb49-13"><a href="#cb49-13"></a>            <span class="kw">if</span> (!<span class="fu">isValid</span>()) {</span>
<span id="cb49-14"><a href="#cb49-14"></a>                <span class="kw">return</span>;</span>
<span id="cb49-15"><a href="#cb49-15"></a>            }</span>
<span id="cb49-16"><a href="#cb49-16"></a>            <span class="kw">if</span> (totalBytes &lt; <span class="dv">0L</span>) {</span>
<span id="cb49-17"><a href="#cb49-17"></a>                adCreativeButton.<span class="fu">setText</span>(<span class="st">&quot;下载中 percent: 0&quot;</span>);</span>
<span id="cb49-18"><a href="#cb49-18"></a>            } <span class="kw">else</span> {</span>
<span id="cb49-19"><a href="#cb49-19"></a>                adCreativeButton.<span class="fu">setText</span>(<span class="st">&quot;下载中 percent: &quot;</span> + (currBytes * <span class="dv">100</span> / totalBytes));</span>
<span id="cb49-20"><a href="#cb49-20"></a>            }</span>
<span id="cb49-21"><a href="#cb49-21"></a>            adViewHolder.<span class="fu">mStopButton</span>.<span class="fu">setText</span>(<span class="st">&quot;下载中&quot;</span>);</span>
<span id="cb49-22"><a href="#cb49-22"></a>        }</span>
<span id="cb49-23"><a href="#cb49-23"></a>    </span>
<span id="cb49-24"><a href="#cb49-24"></a>        <span class="at">@Override</span></span>
<span id="cb49-25"><a href="#cb49-25"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadPaused</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb49-26"><a href="#cb49-26"></a>            <span class="kw">if</span> (!<span class="fu">isValid</span>()) {</span>
<span id="cb49-27"><a href="#cb49-27"></a>                <span class="kw">return</span>;</span>
<span id="cb49-28"><a href="#cb49-28"></a>            }</span>
<span id="cb49-29"><a href="#cb49-29"></a>            adCreativeButton.<span class="fu">setText</span>(<span class="st">&quot;下载暂停 percent: &quot;</span> + (currBytes * <span class="dv">100</span> / totalBytes));</span>
<span id="cb49-30"><a href="#cb49-30"></a>            adViewHolder.<span class="fu">mStopButton</span>.<span class="fu">setText</span>(<span class="st">&quot;下载暂停&quot;</span>);</span>
<span id="cb49-31"><a href="#cb49-31"></a>        }</span>
<span id="cb49-32"><a href="#cb49-32"></a>    </span>
<span id="cb49-33"><a href="#cb49-33"></a>        <span class="at">@Override</span></span>
<span id="cb49-34"><a href="#cb49-34"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadFailed</span>(<span class="dt">long</span> totalBytes, <span class="dt">long</span> currBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb49-35"><a href="#cb49-35"></a>            <span class="kw">if</span> (!<span class="fu">isValid</span>()) {</span>
<span id="cb49-36"><a href="#cb49-36"></a>                <span class="kw">return</span>;</span>
<span id="cb49-37"><a href="#cb49-37"></a>            }</span>
<span id="cb49-38"><a href="#cb49-38"></a>            adCreativeButton.<span class="fu">setText</span>(<span class="st">&quot;重新下载&quot;</span>);</span>
<span id="cb49-39"><a href="#cb49-39"></a>            adViewHolder.<span class="fu">mStopButton</span>.<span class="fu">setText</span>(<span class="st">&quot;重新下载&quot;</span>);</span>
<span id="cb49-40"><a href="#cb49-40"></a>        }</span>
<span id="cb49-41"><a href="#cb49-41"></a>    </span>
<span id="cb49-42"><a href="#cb49-42"></a>        <span class="at">@Override</span></span>
<span id="cb49-43"><a href="#cb49-43"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onInstalled</span>(<span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb49-44"><a href="#cb49-44"></a>            <span class="kw">if</span> (!<span class="fu">isValid</span>()) {</span>
<span id="cb49-45"><a href="#cb49-45"></a>                <span class="kw">return</span>;</span>
<span id="cb49-46"><a href="#cb49-46"></a>            }</span>
<span id="cb49-47"><a href="#cb49-47"></a>            adCreativeButton.<span class="fu">setText</span>(<span class="st">&quot;点击打开&quot;</span>);</span>
<span id="cb49-48"><a href="#cb49-48"></a>            adViewHolder.<span class="fu">mStopButton</span>.<span class="fu">setText</span>(<span class="st">&quot;点击打开&quot;</span>);</span>
<span id="cb49-49"><a href="#cb49-49"></a>        }</span>
<span id="cb49-50"><a href="#cb49-50"></a>    </span>
<span id="cb49-51"><a href="#cb49-51"></a>        <span class="at">@Override</span></span>
<span id="cb49-52"><a href="#cb49-52"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onDownloadFinished</span>(<span class="dt">long</span> totalBytes, <span class="bu">String</span> fileName, <span class="bu">String</span> appName) {</span>
<span id="cb49-53"><a href="#cb49-53"></a>            <span class="kw">if</span> (!<span class="fu">isValid</span>()) {</span>
<span id="cb49-54"><a href="#cb49-54"></a>                <span class="kw">return</span>;</span>
<span id="cb49-55"><a href="#cb49-55"></a>            }</span>
<span id="cb49-56"><a href="#cb49-56"></a>            adCreativeButton.<span class="fu">setText</span>(<span class="st">&quot;点击安装&quot;</span>);</span>
<span id="cb49-57"><a href="#cb49-57"></a>            adViewHolder.<span class="fu">mStopButton</span>.<span class="fu">setText</span>(<span class="st">&quot;点击安装&quot;</span>);</span>
<span id="cb49-58"><a href="#cb49-58"></a>        }</span>
<span id="cb49-59"><a href="#cb49-59"></a>    </span>
<span id="cb49-60"><a href="#cb49-60"></a>        <span class="kw">private</span> <span class="dt">boolean</span> <span class="fu">isValid</span>() {</span>
<span id="cb49-61"><a href="#cb49-61"></a>            <span class="kw">return</span> mTTAppDownloadListenerMap.<span class="fu">get</span>(adViewHolder) == <span class="kw">this</span>;</span>
<span id="cb49-62"><a href="#cb49-62"></a>        }</span>
<span id="cb49-63"><a href="#cb49-63"></a>};</span>
<span id="cb49-64"><a href="#cb49-64"></a>ad.<span class="fu">setDownloadListener</span>(downloadListener); <span class="co">// 注册下载监听器</span></span></code></pre></div>
<p>下载监听器的注册详细示例详见Demo中的FeedActivity及BannerActivity的bindDownloadListener()方法。</p>
<h3 id="feed广告下载状态控制器">2.15 Feed广告下载状态控制器</h3>
<p>在信息流广告中，SDK为接入方提供广告APP下载状态控制器接口，接入方可以通过该接口控制信息流广告App的下载状态，例如：暂停下载、继续下载、取消下载；<br />
<strong>注意：该控制器只能控制信息流广告中的下载状态，如需要控制Banner、Intercation广告中的下载状态，请使用TTGlobalAppDownloadController</strong></p>
<h4 id="feed广告下载状态控制器接口说明">2.15.1 Feed广告下载状态控制器接口说明</h4>
<div class="sourceCode" id="cb50"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb50-1"><a href="#cb50-1"></a> <span class="kw">public</span> <span class="kw">interface</span> DownloadStatusController {</span>
<span id="cb50-2"><a href="#cb50-2"></a></span>
<span id="cb50-3"><a href="#cb50-3"></a>    <span class="co">/**</span></span>
<span id="cb50-4"><a href="#cb50-4"></a>     <span class="co">*</span> 在未点击创意按钮开始下载时调用，则会无效</span>
<span id="cb50-5"><a href="#cb50-5"></a>     <span class="co">*</span> 在正在下载中调用，则会暂停下载  【正在下载】--<span class="co">&gt;</span>【暂停下载】</span>
<span id="cb50-6"><a href="#cb50-6"></a>     <span class="co">*</span> 在暂停时调用，则会继续下载    【暂停下载】--<span class="co">&gt;</span>【继续下载】</span>
<span id="cb50-7"><a href="#cb50-7"></a>     <span class="co">*/</span></span>
<span id="cb50-8"><a href="#cb50-8"></a>    <span class="dt">void</span> <span class="fu">changeDownloadStatus</span>();</span>
<span id="cb50-9"><a href="#cb50-9"></a></span>
<span id="cb50-10"><a href="#cb50-10"></a>    <span class="co">/**</span></span>
<span id="cb50-11"><a href="#cb50-11"></a>     <span class="co">*</span> 取消当前下载任务</span>
<span id="cb50-12"><a href="#cb50-12"></a>     <span class="co">*/</span></span>
<span id="cb50-13"><a href="#cb50-13"></a>    <span class="dt">void</span> <span class="fu">cancelDownload</span>();</span>
<span id="cb50-14"><a href="#cb50-14"></a>} </span></code></pre></div>
<h4 id="接入feed广告app下载状态控制器">2.15.2 接入Feed广告App下载状态控制器</h4>
<p>当返回的广告为应用下载类型，即ad.getInteractionType() == TTAdConstant.INTERACTION_TYPE_DOWNLOAD时，接入方可调用如下示例代码接入Feed广告下载控制器：</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb51-1"><a href="#cb51-1"></a><span class="kw">private</span> <span class="dt">void</span> <span class="fu">bindDownLoadStatusController</span>(AdViewHolder adViewHolder, <span class="dt">final</span> TTFeedAd ad) {</span>
<span id="cb51-2"><a href="#cb51-2"></a>    <span class="dt">final</span> DownloadStatusController controller = ad.<span class="fu">getDownloadStatusController</span>();</span>
<span id="cb51-3"><a href="#cb51-3"></a>    adViewHolder.<span class="fu">mStopButton</span>.<span class="fu">setOnClickListener</span>(<span class="kw">new</span> <span class="bu">View</span>.<span class="fu">OnClickListener</span>() {</span>
<span id="cb51-4"><a href="#cb51-4"></a>        <span class="at">@Override</span></span>
<span id="cb51-5"><a href="#cb51-5"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onClick</span>(<span class="bu">View</span> v) {</span>
<span id="cb51-6"><a href="#cb51-6"></a>            <span class="kw">if</span> (controller != <span class="kw">null</span>) {</span>
<span id="cb51-7"><a href="#cb51-7"></a>                controller.<span class="fu">changeDownloadStatus</span>();</span>
<span id="cb51-8"><a href="#cb51-8"></a>                Toast.<span class="fu">makeText</span>(mContext, <span class="st">&quot;改变下载状态&quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb51-9"><a href="#cb51-9"></a>                Log.<span class="fu">d</span>(TAG, <span class="st">&quot;改变下载状态&quot;</span>);</span>
<span id="cb51-10"><a href="#cb51-10"></a>            }</span>
<span id="cb51-11"><a href="#cb51-11"></a>        }</span>
<span id="cb51-12"><a href="#cb51-12"></a>        });</span>
<span id="cb51-13"><a href="#cb51-13"></a>    adViewHolder.<span class="fu">mRemoveButton</span>.<span class="fu">setOnClickListener</span>(<span class="kw">new</span> <span class="bu">View</span>.<span class="fu">OnClickListener</span>() {</span>
<span id="cb51-14"><a href="#cb51-14"></a>        <span class="at">@Override</span></span>
<span id="cb51-15"><a href="#cb51-15"></a>        <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onClick</span>(<span class="bu">View</span> v) {</span>
<span id="cb51-16"><a href="#cb51-16"></a>            <span class="kw">if</span> (controller != <span class="kw">null</span>) {</span>
<span id="cb51-17"><a href="#cb51-17"></a>                controller.<span class="fu">cancelDownload</span>();</span>
<span id="cb51-18"><a href="#cb51-18"></a>                Toast.<span class="fu">makeText</span>(mContext, <span class="st">&quot;取消下载&quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb51-19"><a href="#cb51-19"></a>                Log.<span class="fu">d</span>(TAG, <span class="st">&quot;取消下载&quot;</span>);</span>
<span id="cb51-20"><a href="#cb51-20"></a>            }</span>
<span id="cb51-21"><a href="#cb51-21"></a>        }</span>
<span id="cb51-22"><a href="#cb51-22"></a>    });</span>
<span id="cb51-23"><a href="#cb51-23"></a>}</span></code></pre></div>
<p>接入DownloadStatusController的具体示例详见Demo中的FeedActivity的bindDownLoadStatusController方法</p>
<h3 id="接入dislike逻辑ttaddislike">2.16 接入Dislike逻辑（TTAdDislike）</h3>
<p>SDK为接入方提供了信息流广告、Banner广告的Dislike逻辑，当用户选择关闭广告时候，会有提示询问用户，包含“不感兴趣”、“看过了”选项供用户选择。该反馈主要用于头条广告对用户端的广告策略，用来优化提升广告的点击率，提升广告效果及合作伙伴的收益。<br />
<strong>注意：如果使用Dislike逻辑，初始化TTAdNative mTTAdNative = ttAdManager.createAdNative(activity)时，参数务必传入activity。</strong></p>
<h4 id="ttaddislike接口说明">2.16.1 TTAdDislike接口说明</h4>
<p>获得TTFeedAd或TTBannerAd后，调用TTFeedAd.getDislikeDialog()或TTBannerAd.getDislikeDialog()即可获得TTAdDislike对象。DislikeInteractionCallback为用户选择结果回调接口。</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb52-1"><a href="#cb52-1"></a><span class="kw">public</span> <span class="kw">interface</span> TTAdDislike {</span>
<span id="cb52-2"><a href="#cb52-2"></a>    <span class="co">/**</span></span>
<span id="cb52-3"><a href="#cb52-3"></a>     <span class="co">*</span> 弹出Dislike Dialog</span>
<span id="cb52-4"><a href="#cb52-4"></a>     <span class="co">*/</span></span>
<span id="cb52-5"><a href="#cb52-5"></a>    <span class="dt">void</span> <span class="fu">showDislikeDialog</span>();</span>
<span id="cb52-6"><a href="#cb52-6"></a></span>
<span id="cb52-7"><a href="#cb52-7"></a>    <span class="co">/**</span></span>
<span id="cb52-8"><a href="#cb52-8"></a>     <span class="co">*</span> 设置dislike选中时的回调</span>
<span id="cb52-9"><a href="#cb52-9"></a>     <span class="co">*/</span></span>
<span id="cb52-10"><a href="#cb52-10"></a>    <span class="dt">void</span> <span class="fu">setDislikeInteractionCallback</span>(DislikeInteractionCallback dislikeInteractionCallback);</span>
<span id="cb52-11"><a href="#cb52-11"></a></span>
<span id="cb52-12"><a href="#cb52-12"></a>    <span class="co">/**</span></span>
<span id="cb52-13"><a href="#cb52-13"></a>     <span class="co">*</span> 暴露给用户，处理dislike选择结果</span>
<span id="cb52-14"><a href="#cb52-14"></a>     <span class="co">*/</span></span>
<span id="cb52-15"><a href="#cb52-15"></a>    <span class="kw">interface</span> DislikeInteractionCallback {</span>
<span id="cb52-16"><a href="#cb52-16"></a></span>
<span id="cb52-17"><a href="#cb52-17"></a>        <span class="co">/**</span></span>
<span id="cb52-18"><a href="#cb52-18"></a>         <span class="co">* </span><span class="an">@param position </span>选择的位置</span>
<span id="cb52-19"><a href="#cb52-19"></a>         <span class="co">*</span> <span class="an">@param value </span>   选择的内容</span>
<span id="cb52-20"><a href="#cb52-20"></a>         <span class="co">*/</span></span>
<span id="cb52-21"><a href="#cb52-21"></a>        <span class="dt">void</span> <span class="fu">onSelected</span>(<span class="dt">int</span> position, <span class="bu">String</span> value);</span>
<span id="cb52-22"><a href="#cb52-22"></a></span>
<span id="cb52-23"><a href="#cb52-23"></a>        <span class="co">/**</span></span>
<span id="cb52-24"><a href="#cb52-24"></a>         <span class="co">*</span> 点击取消</span>
<span id="cb52-25"><a href="#cb52-25"></a>         <span class="co">*/</span></span>
<span id="cb52-26"><a href="#cb52-26"></a>        <span class="dt">void</span> <span class="fu">onCancel</span>();</span>
<span id="cb52-27"><a href="#cb52-27"></a>    }</span>
<span id="cb52-28"><a href="#cb52-28"></a>}</span></code></pre></div>
<h4 id="信息流广告接入dislike">2.16.2 信息流广告接入Dislike</h4>
<p>在获得TTFeedAd后，调用TTFeedAd.getDislikeDialog()获取TTAdDislike对象，然后为该对象设置用户选择结果回调。具体代码示例如下：</p>
<pre><code>//获取到TTFeedAd后，可接入dislike逻辑
final TTAdDislike ttAdDislike = ttFeedAd.getDislikeDialog();
if (ttAdDislike != null) {
      ttAdDislike.setDislikeInteractionCallback(new TTAdDislike.DislikeInteractionCallback() {
          @Override
          public void onSelected(int position, String value) {
                //用户选择了第position条理由，该条理由的内容为value
          }
    
          @Override
          public void onCancel() {
                //用户点击取消按钮
          }
      });
      dislikeIcon.setOnClickListener(new View.OnClickListener() {
          @Override
          public void onClick(View v) {
              ttAdDislike.showDislikeDialog();
          }
      });
}</code></pre>
<h4 id="banner广告接入dislike">2.16.3 Banner广告接入Dislike</h4>
<ul>
<li>方法一： 使用SDK内置DislikeIcon</li>
</ul>
<div class="sourceCode" id="cb54"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb54-1"><a href="#cb54-1"></a>mTTAdNative.<span class="fu">loadBannerAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">BannerAdListener</span>() {</span>
<span id="cb54-2"><a href="#cb54-2"></a></span>
<span id="cb54-3"><a href="#cb54-3"></a>    <span class="at">@Override</span></span>
<span id="cb54-4"><a href="#cb54-4"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb54-5"><a href="#cb54-5"></a>        Toast.<span class="fu">makeText</span>(BannerActivity.<span class="fu">this</span>, <span class="st">&quot;load error : &quot;</span> + code + <span class="st">&quot;, &quot;</span> + message, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb54-6"><a href="#cb54-6"></a>        mBannerContainer.<span class="fu">setVisibility</span>(<span class="bu">View</span>.<span class="fu">GONE</span>);</span>
<span id="cb54-7"><a href="#cb54-7"></a>        mTvDownloadText.<span class="fu">setVisibility</span>(<span class="bu">View</span>.<span class="fu">GONE</span>);</span>
<span id="cb54-8"><a href="#cb54-8"></a>    }</span>
<span id="cb54-9"><a href="#cb54-9"></a></span>
<span id="cb54-10"><a href="#cb54-10"></a>    <span class="at">@Override</span></span>
<span id="cb54-11"><a href="#cb54-11"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onBannerAdLoad</span>(<span class="dt">final</span> TTBannerAd ad) {</span>
<span id="cb54-12"><a href="#cb54-12"></a>        <span class="co">//省略其他代码，方便阅读</span></span>
<span id="cb54-13"><a href="#cb54-13"></a></span>
<span id="cb54-14"><a href="#cb54-14"></a>        <span class="co">//在banner中显示穿山甲提供的dislike icon</span></span>
<span id="cb54-15"><a href="#cb54-15"></a>        ad.<span class="fu">setShowDislikeIcon</span>(<span class="kw">new</span> TTAdDislike.<span class="fu">DislikeInteractionCallback</span>() {</span>
<span id="cb54-16"><a href="#cb54-16"></a>            <span class="at">@Override</span></span>
<span id="cb54-17"><a href="#cb54-17"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSelected</span>(<span class="dt">int</span> position, <span class="bu">String</span> value) {</span>
<span id="cb54-18"><a href="#cb54-18"></a>                Toast.<span class="fu">makeText</span>(mContext, <span class="st">&quot;点击 &quot;</span> + value, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb54-19"><a href="#cb54-19"></a>                mBannerContainer.<span class="fu">setVisibility</span>(<span class="bu">View</span>.<span class="fu">GONE</span>);</span>
<span id="cb54-20"><a href="#cb54-20"></a>            }</span>
<span id="cb54-21"><a href="#cb54-21"></a></span>
<span id="cb54-22"><a href="#cb54-22"></a>            <span class="at">@Override</span></span>
<span id="cb54-23"><a href="#cb54-23"></a>            <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCancel</span>() {</span>
<span id="cb54-24"><a href="#cb54-24"></a>                Toast.<span class="fu">makeText</span>(mContext, <span class="st">&quot;点击取消 &quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb54-25"><a href="#cb54-25"></a>            }</span>
<span id="cb54-26"><a href="#cb54-26"></a>        });</span>
<span id="cb54-27"><a href="#cb54-27"></a>    }</span>
<span id="cb54-28"><a href="#cb54-28"></a>});</span>
<span id="cb54-29"><a href="#cb54-29"></a>}</span></code></pre></div>
<ul>
<li>方法二: 使用自定义的DislikeIcon</li>
</ul>
<div class="sourceCode" id="cb55"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb55-1"><a href="#cb55-1"></a>mTTAdNative.<span class="fu">loadBannerAd</span>(adSlot, <span class="kw">new</span> TTAdNative.<span class="fu">BannerAdListener</span>() {</span>
<span id="cb55-2"><a href="#cb55-2"></a>    <span class="at">@Override</span></span>
<span id="cb55-3"><a href="#cb55-3"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onError</span>(<span class="dt">int</span> code, <span class="bu">String</span> message) {</span>
<span id="cb55-4"><a href="#cb55-4"></a>        Toast.<span class="fu">makeText</span>(BannerActivity.<span class="fu">this</span>, <span class="st">&quot;load error : &quot;</span> + code + <span class="st">&quot;, &quot;</span> + message, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb55-5"><a href="#cb55-5"></a>        mBannerContainer.<span class="fu">setVisibility</span>(<span class="bu">View</span>.<span class="fu">GONE</span>);</span>
<span id="cb55-6"><a href="#cb55-6"></a>        mTvDownloadText.<span class="fu">setVisibility</span>(<span class="bu">View</span>.<span class="fu">GONE</span>);</span>
<span id="cb55-7"><a href="#cb55-7"></a>    }</span>
<span id="cb55-8"><a href="#cb55-8"></a>    </span>
<span id="cb55-9"><a href="#cb55-9"></a>    <span class="at">@Override</span></span>
<span id="cb55-10"><a href="#cb55-10"></a>    <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onBannerAdLoad</span>(<span class="dt">final</span> TTBannerAd ad) {</span>
<span id="cb55-11"><a href="#cb55-11"></a>      <span class="co">//省略其他代码，方便阅读</span></span>
<span id="cb55-12"><a href="#cb55-12"></a>    </span>
<span id="cb55-13"><a href="#cb55-13"></a>        <span class="co">//获得穿山甲dislike dialog 接入方可以在自己的dislike icon 按钮中设置 mTTAdDislike.showDislikeDialog();</span></span>
<span id="cb55-14"><a href="#cb55-14"></a>    </span>
<span id="cb55-15"><a href="#cb55-15"></a>        mTTAdDislike = ad.<span class="fu">getDislikeDialog</span>(<span class="kw">new</span> TTAdDislike.<span class="fu">DislikeInteractionCallback</span>() {</span>
<span id="cb55-16"><a href="#cb55-16"></a>                <span class="at">@Override</span></span>
<span id="cb55-17"><a href="#cb55-17"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onSelected</span>(<span class="dt">int</span> position, <span class="bu">String</span> value) {</span>
<span id="cb55-18"><a href="#cb55-18"></a>                    Toast.<span class="fu">makeText</span>(mContext, <span class="st">&quot;点击 &quot;</span> + value, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb55-19"><a href="#cb55-19"></a>                }</span>
<span id="cb55-20"><a href="#cb55-20"></a>    </span>
<span id="cb55-21"><a href="#cb55-21"></a>                <span class="at">@Override</span></span>
<span id="cb55-22"><a href="#cb55-22"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onCancel</span>() {</span>
<span id="cb55-23"><a href="#cb55-23"></a>                    Toast.<span class="fu">makeText</span>(mContext, <span class="st">&quot;点击取消 &quot;</span>, Toast.<span class="fu">LENGTH_SHORT</span>).<span class="fu">show</span>();</span>
<span id="cb55-24"><a href="#cb55-24"></a>                }</span>
<span id="cb55-25"><a href="#cb55-25"></a>            });</span>
<span id="cb55-26"><a href="#cb55-26"></a>        <span class="kw">if</span> (mTTAdDislike != <span class="kw">null</span>) {</span>
<span id="cb55-27"><a href="#cb55-27"></a>            XXX.<span class="fu">setOnClickListener</span>(<span class="kw">new</span> <span class="bu">View</span>.<span class="fu">OnClickListener</span>() {</span>
<span id="cb55-28"><a href="#cb55-28"></a>                <span class="at">@Override</span></span>
<span id="cb55-29"><a href="#cb55-29"></a>                <span class="kw">public</span> <span class="dt">void</span> <span class="fu">onClick</span>(<span class="bu">View</span> v) {</span>
<span id="cb55-30"><a href="#cb55-30"></a>                    mTTAdDislike.<span class="fu">showDislikeDialog</span>();</span>
<span id="cb55-31"><a href="#cb55-31"></a>                }</span>
<span id="cb55-32"><a href="#cb55-32"></a>            });</span>
<span id="cb55-33"><a href="#cb55-33"></a>        }</span>
<span id="cb55-34"><a href="#cb55-34"></a>    }</span>
<span id="cb55-35"><a href="#cb55-35"></a>});</span></code></pre></div>
<p>接入Dislike的具体示例详见Demo中的FeedListActivity及BannerActivity</p>
<p>注：目前FeedListActivity的dislike使用方式已变更为自定义dislike</p>
<h4 id="自定义dislike对话框使用说明">2.16.4 自定义dislike对话框使用说明</h4>
<p>dislike对话框的使用可以有两种方式：1sdk默认自带的对话框、2开发者自定义dislike样式。</p>
<p>使用接口详见：</p>
<ol type="1">
<li>默认对话框：TTFeedAd.getDislikeDialog(Activity activity)</li>
<li>自定义样式对话框：TTFeedAd.getDislikeDialog(TTDislikeDialogAbstract dialog)</li>
</ol>
<p>重点注意：</p>
<ol type="1">
<li>对话框必须继承：TTDislikeDialogAbstract</li>
<li>列表选择view必须使用：TTDislikeListView</li>
</ol>
<p>具体使用方式详见demo：FeedListActivity#MyAdapter#bindDislikeCustom()</p>
<p>TTDislikeDialogAbstract抽象方法说明：</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode java"><code class="sourceCode java"><span id="cb56-1"><a href="#cb56-1"></a><span class="kw">public</span> <span class="kw">abstract</span> <span class="kw">class</span> TTDislikeDialogAbstract <span class="kw">extends</span> <span class="bu">Dialog</span> {</span>
<span id="cb56-2"><a href="#cb56-2"></a></span>
<span id="cb56-3"><a href="#cb56-3"></a>    <span class="co">/**</span></span>
<span id="cb56-4"><a href="#cb56-4"></a>     <span class="co">*</span> 布局view id</span>
<span id="cb56-5"><a href="#cb56-5"></a>     <span class="co">*</span></span>
<span id="cb56-6"><a href="#cb56-6"></a>     <span class="co">* </span><span class="an">@return </span>id</span>
<span id="cb56-7"><a href="#cb56-7"></a>     <span class="co">*/</span></span>
<span id="cb56-8"><a href="#cb56-8"></a>    <span class="kw">public</span> <span class="kw">abstract</span> <span class="dt">int</span> <span class="fu">getLayoutId</span>();</span>
<span id="cb56-9"><a href="#cb56-9"></a></span>
<span id="cb56-10"><a href="#cb56-10"></a>    <span class="co">/**</span></span>
<span id="cb56-11"><a href="#cb56-11"></a>     <span class="co">*</span> 获取listview所有id，这些listview必须继承自TTDislikeListView</span>
<span id="cb56-12"><a href="#cb56-12"></a>     <span class="co">*</span></span>
<span id="cb56-13"><a href="#cb56-13"></a>     <span class="co">* </span><span class="an">@return </span>listview id</span>
<span id="cb56-14"><a href="#cb56-14"></a>     <span class="co">*/</span></span>
<span id="cb56-15"><a href="#cb56-15"></a>    <span class="kw">public</span> <span class="kw">abstract</span> <span class="dt">int</span>[] <span class="fu">getTTDislikeListViewIds</span>();</span>
<span id="cb56-16"><a href="#cb56-16"></a></span>
<span id="cb56-17"><a href="#cb56-17"></a>    <span class="co">/**</span></span>
<span id="cb56-18"><a href="#cb56-18"></a>     <span class="co">*</span> 布局参数，可以为null</span>
<span id="cb56-19"><a href="#cb56-19"></a>     <span class="co">*</span></span>
<span id="cb56-20"><a href="#cb56-20"></a>     <span class="co">* </span><span class="an">@return </span>参数</span>
<span id="cb56-21"><a href="#cb56-21"></a>     <span class="co">*/</span></span>
<span id="cb56-22"><a href="#cb56-22"></a>    <span class="kw">public</span> <span class="kw">abstract</span> ViewGroup.<span class="fu">LayoutParams</span> <span class="fu">getLayoutParams</span>();</span>
<span id="cb56-23"><a href="#cb56-23"></a></span>
<span id="cb56-24"><a href="#cb56-24"></a>}</span></code></pre></div>
<h2 id="参考">3.参考</h2>
<h3 id="sdk错误码">3.1 SDK错误码</h3>
<table>
<thead>
<tr class="header">
<th>错误码</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>20000</td>
<td>成功</td>
</tr>
<tr class="even">
<td>40000</td>
<td>http content type错误</td>
</tr>
<tr class="odd">
<td>40001</td>
<td>http request pb错误</td>
</tr>
<tr class="even">
<td>40002</td>
<td>source_type=‘app’, 请求app不能为空</td>
</tr>
<tr class="odd">
<td>40003</td>
<td>source_type=‘wap’, 请求wap不能为空</td>
</tr>
<tr class="even">
<td>40004</td>
<td>广告位不能为空</td>
</tr>
<tr class="odd">
<td>40005</td>
<td>广告位尺寸不能为空</td>
</tr>
<tr class="even">
<td>40006</td>
<td>广告位ID不合法</td>
</tr>
<tr class="odd">
<td>40007</td>
<td>广告数量错误</td>
</tr>
<tr class="even">
<td>40008</td>
<td>图片尺寸错误</td>
</tr>
<tr class="odd">
<td>40009</td>
<td>媒体ID不合法</td>
</tr>
<tr class="even">
<td>40010</td>
<td>媒体类型不合法</td>
</tr>
<tr class="odd">
<td>40011</td>
<td>广告类型不合法</td>
</tr>
<tr class="even">
<td>40012</td>
<td>媒体接入类型不合法，已废弃</td>
</tr>
<tr class="odd">
<td>40013</td>
<td>代码位id小于9亿，但是adType不是开屏</td>
</tr>
<tr class="even">
<td>40014</td>
<td>redirect参数不正确</td>
</tr>
<tr class="odd">
<td>40015</td>
<td>媒体整改超过期限，请求非法</td>
</tr>
<tr class="even">
<td>40016</td>
<td>slot_id 与 app_id对应关系不合法</td>
</tr>
<tr class="odd">
<td>40017</td>
<td>媒体接入类型不合法 API/SDK</td>
</tr>
<tr class="even">
<td>40018</td>
<td>媒体包名与录入不一致</td>
</tr>
<tr class="odd">
<td>40019</td>
<td>媒体配置adtype和请求不一致</td>
</tr>
<tr class="even">
<td>40020</td>
<td>开发注册新上线广告位超出日请求量限制</td>
</tr>
<tr class="odd">
<td>40021</td>
<td>apk签名sha1值与媒体平台录入不一致</td>
</tr>
<tr class="even">
<td>40022</td>
<td>媒体请求素材是否原生与媒体平台录入不一致</td>
</tr>
<tr class="odd">
<td>40023</td>
<td>os字段填的不对</td>
</tr>
<tr class="even">
<td>40024</td>
<td>sdk 版本过低不返回广告</td>
</tr>
<tr class="odd">
<td>40025</td>
<td>引入SDK包不完整，建议校验SDK包完整性或联系技术支持</td>
</tr>
<tr class="even">
<td>40029</td>
<td>模板广告请求使用了错误的方式，见下方FAQ说明</td>
</tr>
<tr class="odd">
<td>50001</td>
<td>服务器错误</td>
</tr>
<tr class="even">
<td>60001</td>
<td>show event处理错误</td>
</tr>
<tr class="odd">
<td>60002</td>
<td>click event处理错误</td>
</tr>
<tr class="even">
<td>60007</td>
<td>激励视频验证服务器异常或处理失败</td>
</tr>
<tr class="odd">
<td>-1</td>
<td>数据解析失败</td>
</tr>
<tr class="even">
<td>-2</td>
<td>网络错误</td>
</tr>
<tr class="odd">
<td>-3</td>
<td>解析数据没有ad</td>
</tr>
<tr class="even">
<td>-4</td>
<td>返回数据缺少必要字段</td>
</tr>
<tr class="odd">
<td>-5</td>
<td>bannerAd加载图片失败</td>
</tr>
<tr class="even">
<td>-6</td>
<td>插屏广告图片加载失败</td>
</tr>
<tr class="odd">
<td>-7</td>
<td>开屏广告图片加载失败</td>
</tr>
<tr class="even">
<td>-8</td>
<td>频繁请求</td>
</tr>
<tr class="odd">
<td>-9</td>
<td>请求实体为空</td>
</tr>
<tr class="even">
<td>-10</td>
<td>缓存解析失败</td>
</tr>
<tr class="odd">
<td>-11</td>
<td>缓存过期</td>
</tr>
<tr class="even">
<td>-12</td>
<td>缓存中没有开屏广告</td>
</tr>
<tr class="odd">
<td>101</td>
<td>渲染结果数据解析失败</td>
</tr>
<tr class="even">
<td>102</td>
<td>主模板无效</td>
</tr>
<tr class="odd">
<td>103</td>
<td>模板差量无效</td>
</tr>
<tr class="even">
<td>104</td>
<td>物料数据异常</td>
</tr>
<tr class="odd">
<td>105</td>
<td>模板数据解析异常</td>
</tr>
<tr class="even">
<td>106</td>
<td>渲染异常</td>
</tr>
<tr class="odd">
<td>107</td>
<td>渲染超时未回调</td>
</tr>
</tbody>
</table>
<h3 id="sdk多进程支持">3.2 SDK多进程支持</h3>
<p>如果您的应用需要支持多进程，请务必设置TTAdConfig.supportMultiProcess(true)。</p>
<p>确认app多进程支持判断方法：1穿山甲sdk初始化、2穿山甲广告获取、3穿山甲广告展示，这三个关键点的调用在不同进程，否则即为单进程。</p>
<p>如非必要尽量不要使用多进程开关，多进程效率不如单进程高。</p>
<h3 id="sdk打包为独立插件">3.3 SDK打包为独立插件</h3>
<p>如果您想把SDK打包到您的独立插件中，请确认您所使用的插件方案是否支持SDK内使用RemoteView弹出notification，如不支持，请设置TTAdConfig.allowShowNotify(false)，然后设置TTAdConfig.globalDownloadListener(TTGlobalAppDownloadListener listener)，以便监听下载进度状态。</p>
<h3 id="主题配置">3.4 主题配置</h3>
<p>本SDK支持用户自定义下载删除弹窗、非Wifi下载提示弹窗的主题和落地页titleBar的主题。</p>
<h4 id="下载删除弹窗主题配置">3.4.1 下载删除弹窗主题配置</h4>
<p>用户可在styles.xml里覆盖下载删除弹窗、非Wifi下载提示弹窗的主题。</p>
<pre><code>&lt;!—配置下载删除弹窗的主题 默认为Theme.DeviceDefault.Light.Dialog&quot; —&gt;
&lt;style name=&quot;Theme.Dialog.TTDownload&quot; parent=&quot;Theme.AppCompat.Light.Dialog&quot;&gt;
        &lt;item name=&quot;windowNoTitle&quot;&gt;android:attr/windowNoTitle&lt;/item&gt;
        &lt;item name=&quot;android:windowBackground&quot;&gt;@color/white&lt;/item&gt;
&lt;/style&gt;</code></pre>
<h4 id="落地页titlebar主题配置">3.4.2 落地页titleBar主题配置</h4>
<p>通过TTAdConfig可设置落地页的主题，目前支持落地页无titleBar（TITLE_BAR_THEME_NO_TITLE_BAR）、titleBar亮色主题(TTAdConstant.TITLE_BAR_THEME_LIGHT)，titleBar暗色主题(TTAdConstant.TITLE_BAR_THEME_DARK)三种。</p>
<pre><code>TTAdConfig.titleBarTheme(TTAdConstant.TITLE_BAR_THEME_DARK);</code></pre>
<h3 id="常见问题">3.5 常见问题</h3>
<p>1.全局信息：</p>
<ul>
<li>调用TTAdManager.createAdNative(Context context)设置全局信息时，请务必保证传入的context为activity，否则会影响应用下载广告的下载。</li>
</ul>
<p>2.信息流广告：</p>
<ul>
<li>在创建信息流创意广告时请务必调用registerViewForInteraction(ViewGroup container, List clickViews, List creativeViews, AdInteractionListener listener)，否则会影响广告的计费及交互功能；</li>
<li>在调用registerViewForInteraction(ViewGroup container, List clickViews, List creativeViews, AdInteractionListener listener)方法时，如果clickViews、creativeViews中包含了相同的View，该View只会回调创意点击的回调。</li>
</ul>
<p>3.Andriod 7.0及以上 用户点击了“点击安装”后没有反应，或者下载完成后没有调起安装界面。</p>
<ul>
<li>请按照接入文档中适配Android7.0的方法去接入。并且确保support-v4包的版本为24.2.0及以上。</li>
</ul>
<p>4.如何区分落地页广告还是app下载广告？</p>
<ul>
<li>在广告的交互类型中，在浏览器内打开 （普通类型）、落地页（普通类型）、应用下载广告可以区分是落地页广告还是app下载广告。</li>
</ul>
<p>5.信息流视频广告如何记录展示？</p>
<ul>
<li>与信息流逻辑一致，在屏幕展现即可记录一个show</li>
</ul>
<p>6.资源混淆问题：如果您的应用对资源也进行混淆（如andResGuard），请不要混淆穿山甲的任何资源，防止资源找不到崩溃，穿山甲的资源清单请咨询技术支持</p>
<p>7.40029错误码，原因有以下两种 - 1. SDK版本低：您使用的sdk版本不得低于2.5.0.0，麻烦升级到平台最新版本sdk。 - 2. 接口使用错误：创建的代码位类型是模板渲染/非模板渲染，但是请求方法是非模板渲染/模板渲染的方法。解决办法：使用模板渲染的方法去请求模板渲染类型或者使用非模板渲染的方法去请求非模板类型的广告，如果代码位在平台上是模板渲染，可以参考文档中个性化模板XX广告的部分，demo中参考带有express部分的代码。如果代码位不是模板渲染，则不要调用含有express字样的接口。 - 参考文档：https://partner.oceanengine.com/doc?id=5dd0fe716b181e00112e3eb8</p>
<p>8.其他问题请咨询穿山甲相关人员。</p>
<h3 id="历史更新记录">3.6 历史更新记录</h3>
<table>
<colgroup>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
<col style="width: 33%"></col>
</colgroup>
<thead>
<tr class="header">
<th>文档版本</th>
<th>修订日期</th>
<th>修订说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>v1.0.0</td>
<td>2017-06-23</td>
<td>创建文档，支持Banner，信息流广告</td>
</tr>
<tr class="even">
<td>v1.1.0</td>
<td>2017-07-21</td>
<td>优化接口字段，数据加密</td>
</tr>
<tr class="odd">
<td>v1.1.1</td>
<td>2017-07-30</td>
<td>优化事件回调接口</td>
</tr>
<tr class="even">
<td>v1.2.0</td>
<td>2017-09-17</td>
<td>新增开屏、插屏广告</td>
</tr>
<tr class="odd">
<td>v1.3.0</td>
<td>2017-09-24</td>
<td>支持开屏、插屏广告和广告dislike；增加banner、信息流广告的回调接口，及用户广告反馈接口；</td>
</tr>
<tr class="even">
<td>v1.3.1</td>
<td>2017-10-27</td>
<td>解决了特殊情况下会crash的问题；对image_mode字段进行优化</td>
</tr>
<tr class="odd">
<td>v1.3.2</td>
<td>2017-11-08</td>
<td>增加全局配置是否允许SDK弹出通知、落地页出现在锁屏上面，增加全局下载器。</td>
</tr>
<tr class="even">
<td>v1.4.0</td>
<td>2017-12-08</td>
<td>支持更多广告类型的投放；优化了应用下载广告通知栏状态和交互；提升开屏广告接入灵活性</td>
</tr>
<tr class="odd">
<td>v1.5.0</td>
<td>2018-01-08</td>
<td>新增banner轮播，视频广告</td>
</tr>
<tr class="even">
<td>v1.6.0</td>
<td>2018-01-31</td>
<td>添加logo,支持应用调起广告，优化UI和交互等</td>
</tr>
<tr class="odd">
<td>v1.7.0</td>
<td>2018-02-08</td>
<td>新增激励视频广告，新增激励视频接入说明</td>
</tr>
<tr class="even">
<td>v1.8.0</td>
<td>2018-04-03</td>
<td>激励视频纵向支持与横向展示，插屏等样式修改，新增部分回调接口，下载相关问题修复</td>
</tr>
<tr class="odd">
<td>v1.8.1</td>
<td>2018-04-12</td>
<td>数据埋点优化，广告落地页问题修复</td>
</tr>
<tr class="even">
<td>v1.9.0</td>
<td>2018-04-25</td>
<td>开屏广告逻辑优化，部分已知问题修复</td>
</tr>
<tr class="odd">
<td>v1.9.1</td>
<td>2018-05-24</td>
<td>提升展示率，适配部分机型</td>
</tr>
<tr class="even">
<td>v1.9.2</td>
<td>2018-05-31</td>
<td>信息流视频广告逻辑优化</td>
</tr>
<tr class="odd">
<td>v1.9.3</td>
<td>2018-06-12</td>
<td>锁屏场景广告适配以及部分已知问题的修复</td>
</tr>
<tr class="even">
<td>v1.9.3.1</td>
<td>2018-07-08</td>
<td>信息流视频广告性能优化</td>
</tr>
<tr class="odd">
<td>v1.9.3.2</td>
<td>2018-07-13</td>
<td>展示条件中广告宽高大于50像素，性能优化</td>
</tr>
<tr class="even">
<td>v1.9.4</td>
<td>2018-07-16</td>
<td>信息流视频广告优化以及管理后台新增视频自动播放和静音设置选项</td>
</tr>
<tr class="odd">
<td>v1.9.5</td>
<td>2018-08-31</td>
<td>视频广告增加TextureView支持、新增全屏视频类型广告、新增原生广告支持、优化广告下载模块及其他已知问题修复等 <br>TTDownloadProvider删除，全局监听暂时不可用，混淆规则变更</br><br>取消全局下载控制和监听器功能</br></td>
</tr>
<tr class="even">
<td>v1.9.6</td>
<td>2018-09-13</td>
<td>优化埋点信息，R资源访问方式更改，已知问题修复</td>
</tr>
<tr class="odd">
<td>v1.9.6.1</td>
<td>2018-09-26</td>
<td>优化内存使用和电量使用，修复已知问题</td>
</tr>
<tr class="even">
<td>v1.9.7</td>
<td>2018-10-22</td>
<td>视频广告缓存逻辑优化，新增Draw信息流广告</td>
</tr>
<tr class="odd">
<td>v1.9.7.1</td>
<td>2018-11-07</td>
<td>修复资源文件命名冲突问题</td>
</tr>
<tr class="even">
<td>v1.9.7.2</td>
<td>2018-11-21</td>
<td>优化落地页广告体验，修复低概率异常，增强稳定性</td>
</tr>
<tr class="odd">
<td>v1.9.8</td>
<td>2018-12-06</td>
<td>多进程使用环境支持</td>
</tr>
<tr class="even">
<td>v1.9.9</td>
<td>2019-01-10</td>
<td>视频场景优化、激励视频样式优化、dislike自定义支持</td>
</tr>
<tr class="odd">
<td>v2.0.1.0</td>
<td>2019-03-05</td>
<td>支持原生动态布局，激励视频样式优化，已知bug修复</td>
</tr>
<tr class="even">
<td>v2.1.0.0</td>
<td>2019-05-14</td>
<td>提升视频广告播放体验，对外提供回调事件完善，已知问题修复</td>
</tr>
<tr class="odd">
<td>v2.2.0.0</td>
<td>2019-06-17</td>
<td>开屏支持视频广告，新增激励视频广告样式</td>
</tr>
<tr class="even">
<td>v2.3.0.0</td>
<td>2019-07-17</td>
<td>原生广告支持试玩广告，激励视频广告样式优化</td>
</tr>
<tr class="odd">
<td>v2.3.0.1</td>
<td>2019-07-18</td>
<td>完善个性化模板广告</td>
</tr>
<tr class="even">
<td>v2.4.0.0</td>
<td>2019-08-23</td>
<td>完善试玩广告场景，优化启动速度</td>
</tr>
<tr class="odd">
<td>v2.4.1.1</td>
<td>2019-09-06</td>
<td>增加个性化模板视频广告场景</td>
</tr>
<tr class="even">
<td>v2.4.1.2</td>
<td>2019-09-29</td>
<td>适配安卓Q</td>
</tr>
<tr class="odd">
<td>v2.4.2.0</td>
<td>2019-10-15</td>
<td>优化开屏广告场景</td>
</tr>
<tr class="even">
<td>v2.5.2.0</td>
<td>2019-10-29</td>
<td>修复已知问题</td>
</tr>
<tr class="odd">
<td>v2.5.2.4</td>
<td>2019-11-01</td>
<td>修复请求广告校验40025问题</td>
</tr>
<tr class="even">
<td>v2.7.0.0</td>
<td>2019-11-26</td>
<td>开屏场景支持个性化模板广告，开屏逻辑优化</td>
</tr>
<tr class="odd">
<td>v2.7.5.0</td>
<td>2019-12-25</td>
<td>优化权限使用和隐私加强，修复已知问题</td>
</tr>
<tr class="even">
<td>v2.7.5.1</td>
<td>2019-12-27</td>
<td>模板开屏广告点击回调修复</td>
</tr>
<tr class="odd">
<td>v2.8.0.0</td>
<td>2020-01-05</td>
<td>优化广告转化，支持网络容灾</td>
</tr>
<tr class="even">
<td>v2.8.0.1</td>
<td>2020-01-20</td>
<td>优化多进程回调，修复落地页展示问题</td>
</tr>
<tr class="odd">
<td>v2.8.0.2</td>
<td>2020-02-14</td>
<td>广告页面启动逻辑优化</td>
</tr>
<tr class="even">
<td>v2.9.0.0</td>
<td>2020-02-20</td>
<td>模板广告优化</td>
</tr>
<tr class="odd">
<td>v2.9.5.0</td>
<td>2020-03-16</td>
<td>模板广告渲染优化，网络库优化</td>
</tr>
<tr class="even">
<td>v3.1.0.0</td>
<td>2020-06-02</td>
<td>优化广告转化链路，提升转化</td>
</tr>
<tr class="odd">
<td>v3.1.5.0</td>
<td>2020-06-28</td>
<td>【1】去掉非原生插屏、非原生banner描述 【2】将全局下载状态控制器、全局下载状态控制器接口说明、接入全局下载状态控制器、全局下载状态监听器、全局下载状态监听器接口说明、接入全局下载状态监听器、下载状态Module去掉</td>
</tr>
<tr class="even">
<td>v3.2.0.0</td>
<td>2020-07-26</td>
<td>优化资源预加载，优化转化路径</td>
</tr>
<tr class="odd">
<td>v3.2.0.1</td>
<td>2020-07-29</td>
<td>优化资源预加载，优化转化路径</td>
</tr>
<tr class="even">
<td>v3.2.0.2</td>
<td>2020-08-05</td>
<td>增加oaid入口，模板开屏优化</td>
</tr>
<tr class="odd">
<td>v3.2.0.3</td>
<td>2020-08-13</td>
<td>增加armeabi架构支持，校准模板广告点击回调，修复已知问题</td>
</tr>
<tr class="even">
<td>v3.2.0.4</td>
<td>2020-08-19</td>
<td>修复Android 10 webview请求广告数量为1到3条异常</td>
</tr>
<tr class="odd">
<td>v3.2.0.6</td>
<td>2020-08-23</td>
<td>修复已知问题</td>
</tr>
<tr class="even">
<td>v3.2.5.0</td>
<td>2020-09-03</td>
<td>加强合规与用户下载体验</td>
</tr>
<tr class="odd">
<td>v3.2.5.1</td>
<td>2020-09-06</td>
<td>合规方案优化</td>
</tr>
<tr class="even">
<td>v3.2.6.2</td>
<td>2020-09-14</td>
<td>信息流广告支持竖版视频</td>
</tr>
</tbody>
</table>
</body>
</html>
